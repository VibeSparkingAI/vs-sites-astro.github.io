<!DOCTYPE html><html lang="zh-CN" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Blog | Vibe Sparking AI</title><link rel="canonical" href="https://www.vibesparking.com/zh-cn/blog/2/"/><link rel="alternate" hreflang="en" href="https://www.vibesparking.com/en/blog/2/"/><link rel="alternate" hreflang="zh-CN" href="https://www.vibesparking.com/zh-cn/blog/2/"/><link rel="sitemap" href="/sitemap-index.xml"/><script src="https://www.googletagmanager.com/gtag/js?id=G-82Q2L9J1C6" defer></script><script src="/src/ga.js" defer></script><link href="https://www.vibesparking.com/blog/rss.xml" rel="alternate" title="Blog" type="application/rss+xml"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.16.3"/><meta name="generator" content="Starlight v0.34.8"/><meta property="og:title" content="Blog"/><meta property="og:type" content="article"/><meta property="og:url" content="https://www.vibesparking.com/zh-cn/blog/2/"/><meta property="og:locale" content="zh-CN"/><meta property="og:description"/><meta property="og:site_name" content="Vibe Sparking AI"/><meta name="twitter:card" content="summary_large_image"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><style>[data-has-toc] :is(.right-sidebar-panel,mobile-starlight-toc){display:none}[data-has-toc] .main-frame{padding-top:var(--sl-nav-height)}.preview:where(.astro-dr56dw7m){display:flex;flex-direction:column;gap:1.5rem}h2:where(.astro-dr56dw7m){margin-bottom:1.5rem}h2:where(.astro-dr56dw7m) a:where(.astro-dr56dw7m){text-decoration:none}.posts:where(.astro-xaz7kpyh){display:flex;flex-direction:column;gap:3rem}
</style>
<link rel="stylesheet" href="/_astro/Authors.RHuJObSe.css">
<style>.content-panel:first-of-type{display:none}.content-panel:nth-of-type(2){border-top:none}
@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-avdet4wd){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-avdet4wd){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-avdet4wd){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-avdet4wd){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-avdet4wd){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-avdet4wd){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-avdet4wd){vertical-align:middle}}
@layer starlight.components{.card-grid:where(.astro-zntqmydn){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-zntqmydn)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-zntqmydn){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-zntqmydn){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-zntqmydn)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{.card:where(.astro-v5tidmuc){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-v5tidmuc):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-v5tidmuc):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-v5tidmuc):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-v5tidmuc):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-v5tidmuc){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-v5tidmuc) .icon:where(.astro-v5tidmuc){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-v5tidmuc) .body:where(.astro-v5tidmuc){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
@layer starlight.components{.sl-link-card:where(.astro-mf7fz2mj){display:grid;grid-template-columns:1fr auto;gap:.5rem;border:1px solid var(--sl-color-gray-5);border-radius:.5rem;padding:1rem;box-shadow:var(--sl-shadow-sm);position:relative}a:where(.astro-mf7fz2mj){text-decoration:none;line-height:var(--sl-line-height-headings)}a:where(.astro-mf7fz2mj):before{content:"";position:absolute;inset:0}.stack:where(.astro-mf7fz2mj){flex-direction:column;gap:.5rem}.title:where(.astro-mf7fz2mj){color:var(--sl-color-white);font-weight:600;font-size:var(--sl-text-lg)}.description:where(.astro-mf7fz2mj){color:var(--sl-color-gray-3);line-height:1.5}.icon:where(.astro-mf7fz2mj){color:var(--sl-color-gray-3)}.sl-link-card:where(.astro-mf7fz2mj):hover{background:var(--sl-color-gray-7, var(--sl-color-gray-6));border-color:var(--sl-color-gray-2)}.sl-link-card:where(.astro-mf7fz2mj):hover .icon:where(.astro-mf7fz2mj){color:var(--sl-color-white)}}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
@layer starlight.components{.sl-link-button:where(.astro-xwgiixxa){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-xwgiixxa).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-xwgiixxa).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-xwgiixxa) svg{flex-shrink:0}@media (min-width: 50rem){.sl-link-button:where(.astro-xwgiixxa){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/_astro/page.DoZOnLmF.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">跳转到内容</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/zh-cn" class="site-title sl-flex astro-m46x6ez3">  <span class="astro-m46x6ez3" translate="no"> Vibe Sparking AI </span> </a>  </div> <div class="sl-flex print:hidden astro-kmkmnagf"> <site-search class="astro-kmkmnagf astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;搜索&#34;}"> <button data-open-modal disabled aria-label="搜索" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">搜索</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="搜索" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> 取消 </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.DMZ5WJ-J.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <nav aria-label="Navbar" class="astro-7ecetekw"> <ul class="main-nav astro-7ecetekw"> <li class="has-dropdown astro-7ecetekw"> <a href="awesome" class="astro-7ecetekw">推荐</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="https://awesome-tools.vibesparking.com/" class="astro-7ecetekw">推荐 工具</a>  </li> </ul> </li><li class="has-dropdown astro-7ecetekw"> <a href="products" class="astro-7ecetekw">产品</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="https://ingest2ai.vibesparking.com/" class="astro-7ecetekw">Ingest2AI</a>  </li> </ul> </li><li class="has-dropdown astro-7ecetekw"> <a href="wellness" class="astro-7ecetekw">健康</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="wellness/sleep" class="astro-7ecetekw">睡眠</a>  </li><li class=" astro-7ecetekw"> <a href="wellness/fitness" class="astro-7ecetekw">健身</a>  </li><li class=" astro-7ecetekw"> <a href="wellness/relaxation" class="astro-7ecetekw">放松</a>  </li> </ul> </li><li class=" astro-7ecetekw"> <a href="wealth" class="astro-7ecetekw">财富</a>  </li><li class="has-dropdown astro-7ecetekw"> <a href="growth" class="astro-7ecetekw">成长</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="ai/vibe-coding" class="astro-7ecetekw">AI 灵感编程</a>  </li> </ul> </li> </ul> </nav>  <script type="module">document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".main-nav > li > a, .dropdown-menu > li > a").forEach(e=>{e.addEventListener("click",t=>{if(window.innerWidth<=768){const n=e.parentElement;n&&(n.classList.contains("has-dropdown")||n.classList.contains("has-submenu"))&&(t.preventDefault(),n.classList.toggle("active"))}})})});</script> <a href="https://github.com/VibeSparkingAI/vs-sites-astro.github.io" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://www.vibesparking.com/blog/rss.xml" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">RSS</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a> </div> <div class="astro-eboeziq4"> <a href="/zh-cn/blog/" class="astro-eboeziq4">Blog</a> </div>  <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">选择主题</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select value="auto" autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">深色</option><option value="light" class="astro-4yphtoen">浅色</option><option value="auto" selected class="astro-4yphtoen">自动</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <starlight-lang-select><label style="--sl-select-width: 7em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">选择语言</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg> <select value="/zh-cn/blog/2/" autocomplete="off" class="astro-4yphtoen"> <option value="/en/blog/2/" class="astro-4yphtoen">English</option><option value="/zh-cn/blog/2/" selected class="astro-4yphtoen">简体中文</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label> </starlight-lang-select><script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-vrdttmbt" aria-label="主要"> <starlight-menu-button class="print:hidden astro-jif73yzw"> <button aria-expanded="false" aria-label="菜单" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="open-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <sl-sidebar-state-persist data-hash="0wl5cfk" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/zh-cn/blog/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">All posts</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Recent posts</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/anthropic/2025-12-03-anthropic-internal-ai-development-survey/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Anthropic 内部员工 AI 开发调查：前端最香，架构最难交给 AI</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/trends/2025-12-02-full-stack-of-agentic-ai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">从前端到监控，这就是一套可落地的 Agentic AI 工程地图</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/trends/2025-12-01-johari-window-ai-human-dialogue/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">乔哈里视窗模型与人类–AI对话的四象限分析</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/us-market/2025-12-01-december-january-us-stock-investors-must-watch-events/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">12月～明年1月，美股投资者必须盯紧的几件大事</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/google/gemini/nano-banana-pro/2025-12-01-no-ps-needed-gemini-3-one-click-professional-us-stock-financial-calendar-guide-with-tutorial/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">无需PS！教你用 Gemini 3 一键生成专业级美股财经日历（附实战教程）</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/us-market/2025-10-31-ai-us-stock-market-key-events-investment-research-report/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI美股11月关键事件投资研究报告</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/us-market/2025-10-30-tech-giants-q3-earnings-investment-advice-ai-opportunities-risks/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">科技巨头Q3财报现状与投资建议：AI驱动下的机遇与风险</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/practices/2025-10-28-from-exploration-to-fix-how-claude-code-thinks-and-reasons-through-a-sqlalchemy-transaction-rollback-issue/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">从探索到修复：Claude Code 如何思考与推理，排查 SQLAlchemy 事务回滚问题</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/intel/2025-10-24-intel-investment-analysis/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">英特尔(INTC):拐点级投资机会的深度分析</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/kimi/kimi-cli/2025-10-24-kimi-cli-terminal-agent-guide/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">用了 Kimi CLI，我把它当“会写代码的 Shell”</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/practices/2025-10-23-ai-docs-spaghetti-code/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI 时代的文档屎山？BMAD、Spec-Kit、OpenSpec 等面向文档AI编程的利弊</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/practices/2025-10-22-codex-vs-claude-code-ios-ble-race-condition-analysis/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Codex vs Claude Code 的iOS蓝牙连接竞态条件问题排查对比分析</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/trends/2025-10-19-ai-impact-boss-leader-engineer/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI 时代对 Boss、Leader 和工程师的影响</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/trends/2025-10-18-coding-thinking-software-development/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">写代码只是表象，思考才是软件开发的本质</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/us-market/2025-10-18-bank-turmoil-liquidity-tariffs-small-town-depositors-market-adventure/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">银行风波、流动性和关税：一则“小镇储户”的市场冒险故事</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/anthropic/2025-10-18-claude-skills-overview/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">让 Claude Skills 帮你“开外挂”：三步上手、亮点速览、8 个真·落地场景</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/openspec/2025-10-17-openspec-claude-code-dev-process/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">用 OpenSpec + Claude Code，跑通一套高效、轻量和可控的规格驱动开发流程</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/us-market/2025-10-16-2025-q3-ai-chip-supply-chain-earnings-outlook/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">2025年Q3AI芯片产业链财报开门红：阿斯麦、台积电业绩超预期，英伟达将何去何从？</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/finance/us-market/2025-10-16-2025-q3-bank-earnings-market-correlation-ai-outlook/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">2025年Q3银行股财报季与美股市场相关性分析及AI板块展望</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/ai/chatgpt/2025-10-16-chatgpt-fix-bluetooth-device-ui-chaos/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ChatGPT 怎么帮小白产品经理把界面做得更人性化？</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Tags</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Code (90)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI (40)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/finance/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Finance (25)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/openai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenAI (21)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ai-agent/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI Agent (18)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/cursor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cursor (18)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/anthropic/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Anthropic (17)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vibe-coding/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Vibe Coding (15)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/investment/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Investment (11)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/us-market/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">US Market (11)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/chatgpt/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ChatGPT (10)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ai-era/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI Era (9)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude (9)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nvidia/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NVIDIA (9)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gpt-5/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GPT-5 (8)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vs-code/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VS Code (8)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/codex/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Codex (7)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/github-copilot/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitHub Copilot (7)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/prompt-engineering/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prompt Engineering (7)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/us-stock-market/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">US Stock Market (7)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gemini/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini (6)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ble/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BLE (5)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/kiro/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kiro (5)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/palantir/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Palantir (5)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/tesla/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tesla (5)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/android/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Android (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/arkts/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ArkTS (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/bluetooth-low-energy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Bluetooth Low Energy (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/earnings/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Earnings (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/flutter/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Flutter (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gemini-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini CLI (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/harmonyos/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HarmonyOS (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ios/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">iOS (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/lovable/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Lovable (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nasdaq-nvda/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NASDAQ: NVDA (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/software-engineering/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Software Engineering (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/team-management/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Team Management (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vibe-coding-practices/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Vibe Coding Practices (4)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/amazon/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Amazon (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/apk/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">APK (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/codex-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Codex CLI (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/cursor-agent/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cursor Agent (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/figma/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Figma (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/git-worktree/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Git Worktree (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google-gemini/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google Gemini (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/jpmorgan/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">JPMorgan (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/kimi-k2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kimi K2 (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/mcp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MCP (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/meta/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Meta (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/microsoft/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Microsoft (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/mongodb/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MongoDB (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nyse-pltr/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NYSE: PLTR (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/python/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Python (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/robinhood/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Robinhood (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/sp-500/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">S&amp;P 500 (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/tmux/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tmux (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/trae/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Trae (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/zed/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zed (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/agent-client-protocolacp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Agent Client Protocol（ACP） (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/aws/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AWS (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/axon/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Axon (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/blackrock/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BlackRock (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/bmad/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BMAD (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/citi/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Citi (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code-ui/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Code UI (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-relay-service/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Relay Service (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/cloud-computing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cloud Computing (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/code-review/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Code Review (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/commit-message/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Commit Message (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/conductor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Conductor (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/copilot/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Copilot (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/deepseek/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DeepSeek (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/education/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Education (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/federal-reserve/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Federal Reserve (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/goldman-sachs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Goldman Sachs (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gpu/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GPU (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ionq/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">IonQ (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/jetbrains/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">JetBrains (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ki2api/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ki2API (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/n8n/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">n8n (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nasdaq/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nasdaq (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ollama/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ollama (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/openspec/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenSpec (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/quant/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Quant (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/rails/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Rails (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/rocket-lab/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Rocket Lab (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/rspec/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Rspec (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/snowflake/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Snowflake (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/sofi/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SoFi (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/spokenly/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Spokenly (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/story-book/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Story Book (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/testing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Testing (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/thinking/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Thinking (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/v0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">V0 (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vibetunnel/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VibeTunnel (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/wells-fargo/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Wells Fargo (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/agentic-ai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Agentic AI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/agentic-ide/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Agentic IDE (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ai-infrastructure/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI Infrastructure (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ai-model/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AI Model (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/aider/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Aider (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/amd/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">AMD (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/amp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Amp (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/android-studio/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Android Studio (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/androidstudio/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Android Studio (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/apple/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Apple (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/apple-礼品卡/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Apple 礼品卡 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/asml/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ASML (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/astera-labs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Astera Labs (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/avalanche-card/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Avalanche Card (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/backlogmd/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Backlog.md (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/bdd/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BDD (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/beautifulsoup/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BeautifulSoup (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/behavior-driven-development/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Behavior-Driven Development (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/bluetooth/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Bluetooth (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/boj/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BOJ (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/bolt/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Bolt (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/boltnew/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Bolt.new (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/browser-echo/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Browser Echo (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/cc-switch/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">cc-switch (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ccpm/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ccpm (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ccr/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ccr (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ccstatusline/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ccstatusline (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ccusage/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ccusage (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/chain-of-thought-cot/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Chain of Thought (CoT) (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/chatgpt-agent/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ChatGPT Agent (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/chatgpt-pro/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ChatGPT Pro (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/chatlog/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">chatlog (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/chiphuyen/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Chip Huyen (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-artifacts/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Artifacts (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code-hooks/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Code Hooks (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claudecoderouter/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Code Router (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code-subagents/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Code Subagents (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-max/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Max (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-opus-41/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Claude Opus 4.1 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code-companion/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">claude-code-companion (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code-proxy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">claude-code-proxy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-code-templates/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">claude-code-templates (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/claude-trace/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">claude-trace (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/cloudflare/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cloudflare (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/codecombat/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CodeCombat (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/codegpt/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CodeGPT (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/command-line-interface-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Command Line Interface (CLI) (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/context-engineering/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Context Engineering (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/context7/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Context7 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/coreweave/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CoreWeave (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/coze/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Coze (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/crowdstrike/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CrowdStrike (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/crush/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Crush (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/cursor-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Cursor CLI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/d-wave/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">D-Wave (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/dataset/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dataset (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ddd/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DDD (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/deepagents/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DeepAgents (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/deepseek-r1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DeepSeek R1 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/deepseek-v31/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DeepSeek v3.1 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/deepwiki/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DeepWiki (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/designer/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Designer (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/dify/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dify (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/dlocal/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DLocal (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/docker/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/docker-compose/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Docker Compose (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/documentation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Documentation (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/documentation-oriented-programming/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Documentation-oriented Programming (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/donald-trump/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Donald Trump (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/doocumentation-driven-development/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Doocumentation-Driven Development (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/dop/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DoP (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/dxy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">DXY (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/dyad/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Dyad (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ears/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">EARS (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/economic-events/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Economic Events (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/elon-musk/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Elon Musk (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/energy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Energy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/english/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">English (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/exa/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Exa (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/excel/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Excel (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/export/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">export (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/faang/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">FAANG (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/figma-make/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Figma Make (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/flavor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Flavor (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gemini-3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini 3 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gemini-cli-companion/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini CLI Companion (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gemini-ultra/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini Ultra (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gemini-25-pro/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">gemini-2.5-pro (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/genie-3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Genie 3 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/git/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Git (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/git-merge/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">git merge (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/github/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitHub (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/github-actions/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GitHub Actions (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/glm-45/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GLM-4.5 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google-cloud/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google Cloud (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google-deepmind/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google DeepMind (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google-gemini-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google Gemini CLI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google-opal/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google Opal (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/google-translate/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Google Translate (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/gpt-oss/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">GPT-OSS (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/grab/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Grab (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/grok/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Grok (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/grok-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Grok CLI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/html/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">HTML (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ibm/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">IBM (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/icloud/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">iCloud (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ifast-global-bank-card/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">iFAST Global Bank Card (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/iflow-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">iflow-cli (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/index-funds/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Index Funds (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/intc/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">INTC (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/intel/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Intel (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/internet-era/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Internet Era (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ipo/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">IPO (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/iren/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Iren (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/iris-energy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Iris Energy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/japan/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Japan (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/javascript/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">JavaScript (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/johari-window/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Johari Window (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/kimi-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">kimi-cli (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/kombai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kombai (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/kronos/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Kronos (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/landingai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">LandingAI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/lottery-ticket-hypothesis/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Lottery Ticket Hypothesis (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/macos/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">macOS (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/magic/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Magic (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/markdown/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Markdown (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/mcp-proxy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">mcp-proxy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/microsoft-azure/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Microsoft Azure (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/midest/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Midest (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/midjourney/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Midjourney (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/minerals/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Minerals (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/monetary-policy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Monetary Policy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/moonshot/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Moonshot (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/morgan-stanley/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Morgan Stanley (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/morph/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Morph (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/most-valuable-documentation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Most Valuable Documentation (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/mp-materials/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MP Materials (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/mvd/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MVD (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nano-banana-pro/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nano Banana Pro (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nasdaq-100/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nasdaq 100 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nasdaq-tsla/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NASDAQ: TSLA (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nebius/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nebius (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nebius-ai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nebius AI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nubank/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nubank (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nuclear-energy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Nuclear Energy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nyse-fig/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NYSE: FIG (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/nyse-snow/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NYSE: SNOW (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/oklo/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Oklo (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/omnara/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Omnara (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/open-lovable/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Open Lovable (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/open-web-search/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Open-Web-Search (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/openai-codex-cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenAI Codex CLI (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/openai-compatible-api/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenAI Compatible API (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/openai-o3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenAI o3 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/opendoor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Opendoor (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/openrouter/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">OpenRouter (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/oracle/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Oracle (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/pdf/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">PDF (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/planning/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Planning (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/playwright/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Playwright (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ponyai/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Pony.ai (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/primary-school/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Primary School (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/product-management/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Product Management (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/product-manager/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Product Manager (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/prototype/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prototype (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/pydantic/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Pydantic (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/quantum-computing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Quantum Computing (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/rare-earths/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Rare Earths (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/raytheon-technologies/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Raytheon Technologies (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/react/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">React (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/replit-agent/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Replit Agent (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/screen/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Screen (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/security-review/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">security-review (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/semiconductor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Semiconductor (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/sequential-thinking/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sequential-Thinking (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/serena/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Serena (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/settingsjson/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">settings.json (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/shopify/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Shopify (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/siliconflow/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SiliconFlow (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/sniffly/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sniffly (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/software-engineer/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Software Engineer (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/spec-driven-development/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Spec-Driven Development (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/spec-kit/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Spec-Kit (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/spec-workflow/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Spec-Workflow (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/spire-global/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Spire Global (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/sqlalchemy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SQLAlchemy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/stagewise/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">StageWise (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/station/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Station (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/supergrok-heavy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">SuperGrok Heavy (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/symbotic/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Symbotic (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/synthetic-questions-generation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Synthetic Questions Generation (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/tamagotchi/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tamagotchi (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/tap4aiwebui/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">tap4‑ai‑webui (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/telegram/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Telegram (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/terminal/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terminal (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/terminalcp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">terminalcp (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/todo-list/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Todo List (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/trae-cn/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Trae CN (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/transaction/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Transaction (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/transmedics/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TransMedics (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/trump-tariffs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Trump Tariffs (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/tsmc/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TSMC (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/typescript/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TypeScript (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/us-dollar/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">US Dollar (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/us-treasuries/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">US Treasuries (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/usd-index/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">USD Index (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/usdjpy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">USDJPY (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/ux/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">UX (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/uzi/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">uzi (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/veo/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Veo (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vgt/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VGT (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vibe-kanban/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">vibe-kanban (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vibetree/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VibeTree (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/vscode/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">VSCode (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/warp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Warp (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/web/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Web (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/windsurf/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Windsurf (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/word/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Word (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/zcf---ai-agent---claude-code/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">zcf - AI Agent - Claude Code (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/zelda/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Zelda (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/zelda-claude-code/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">zelda-claude-code (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/尼日利亚/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">尼日利亚 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/微信/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">微信 (1)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/tags/雪崩卡/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">雪崩卡 (1)</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/zh-cn/blog/rss.xml" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">RSS</span>  </a> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="social-icons astro-wu23bvmt"> <nav aria-label="Navbar" class="astro-7ecetekw"> <ul class="main-nav astro-7ecetekw"> <li class="has-dropdown astro-7ecetekw"> <a href="awesome" class="astro-7ecetekw">推荐</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="https://awesome-tools.vibesparking.com/" class="astro-7ecetekw">推荐 工具</a>  </li> </ul> </li><li class="has-dropdown astro-7ecetekw"> <a href="products" class="astro-7ecetekw">产品</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="https://ingest2ai.vibesparking.com/" class="astro-7ecetekw">Ingest2AI</a>  </li> </ul> </li><li class="has-dropdown astro-7ecetekw"> <a href="wellness" class="astro-7ecetekw">健康</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="wellness/sleep" class="astro-7ecetekw">睡眠</a>  </li><li class=" astro-7ecetekw"> <a href="wellness/fitness" class="astro-7ecetekw">健身</a>  </li><li class=" astro-7ecetekw"> <a href="wellness/relaxation" class="astro-7ecetekw">放松</a>  </li> </ul> </li><li class=" astro-7ecetekw"> <a href="wealth" class="astro-7ecetekw">财富</a>  </li><li class="has-dropdown astro-7ecetekw"> <a href="growth" class="astro-7ecetekw">成长</a> <ul class="dropdown-menu astro-7ecetekw"> <li class=" astro-7ecetekw"> <a href="ai/vibe-coding" class="astro-7ecetekw">AI 灵感编程</a>  </li> </ul> </li> </ul> </nav>   <a href="https://github.com/VibeSparkingAI/vs-sites-astro.github.io" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://www.vibesparking.com/blog/rss.xml" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">RSS</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a> </div> <div class="astro-eboeziq4"> <a href="/zh-cn/blog/" class="astro-eboeziq4">Blog</a> </div>  <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">选择主题</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select value="auto" autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">深色</option><option value="light" class="astro-4yphtoen">浅色</option><option value="auto" selected class="astro-4yphtoen">自动</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>  <starlight-lang-select><label style="--sl-select-width: 7em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">选择语言</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg> <select value="/zh-cn/blog/2/" autocomplete="off" class="astro-4yphtoen"> <option value="/en/blog/2/" class="astro-4yphtoen">English</option><option value="/zh-cn/blog/2/" selected class="astro-4yphtoen">简体中文</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label> </starlight-lang-select> </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container print:hidden astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-bboabfps"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-bboabfps"><details id="starlight__mobile-toc" class="astro-bboabfps"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-bboabfps"><div class="toggle sl-flex astro-bboabfps">本页内容<svg aria-hidden="true" class="caret astro-bboabfps astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></div><span class="display-current astro-bboabfps"></span></summary><div class="dropdown astro-bboabfps"><ul class="isMobile astro-4elwmllm" style="--depth: 0;"> <li class="astro-4elwmllm" style="--depth: 0;"> <a href="#_top" data-shb-heading="概述" class="astro-4elwmllm" style="--depth: 0;"> <span class="astro-7vjlygkt">概述</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module">const b=["caution","danger","default","note","success","tip"],u="__SHB__",E="__SHB_SPACE__";function H(a){return b.includes(a)}function _(a){const t=a.split(" ").pop();if(!t)return;const n=t.split(u),[,r,s]=n;if(!(!r||!H(r)||!s))return{heading:a.replace(new RegExp(`${u}.*${u}`),""),text:s.replace(E," "),variant:r}}const v="_top";class g extends HTMLElement{constructor(){super(),this._current=this.querySelector('a[aria-current="true"]'),this.minH=Number.parseInt(this.dataset.minH??"2",10),this.maxH=Number.parseInt(this.dataset.maxH??"3",10),this.isHeading=e=>{if(e instanceof HTMLHeadingElement){if(e.id===v)return!0;const c=e.tagName[1];if(c){const o=Number.parseInt(c,10);if(o>=this.minH&&o<=this.maxH)return!0}}return!1};const t=[...this.querySelectorAll("a")],n=e=>{if(!e)return null;const c=e;for(;e;){if(this.isHeading(e))return e;for(e=e.previousElementSibling;e?.lastElementChild;)e=e.lastElementChild;const o=n(e);if(o)return o}return n(c.parentElement)},r=e=>{for(const{isIntersecting:c,target:o}of e){if(!c)continue;const h=n(o);if(!h)continue;const m=t.find(p=>p.hash===`#${encodeURIComponent(h.id)}`);if(m){this.current=m;break}}},s=document.querySelectorAll("main [id], main [id] ~ *, main .content > *");let i;const d=()=>{i&&i.disconnect(),i=new IntersectionObserver(r,{rootMargin:this.getRootMargin()});for(const e of s)i.observe(e)};d();const f=globalThis.requestIdleCallback||(e=>setTimeout(e,1));let l;window.addEventListener("resize",()=>{i&&i.disconnect(),clearTimeout(l),l=setTimeout(()=>f(d),200)})}set current(t){t!==this._current&&(this._current&&this._current.removeAttribute("aria-current"),t.setAttribute("aria-current","true"),this._current=t)}get current(){return this._current}getRootMargin(){const t=document.querySelector("header")?.getBoundingClientRect().height??0,n=this.querySelector("summary")?.getBoundingClientRect().height??0,r=t+n+32,s=r+53,i=document.documentElement.clientHeight;return`-${r}px 0% ${s-i}px`}}customElements.define("starlight-toc",g);class x extends g{set current(t){super.current=t;const n=this.querySelector(".display-current");if(n){const r=t.dataset.shbHeading;if(r){const s=_(r);if(s){n.textContent="",n.append(document.createTextNode(`${s.heading} `));const i=document.createElement("span");i.textContent=s.text,i.dataset.shbBadge="",i.dataset.shbBadgeVariant=s.variant,n.append(i);return}}n.textContent=t.textContent}}get current(){return super.current}constructor(){super();const t=this.querySelector("details");if(!t)return;const n=()=>{t.open=!1};for(const r of t.querySelectorAll("a"))r.addEventListener("click",n);globalThis.addEventListener("click",r=>{t.contains(r.target)||n()}),globalThis.addEventListener("keydown",r=>{if(r.key==="Escape"&&t.open){const s=t.contains(document.activeElement);if(n(),s){const i=t.querySelector("summary");i&&i.focus()}}})}}customElements.define("mobile-starlight-toc",x);</script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">本页内容</h2><ul class="astro-4elwmllm" style="--depth: 0;"> <li class="astro-4elwmllm" style="--depth: 0;"> <a href="#_top" data-shb-heading="概述" class="astro-4elwmllm" style="--depth: 0;"> <span class="astro-7vjlygkt">概述</span> </a>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main class="astro-bguv2lll" lang="zh-CN" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">Blog</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content">   <div class="posts astro-xaz7kpyh"> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/changelog/2025-10-16-claude-code-217-haiku-45-sonnet-45/" class="astro-dr56dw7m">Claude Code 2.0.17 上新：Haiku 4.5 接管执行，Plan 用 Sonnet，速度与成本都下来了</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-10-16T00:00:00.000Z" class="astro-2oxtfctb"> 2025年10月16日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # Claude Code 2.0.17 上新：Haiku 4.5 接管执行，Plan 用 Sonnet，速度与成本都下来了 -->
<!-- （配合 Vibe Sparking AI 氛围～这篇给你一口气看懂新版 Claude Code 的两个关键变化） -->
<div class="sl-heading-wrapper level-h2"><h2 id="引言">引言</h2><a class="sl-anchor-link" href="#引言"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言”</span></a></div>
<p>今天的更新，对 Claude Code 写代码的人太友好了。</p>
<p><strong>Claude Haiku 4.5 上线，便宜还更快；Plan 模式默认用 Sonnet 规划，执行切 Haiku。</strong>
实际体验？项目跑起来更顺，钱包也不那么疼了。官方定价与定位、以及这次在 Claude Code 里的联动，都能佐证这点。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="亮点一价格更低速度更快">亮点一：价格更低，速度更快</h2><a class="sl-anchor-link" href="#亮点一价格更低速度更快"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “亮点一：价格更低，速度更快”</span></a></div>
<p><strong>Haiku 4.5：$1 / $5（输入/输出，每百万tokens）</strong>，面向实时、低延迟任务，针对代码、子代理协作、电脑操作等场景做了优化。和今年 5 月的 Sonnet 4 相比，<strong>速度翻倍有余、成本约三分之一</strong>，但在很多编码任务上给到“近前沿”的表现。</p>
<p>为什么说“更省钱”？你可以对比下同梯队的定价：</p>
<ul>
<li><strong>Sonnet 4.5：$3 / $15</strong>（输入/输出）。</li>
<li><strong>Opus 4.1：$15 / $75</strong>（输入/输出）。</li>
</ul>
<p>这意味着，<strong>把一些不需要“最强脑力”的执行环节交给 Haiku 4.5</strong>，账单能立刻瘦身，而且响应更跟手。对需要批量跑 agent、对接服务端、或在 IDE 里频繁调用的团队来说，性价比非常明显。</p>
<blockquote>
<p>小结：<strong>Haiku 4.5 = 接近 Sonnet 4 的编码力 + 更快速度 + 三分之一价格</strong>。这不是“凑合用的小模型”，而是“能落地的大杀器”。</p>
</blockquote>
<div class="sl-heading-wrapper level-h2"><h2 id="亮点二plan-用-sonnet执行切-haiku2017-的默认联动">亮点二：Plan 用 Sonnet，执行切 Haiku（2.0.17 的默认联动）</h2><a class="sl-anchor-link" href="#亮点二plan-用-sonnet执行切-haiku2017-的默认联动"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “亮点二：Plan 用 Sonnet，执行切 Haiku（2.0.17 的默认联动）”</span></a></div>
<p>这次 <strong>Claude Code 2.0.17</strong> 的细节很关键：
**在 Plan 模式下，默认用 Sonnet 规划；到执行阶段自动切换 Haiku 来落地。**这和我们在终端/VS Code 里的真实工作流正好契合：<strong>重推理给 Sonnet，批量实现交给 Haiku。</strong></p>
<ul>
<li>版本侧证：VS Code 扩展已到 <strong>2.0.17</strong>，伴随 10 月更新上架。</li>
<li>官方基调：<strong>Claude Code 的主力仍由 Sonnet 4.5 驱动</strong>，负责长任务与复杂规划；Haiku 4.5 则以<strong>更快更省</strong>的姿态补上执行位。</li>
</ul>
<p>这种“<strong>规划/执行分层</strong>”的设计，和此前“高级模型负责 Plan、次一级模型负责实现”的思路一脉相承，只是这次把 <strong>Haiku 4.5</strong> 换上了更能打的位置。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="真实感受opus-太强也太贵sonnet-稳haiku-现在能顶">真实感受：<strong>Opus 太强，也太贵；Sonnet 稳；Haiku 现在能顶</strong></h2><a class="sl-anchor-link" href="#真实感受opus-太强也太贵sonnet-稳haiku-现在能顶"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “真实感受：Opus 太强，也太贵；Sonnet 稳；Haiku 现在能顶”</span></a></div>
<p>做过几次大活之后，我的感受更直接：</p>
<ul>
<li><strong>Opus</strong>：开脑洞、跨栈架构、深度检索，稳得离谱。**但账单真的顶不住。**一旦把执行也交给它，涌现出来的是结果，也是心跳。</li>
<li><strong>Sonnet 4.5</strong>：现在是 Claude 家“<strong>最好用的编码大脑</strong>”。Plan 模式下让它思考，策略、步骤、风险提示都在线。</li>
<li><strong>Haiku 4.5</strong>：<strong>执行位的 MVP</strong>。跑 agent 子任务、开并行、写样板、搬文件、过测试，全都又快又省。<strong>写前端 scaffold、批量重命名、生成 fixtures</strong> 这种工作量，它几乎“不带喘”。</li>
</ul>
<p>一句话：**昂贵的“思考”，用 Sonnet；大量的“手脚”，交给 Haiku。**你的速度会上去，成本会下来，稳定性也更可控。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="上手建议给忙碌的工程团队">上手建议（给忙碌的工程团队）</h2><a class="sl-anchor-link" href="#上手建议给忙碌的工程团队"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “上手建议（给忙碌的工程团队）”</span></a></div>
<ul>
<li><strong>保持“Plan→Exec”分层</strong>：把难题拆清楚，再并行下发子任务，Haiku 4.5 扛执行。</li>
<li><strong>多用并行与子代理</strong>：让多个 Haiku 4.5 并跑，主代理用 Sonnet 4.5 协调。</li>
<li><strong>成本可视化</strong>：看 API usage，统计 Haiku/Sonnet/Opus 的调用占比，拉一个冲刺周期的对账单。</li>
<li><strong>场景切换</strong>：实时聊天助手、客服工单、低延迟编排，优先 Haiku 4.5；复杂改造、跨仓库大手术，Plan 交给 Sonnet 4.5。</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p>这波更新没搞花活，<strong>就是把“好用+省钱”落实到日常开发流</strong>。
Plan 用 Sonnet，执行切 Haiku。<strong>代码动得快，钱也花得明白。</strong></p>
<p>你怎么看？有没有哪种任务，Haiku 4.5 一上阵就立刻见效？欢迎在评论区分享你的实测。</p>
<!-- 


## 参考与延伸阅读

* Anthropic《Introducing Claude Haiku 4.5》：性能与定价信息，强调“更快更省”。
* Haiku 4.5 开发者定价：**$1 / $5（输入/输出）**。
* Sonnet 4.5 发布与定价：**$3 / $15**。
* Opus 4.1 定价：**$15 / $75**。
* 社区侧证：**Claude Code 2.0.17** Plan→Sonnet、执行→Haiku 的默认策略。
* Claude Code 能力升级（Sonnet 4.5 驱动）。

---

# 推荐标题（多语言 + slug）

1. **中文**：Haiku 4.5 接管执行位：Claude Code 2.0.17 省钱又提速
   **English**: Haiku 4.5 Takes Over Execution: Faster, Cheaper Claude Code 2.0.17
   **繁體**：Haiku 4.5 接手執行位：Claude Code 2.0.17 省錢又加速
   **日本語**：Haiku 4.5 が実行を担当：Claude Code 2.0.17 は高速・低コスト
   **Français** : Haiku 4.5 prend l’exécution : Claude Code 2.0.17 plus rapide et moins cher
   **Español**: Haiku 4.5 toma la ejecución: Claude Code 2.0.17 más rápido y barato
   **Português**: Haiku 4.5 assume a execução: Claude Code 2.0.17 mais rápido e barato
   **slug**：haiku45-exec-claude-code-2017

2. **中文**：Plan 用 Sonnet，干活交 Haiku：新一代 Claude Code 流程范式
   **English**: Plan with Sonnet, Ship with Haiku: The New Claude Code Workflow
   **繁體**：Plan 用 Sonnet，執行交 Haiku：Claude Code 新工作流
   **日本語**：計画は Sonnet、実装は Haiku：新しい Claude Code ワークフロー
   **Français** : Planifier avec Sonnet, livrer avec Haiku : le nouveau flux Claude Code
   **Español**: Planear con Sonnet, ejecutar con Haiku: el nuevo flujo de Claude Code
   **Português**: Planeje com Sonnet, entregue com Haiku: o novo fluxo do Claude Code
   **slug**：plan-sonnet-ship-haiku

3. **中文**：告别“贵上天”的 Opus？Haiku 4.5 给了更现实的答案
   **English**: Tired of Opus Prices? Haiku 4.5 Is the Practical Answer
   **繁體**：Opus 太貴？Haiku 4.5 給出務實解
   **日本語**：Opus は高すぎ？Haiku 4.5 が現実解
   **Français** : Marre du prix d’Opus ? Haiku 4.5 est la réponse pragmatique
   **Español**: ¿Opus demasiado caro? Haiku 4.5 es la respuesta práctica
   **Português**: Opus caro demais? Haiku 4.5 é a resposta prática
   **slug**：bye-opus-hello-haiku45

---

# 图片生成（插画风｜2:1｜不含中文）

**封面图 Prompt（英文）**
“An illustration of a dual-engine coding workflow: a thoughtful planner brain on the left labeled ‘Plan (Sonnet)’ and a lightning-fast robotic arm on the right labeled ‘Execute (Haiku)’, connected by a flow of code snippets and checkmarks. Clean, modern, vibrant gradients, developer terminal elements, 2:1 aspect ratio, no text in Chinese.”

**配图 1（亮点一：价格与速度）**
“Infographic-style illustration showing three model tiers as rockets: Opus (largest, expensive), Sonnet (balanced), Haiku 4.5 (small, very fast) racing on a track with price tags and speed lines. Minimalistic, tech aesthetic, 2:1, no Chinese text.”

**配图 2（亮点二：Plan→Exec 流程）**
“Pipeline diagram illustration: ‘Plan’ node with a strategic blueprint, arrow to ‘Execute’ node with multiple small bots working in parallel, representing subagents. Subtle icons for IDE and terminal. Clean, pastel gradients, 2:1.”

**配图 3（真实感受/对比）**
“Side-by-side illustration: a heavy golden crown labeled ‘Opus’ on a scale vs. a feather-fast conveyor belt of code blocks labeled ‘Haiku 4.5’. Emphasize cost vs. speed tradeoff. 2:1, editorial, no Chinese text.”

> 说明：以上是直接可用的英文提示词，投喂你常用的绘图工具即可出图。

---

# 互动金句（3条，用于朋友圈/评论区）

1. “Plan 交给 Sonnet，体力活扔给 Haiku，项目跑得比我回消息还快😂”
2. “Opus：你值得更好；钱包：我更需要便宜。Haiku 4.5：成交！”
3. “今天起，写代码像点外卖：Sonnet 负责下单，Haiku 5 分钟送达🍕”



需要我把这篇扩成“团队落地操作手册版”（含模型切换脚本、成本监控表、并行子代理模板）吗？我可以直接补上。

[1]: https://www.anthropic.com/news/claude-haiku-4-5?utm_source=chatgpt.com "Introducing Claude Haiku 4.5"
[2]: https://www.anthropic.com/news/claude-sonnet-4-5?utm_source=chatgpt.com "Introducing Claude Sonnet 4.5"
[3]: https://www.anthropic.com/claude/opus?utm_source=chatgpt.com "Claude Opus 4.1"
[4]: https://docs.claude.com/en/release-notes/api?utm_source=chatgpt.com "Claude Developer Platform"
[5]: https://x.com/oikon48/status/1978509015328964846?utm_source=chatgpt.com "Oikon on X: \"Claude Code 2.0.17: ・Haiku 4.5 が追加 ・Plan ..."
[6]: https://marketplace.visualstudio.com/items?itemName=anthropic.claude-code&utm_source=chatgpt.com "Claude Code for VS Code"
[7]: https://anthropic.com/news/enabling-claude-code-to-work-more-autonomously?utm_source=chatgpt.com "Enabling Claude Code to work more autonomously"
[8]: https://arstechnica.com/ai/2025/10/anthropics-claude-haiku-4-5-matches-mays-frontier-model-at-fraction-of-cost/?utm_source=chatgpt.com "Anthropic's Claude Haiku 4.5 matches May's frontier model ..." --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/practices/2025-10-16-rails-feature-from-one-doc-claude-code-rspec-bdd/" class="astro-dr56dw7m">用 Claude Code 做“面向文档编程”＋ RSpec BDD，把 Rails 新功能几分钟搞定</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-10-16T00:00:00.000Z" class="astro-2oxtfctb"> 2025年10月16日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 用 Claude Code 做“面向文档编程”＋ RSpec BDD，把 Rails 新功能几分钟搞定 -->
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="引言">引言</h2><a class="sl-anchor-link" href="#引言"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言”</span></a></div>
<p>有没有过这种痛：设备一分钟内连着上报好几条状态，数据库一片“信息噪音”？
今天聊个通用实战：<strong>在 Rails 里，把短时间内的重复上报合并为一条“黄金记录”</strong>。</p>
<p>我会用 <strong>Claude Code</strong> 的“面向文档编程”思路起手，从一页文档→自动生成 BDD 场景→RSpec 验证→最小实现→回到文档沉淀。<strong>整套闭环，高速、稳、可追溯</strong>。关于 Claude Code 的定位与最佳实践，你也能在官方文档里找到清晰路线图。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="我们的公共版本需求已脱敏">我们的“公共版本”需求（已脱敏）</h2><a class="sl-anchor-link" href="#我们的公共版本需求已脱敏"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “我们的“公共版本”需求（已脱敏）”</span></a></div>
<p><strong>业务背景（通用）</strong>
一个“智能健身手环”在 1 分钟内可能上报多条心率/状态。为了避免冗余，我们要：</p>
<ul>
<li><strong>在一个可配置的时间窗（默认 1 分钟）内</strong>，按设备和类型，<strong>合并多条为一条</strong>；</li>
<li><strong>以最新记录为准</strong>（同窗内的最后一条）；</li>
<li>写入统一工作记录表，<strong>保证幂等</strong>，并留下合并轨迹（便于审计与回溯）。</li>
</ul>
<p><strong>面向文档编程（Document-Driven）</strong>
把上面的说明放进<strong>一页“功能说明文档”</strong>，它既是产品协议、也是验收标准，后面直接产出 BDD 场景与测试。
这个方法和 <strong>“Specification by Example（示例化规格）/ATDD/BDD”</strong> 一脉相承——<strong>示例就是唯一可信的“真相源”</strong>。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="claude-code--bdd从文档到可执行的验收剧本">Claude Code + BDD：从文档到可执行的“验收剧本”</h2><a class="sl-anchor-link" href="#claude-code--bdd从文档到可执行的验收剧本"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Claude Code + BDD：从文档到可执行的“验收剧本””</span></a></div>
<p><strong>为什么用 Claude Code</strong>
它是“会主动拉取上下文”的<strong>终端内编码副驾</strong>，能把代码、文档、依赖、脚手架串起来，<strong>把想法快速变成项目结构与可运行原型</strong>。官方也给了不少上手心法，比如如何优化上下文、如何组织仓库让智能体“读懂”你的需求。</p>
<p><strong>通用提示词模板（可直接贴给 Claude Code）</strong></p>
<blockquote>
<p>角色：高级 Rails 工程师＋测试教练
目标：实现“设备上报合并”为通用能力
产出：
1）根据下述文档，生成 RSpec（Rails＋Capybara/请求/服务层）BDD 场景与边界用例；
2）给出最小实现骨架（服务对象、查询、事务、幂等策略）；
3）生成回滚与审计日志建议；
4）把所有假设写回文档“开放问题”区；
附：功能说明文档（粘贴上面的“公共版本”需求）</p>
</blockquote>
<p><strong>为什么是 RSpec + BDD</strong>
RSpec 天生面向行为与可读性，<strong>测试也是文档</strong>；Rails 官方测试指南也强调不同层级测试的分工。配合 Capybara/请求规范，既能做 API 行为验收，也能做系统级流。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="验收示例精简版-bdd-思路">验收示例（精简版 BDD 思路）</h2><a class="sl-anchor-link" href="#验收示例精简版-bdd-思路"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “验收示例（精简版 BDD 思路）”</span></a></div>
<p><strong>用户故事</strong></p>
<ul>
<li>作为数据平台，我希望<strong>在 1 分钟内</strong>，同一设备、同一记录类型的多条上报<strong>合并为一条</strong>，以最后一条为准，这样查询清爽、指标准确。</li>
</ul>
<p><strong>关键场景</strong></p>
<ul>
<li><strong>同窗合并</strong>：t=00:10、00:40 上报 → 保存 1 条，内容取 00:40。</li>
<li><strong>跨窗不合并</strong>：t=00:10、01:15 上报 → 保存 2 条。</li>
<li><strong>幂等写入</strong>：重复请求不会产生重复合并结果。</li>
<li><strong>审计可追溯</strong>：保留合并源 ID 与时间窗参数。</li>
</ul>
<blockquote>
<p>小技巧：<strong>把这些示例放进文档/Feature 文件</strong>，让它既是讨论载体也是自动化测试的蓝本。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="rspec-骨架片段示意">RSpec 骨架（片段示意）</h2><a class="sl-anchor-link" href="#rspec-骨架片段示意"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “RSpec 骨架（片段示意）”</span></a></div>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame has-title not-content"><figcaption class="header"><span class="title">spec/services/record_merger_spec.rb</span></figcaption><pre data-language="ruby"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">RSpec</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">describe</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">RecordMerger</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">let(:</span><span style="--0:#82AAFF;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D6DEEB;--1:#403F53"> { </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">device-123</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">let(:</span><span style="--0:#82AAFF;--1:#096E72">window</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D6DEEB;--1:#403F53">    { </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">minute</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">it </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">merges multiple records within window, keeps the latest</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">create(:</span><span style="--0:#82AAFF;--1:#096E72">work_status</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:, </span><span style="--0:#7FDBCA;--1:#096E72">recorded_at</span><span style="--1:#3B61B0"><span style="--0:#82AAFF">: </span><span style="--0:#C5E478">Time</span><span style="--0:#82AAFF">.current </span></span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#82AAFF;--1:#3B61B0"> </span><span style="--0:#F78C6C;--1:#AA0982">40</span><span style="--0:#82AAFF;--1:#3B61B0">.seconds, </span><span style="--0:#7FDBCA;--1:#096E72">payload</span><span style="--0:#82AAFF;--1:#3B61B0">: { </span><span style="--0:#7FDBCA;--1:#096E72">hr</span><span style="--0:#82AAFF;--1:#3B61B0">: </span><span style="--0:#F78C6C;--1:#AA0982">85</span><span style="--0:#82AAFF;--1:#3B61B0"> })</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">create(:</span><span style="--0:#82AAFF;--1:#096E72">work_status</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:, </span><span style="--0:#7FDBCA;--1:#096E72">recorded_at</span><span style="--1:#3B61B0"><span style="--0:#82AAFF">: </span><span style="--0:#C5E478">Time</span><span style="--0:#82AAFF">.current </span></span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#82AAFF;--1:#3B61B0"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#82AAFF;--1:#3B61B0">.seconds, </span><span style="--0:#7FDBCA;--1:#096E72">payload</span><span style="--0:#82AAFF;--1:#3B61B0">: { </span><span style="--0:#7FDBCA;--1:#096E72">hr</span><span style="--0:#82AAFF;--1:#3B61B0">: </span><span style="--0:#F78C6C;--1:#AA0982">92</span><span style="--0:#82AAFF;--1:#3B61B0"> })</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">result</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> described_class.</span><span style="--0:#82AAFF;--1:#3B61B0">call</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">record_type</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#82AAFF;--1:#096E72">work_status</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">window</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">expect(result.payload</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#82AAFF;--1:#096E72">hr</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#82AAFF;--1:#3B61B0">)</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">eq(</span><span style="--0:#F78C6C;--1:#AA0982">92</span><span style="--0:#82AAFF;--1:#3B61B0">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--1:#3B61B0"><span style="--0:#82AAFF">expect(</span><span style="--0:#C5E478">WorkStatus</span><span style="--0:#82AAFF">.where(</span></span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:)</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">count</span><span style="--0:#D6DEEB;--1:#403F53">).</span><span style="--0:#82AAFF;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">eq(</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#82AAFF;--1:#3B61B0">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">end</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">it </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">does not merge across windows</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">do</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">create(:</span><span style="--0:#82AAFF;--1:#096E72">work_status</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:, </span><span style="--0:#7FDBCA;--1:#096E72">recorded_at</span><span style="--1:#3B61B0"><span style="--0:#82AAFF">: </span><span style="--0:#C5E478">Time</span><span style="--0:#82AAFF">.current </span></span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#82AAFF;--1:#3B61B0"> </span><span style="--0:#F78C6C;--1:#AA0982">75</span><span style="--0:#82AAFF;--1:#3B61B0">.seconds)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">create(:</span><span style="--0:#82AAFF;--1:#096E72">work_status</span><span style="--0:#82AAFF;--1:#3B61B0">, </span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:, </span><span style="--0:#7FDBCA;--1:#096E72">recorded_at</span><span style="--1:#3B61B0"><span style="--0:#82AAFF">: </span><span style="--0:#C5E478">Time</span><span style="--0:#82AAFF">.current </span></span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#82AAFF;--1:#3B61B0"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#82AAFF;--1:#3B61B0">.seconds)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">described_class.</span><span style="--0:#82AAFF;--1:#3B61B0">call</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">record_type</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#82AAFF;--1:#096E72">work_status</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#096E72">window</span><span style="--0:#82AAFF;--1:#3B61B0">:</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--1:#3B61B0"><span style="--0:#82AAFF">expect(</span><span style="--0:#C5E478">WorkStatus</span><span style="--0:#82AAFF">.where(</span></span><span style="--0:#7FDBCA;--1:#096E72">device_id</span><span style="--0:#82AAFF;--1:#3B61B0">:)</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">count</span><span style="--0:#D6DEEB;--1:#403F53">).</span><span style="--0:#82AAFF;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">eq(</span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#82AAFF;--1:#3B61B0">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">end</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="RSpec.describe RecordMerger do  let(:device_id) { &#x22;device-123&#x22; }  let(:window)    { 1.minute }  it &#x22;merges multiple records within window, keeps the latest&#x22; do    create(:work_status, device_id:, recorded_at: Time.current - 40.seconds, payload: { hr: 85 })    create(:work_status, device_id:, recorded_at: Time.current - 10.seconds, payload: { hr: 92 })    result = described_class.call(device_id:, record_type: :work_status, window:)    expect(result.payload[:hr]).to eq(92)    expect(WorkStatus.where(device_id:).count).to eq(1)  end  it &#x22;does not merge across windows&#x22; do    create(:work_status, device_id:, recorded_at: Time.current - 75.seconds)    create(:work_status, device_id:, recorded_at: Time.current - 10.seconds)    described_class.call(device_id:, record_type: :work_status, window:)    expect(WorkStatus.where(device_id:).count).to eq(2)  endend"><div></div></button></div></figure></div>
<blockquote>
<p>规范参考：RSpec/Capybara 的特性测试写法与依赖约束。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="rails-最小实现清单思路导图">Rails 最小实现清单（思路导图）</h2><a class="sl-anchor-link" href="#rails-最小实现清单思路导图"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Rails 最小实现清单（思路导图）”</span></a></div>
<ul>
<li>
<p><strong>入口</strong>：服务对象 <code dir="auto">RecordMerger.call(device_id:, record_type:, window:)</code></p>
</li>
<li>
<p><strong>查询</strong>：同设备＋同类型＋<code dir="auto">recorded_at</code> 落在“自然时间窗”的记录</p>
</li>
<li>
<p><strong>合并策略</strong>：</p>
<ul>
<li>以 <code dir="auto">recorded_at</code> 最大的那条为主数据</li>
<li>其余作为“来源集合”写入 <code dir="auto">merged_from: [ids...]</code></li>
</ul>
</li>
<li>
<p><strong>幂等与并发</strong>：</p>
<ul>
<li>按设备＋窗口做<strong>应用级互斥</strong>（如 <code dir="auto">with_advisory_lock</code>）</li>
<li>关键字段加<strong>唯一索引</strong>（设备＋窗口起点，或幂等键）</li>
</ul>
</li>
<li>
<p><strong>审计</strong>：</p>
<ul>
<li>记录 <code dir="auto">merge_window_sec</code>、<code dir="auto">merged_count</code>、<code dir="auto">merged_from</code></li>
<li>重要场景写 <strong>event log</strong> 用于追踪与回放</li>
</ul>
</li>
</ul>
<blockquote>
<p>想做系统级 E2E，直接加 <strong>系统测试/请求测试</strong> 覆盖接口输入输出；Rails 官方指南对层级测试有清晰边界。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="让-ai-真正加速工程化用法清单">让 AI 真正加速：工程化用法清单</h2><a class="sl-anchor-link" href="#让-ai-真正加速工程化用法清单"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “让 AI 真正加速：工程化用法清单”</span></a></div>
<ul>
<li><strong>把文档放在仓库根目录</strong>，命名统一，便于 Claude Code自动抓取上下文。</li>
<li><strong>一次只推进一个“微目标”</strong>：先让“同窗合并”绿灯，再扩展幂等、审计。</li>
<li><strong>频繁回写文档</strong>：新增边界条件、发现的陷阱都要沉淀到“开放问题/决策记录”。</li>
<li><strong>备份与里程碑</strong>：长会话偶有上下文压缩，里程碑时<strong>切分 Session＋打 Tag</strong>，并做好本地快照。行业经验也提醒我们：<strong>AI 是强力电动工具，你仍然是工匠</strong>。</li>
</ul>
<blockquote>
<p>行业侧反馈也在强化这条路：企业版全面引入 Claude Code，长上下文模型持续增强，大型代码库分析更稳。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="交付物长这样团队落地模板">交付物长这样（团队落地模板）</h2><a class="sl-anchor-link" href="#交付物长这样团队落地模板"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “交付物长这样（团队落地模板）”</span></a></div>
<p>1）<strong>一页功能文档</strong>（背景、目标、范围、术语、示例、开放问题）
2）<strong>RSpec 套件</strong>（服务层＋请求/系统测试，含边界与回归）
3）<strong>服务对象 + 索引/锁</strong>（最小可用）
4）<strong>事件日志与仪表盘</strong>（合并命中率、节省存储、查询耗时变化）</p>
<p><strong>价值可量化</strong>：文档就是规范；测试就是验收；日志就是运营复盘。
<strong>迭代更丝滑</strong>：新增“2 分钟窗”或“按类型分窗”——只需加示例 → 跑测试 → 小改实现。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p><strong>面向文档编程 + BDD</strong>，不是“多写文档”，而是<strong>把文档变成可执行的产品契约</strong>。
配合 <strong>Claude Code</strong>，你把“想法→测试→实现→复盘”这条链路，按小时计。团队协作更顺、交付更稳，读者看代码就像读故事。</p>
<p>**你在团队里会怎样落地这个合并能力？**有没有更猛的幂等键设计？欢迎在评论区聊聊。</p>
<!-- 
---

## 推荐标题（3 组 × 7 语种＋slug）

1. **中文简体**：用 Claude Code＋RSpec BDD，把 Rails 新功能“一页文档”跑通
   **English**: Ship Rails features from one page of docs with Claude Code + RSpec BDD
   **繁體**：用 Claude Code＋RSpec BDD，從一頁文件跑通 Rails 新功能
   **日本語**：Claude Code＋RSpec BDDで、1枚ドキュメントからRails機能を出荷
   **Français** : Expédier des features Rails depuis une page de specs avec Claude Code + RSpec BDD
   **Español**: Entrega features de Rails desde una página con Claude Code + RSpec BDD
   **Português**: Entregue features Rails a partir de um documento com Claude Code + RSpec BDD
   **slug**: `rails-feature-from-one-doc-claude-code-rspec-bdd`

2. **中文简体**：面向文档编程实战：1 分钟内合并设备上报，用 RSpec 说人话
   **English**: Document-Driven Dev in practice: merge bursty device events with RSpec
   **繁體**：面向文件開發實戰：用 RSpec 合併裝置短時上報
   **日本語**：ドキュメント駆動の実践：RSpecで短時間のデバイス送信を集約
   **Français** : Doc-Driven Dev : fusionner les événements IoT avec RSpec
   **Español**: Desarrollo guiado por documentos: fusiona eventos IoT con RSpec
   **Português**: Dev guiado por documentação: mescle eventos IoT com RSpec
   **slug**: `doc-driven-rails-iot-merge-with-rspec`

3. **中文简体**：别再多写一行废代码：用示例做规格，用测试做文档
   **English**: No more waste: specs by example, tests as docs
   **繁體**：不再多寫一行廢程式：示例即規格、測試即文件
   **日本語**：無駄ゼロ：例で仕様、テストがドキュメント
   **Français** : Zéro gâchis : spécifier par l’exemple, tests = docs
   **Español**: Cero derroche: especifica con ejemplos, pruebas como docs
   **Português**: Zero desperdício: exemplos como especificação, testes como docs
   **slug**: `spec-by-example-tests-as-docs`

---

## 配图提示词（插画风｜2:1｜英文，无中文）

**封面图**

* Prompt：“Illustration of a developer turning a one-page document into running code on a terminal, gentle gradients, clean lines, modern workspace, AI assistant glow near terminal, widescreen 2:1 composition, no text.”

**关键章节 1（文档→测试）**

* Prompt：“Storyboard-style illustration: a specification page morphs into green passing test badges, terminal window with RSpec checkmarks, minimalistic, 2:1, no text.”

**关键章节 2（合并逻辑）**

* Prompt：“Two overlapping timelines of device events blending into a single consolidated record card, arrows showing merge flow, soft tech colors, 2:1, no text.”

**关键章节 3（工程化与可观测）**

* Prompt：“Dashboard with audit logs and metrics (merge hits, storage saved), abstract charts and gauges, terminal nearby, 2:1, no text.”

---

## 朋友圈/评论区推荐语（3 条）

1. “把需求写成一页文档，丢给 Claude Code＋RSpec，一下午交付一个稳功能。真香。”
2. “测试就是文档，回归就是验收。合并上报这招，数据库立马清爽。”
3. “AI 是电动工具，但方向要你来定。这篇把路线、用法、坑点都讲清了，收藏不亏。”

---

要不要我把**完整的 RSpec 场景 + 服务对象骨架**也写出来，顺手生成一个**README 模板**给你直接用？你觉得呢？

（参考资料：Claude Code 官方说明与最佳实践；Rails 测试指南；RSpec/Capybara 文档；SBE/Feature 文件方法论。）

[1]: https://docs.claude.com/en/docs/claude-code/overview?utm_source=chatgpt.com "Claude Code overview"
[2]: https://en.wikipedia.org/wiki/Specification_by_example?utm_source=chatgpt.com "Specification by example"
[3]: https://rspec.info/?utm_source=chatgpt.com "RSpec: Behaviour Driven Development for Ruby"
[4]: https://www.modernanalyst.com/Resources/Articles/tabid/115/ID/3871/BDD-An-introduction-to-feature-files.aspx?utm_source=chatgpt.com "BDD – An introduction to feature files"
[5]: https://rspec.info/features/6-0/rspec-rails/feature-specs/feature-spec/?utm_source=chatgpt.com "Feature specs"
[6]: https://guides.rubyonrails.org/testing.html?utm_source=chatgpt.com "Testing Rails Applications"
[7]: https://www.businessinsider.com/tech-memo-claude-code-assistant-anthropic-aws-review-2025-8?utm_source=chatgpt.com "Claude Code turned a 3-week project into a 2-day task &mdash; but nearly broke it"
[8]: https://www.techradar.com/pro/anthropic-is-adding-claude-code-to-business-plans-so-now-all-your-workers-can-enjoy-a-major-ai-boost?utm_source=chatgpt.com "Anthropic is adding Claude Code to business plans - so now all your workers can enjoy a major AI boost" --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/flutter/" class="astro-sg3lsd66">Flutter</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/android/" class="astro-sg3lsd66">Android</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/apk/" class="astro-sg3lsd66">APK</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/finance/us-market/2025-10-15-oracle-amd-ai-collaboration-stock-outlook/" class="astro-dr56dw7m">Oracle携手AMD：AI时代股价走势的展望与风险</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-10-15T00:00:00.000Z" class="astro-2oxtfctb"> 2025年10月15日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # Oracle携手AMD：AI时代股价走势的展望与风险 -->
<div class="sl-heading-wrapper level-h2"><h2 id="背景ai算力需求催生巨头合作">背景：AI算力需求催生巨头合作</h2><a class="sl-anchor-link" href="#背景ai算力需求催生巨头合作"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “背景：AI算力需求催生巨头合作”</span></a></div>
<p>10月14日，Oracle（甲骨文）和AMD宣布将联手构建超大规模AI超级集群：Oracle云基础设施（OCI）将在2026年第三季度开始部署50,000块AMD Instinct MI450 GPU，并在2027年及以后继续扩容。这将使Oracle成为首个采用AMD最新GPU、大规模对外提供AI算力的超大规模云厂商。据发布会信息，每台MI450 GPU配备高达432GB的HBM4显存，内存带宽达20TB/s，使其可在全部显存中容纳比前代大50%的模型。</p>
<p>Oracle此举意在满足下一代AI模型对算力的爆炸性需求——“随着AI模型规模超越现有集群极限，大规模AI算力需求正加速增长”。通过与AMD多年来的合作（早在2024年OCI已提供AMD MI300X等GPU服务），Oracle希望借助开放架构和最新硬件，为企业客户提供高性能、可扩展的AI训练和推理平台。</p>
<p>这一合作不仅是技术层面的里程碑，更被市场视为AI浪潮下双方抱团抢占先机的战略动作。Oracle云业务近年来将AI视为增长引擎，CEO Safra Catz预期本财年Oracle云基础设施销售额同比激增77%至180亿美元，并预计未来四年这一数字可能攀升至1,440亿美元之巨。正是在这样的”AI追赶赛”背景下，Oracle选择与AMD加深绑定，提前布局下一代AI基础设施。这背后既有巨大的机遇，也伴随着相应的挑战和风险，需要深入分析。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="gpu市场格局英伟达独大amd奋起直追">GPU市场格局：英伟达独大，AMD奋起直追</h2><a class="sl-anchor-link" href="#gpu市场格局英伟达独大amd奋起直追"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “GPU市场格局：英伟达独大，AMD奋起直追”</span></a></div>
<p>当前AI加速芯片市场中，英伟达（Nvidia）占据压倒性主导地位，提供了全球90%以上高性能AI GPU。谷歌、亚马逊、微软等主要云服务商的AI训练也几乎清一色采用英伟达GPU及CUDA软件生态。面对英伟达的垄断地位，业界开始寻求第二供应源和开放替代方案：这为AMD等竞争对手带来突破契机。</p>
<p>AMD近年来大力投入数据中心GPU研发，其Instinct系列（MI250、MI300X等）已在部分超算和云端试水，但生态和性能曾与英伟达存在差距。此次即将推出的MI450系列GPU在内存容量和带宽上有重大升级，配合开放的ROCm软件栈，旨在为客户提供对抗英伟达H100/H200的高性能且更开放的选择。</p>
<p>除了AMD，其他芯片玩家也在觊觎AI算力市场：**博通（Broadcom）**近期与OpenAI宣布合作开发定制AI加速器，受此消息刺激博通股价单日大涨近10%。英特尔（Intel）则通过收购Habana推出Gaudi系列AI芯片，并计划于未来推出新架构GPU，主打性价比优势来挑战英伟达。在OpenAI等AI巨头频繁牵手芯片厂商的背景下，AI硬件正呈现多元化竞争局面。</p>
<p>值得一提的是，价格和供应也是影响竞争格局的重要因素。目前一块英伟达旗舰H100 GPU市场价高达3-4万美元，曾因供不应求甚至被炒到4万美元以上。AMD据报道正以更具竞争力的价格向大客户供应MI300系列（约每片1万美元左右）。Intel的Gaudi芯片也打出**“价格约为英伟达GPU一半”的卖点。大型云厂商出于成本考虑，有动力引入价格更低的替代芯片。这意味着AMD有机会以性价比打开市场，但也可能面临利润率的压力**。</p>
<p>总体来看，在GPU赛道上，短期内英伟达依然独占鳌头，但AMD正借助技术进步和产业联盟奋起直追，其市场地位有望在未来几年得到提升。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="云服务竞争oracle的机遇与挑战">云服务竞争：Oracle的机遇与挑战</h2><a class="sl-anchor-link" href="#云服务竞争oracle的机遇与挑战"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “云服务竞争：Oracle的机遇与挑战”</span></a></div>
<p>在云计算领域，Oracle属于后来者，相较AWS（亚马逊）、Azure（微软）和GCP（谷歌）三大巨头的市占率仍有不小差距。然而，AI浪潮为Oracle提供了一次弯道超车的良机：许多企业客户对生成式AI、大模型训练等需求激增，却苦于主流云的GPU资源供给紧张、成本高昂或单一来源受限。在此背景下，Oracle大胆投资AMD GPU超级集群，意在差异化竞争：一方面，以开放标准和更优价格性能比吸引客户；另一方面，争取”不想把鸡蛋放在一家篮子里”的多云策略客户。</p>
<p>Oracle的这一**“All in AI”**策略已初见成效。2023年以来，Oracle多次签下超大订单：截至今年9月，Oracle已拿下4份数十亿美元级别的AI云合同。市场更传闻OpenAI与Oracle签署了一份总额高达3000亿美元的五年云服务协议，据称将共建4.5GW数据中心算力，是有史以来最大的云合同之一。虽然该消息未有正式文件披露（仍属”据报道”状态），但已令投资者对Oracle前景异常振奋——今年9月传出这一消息时，Oracle股价盘后飙涨25%。</p>
<p>即便抛开个别超大单，Oracle云业务整体也因AI需求而步入高增长轨道：本财年Oracle已将云基础设施增长预期从70%上调至77%。Oracle创始人Larry Ellison更表示”AI改变一切”，预计AI相关服务将**“显著提升未来数年云需求”。在应用层，Oracle计划推出”AI数据库”**等创新产品，将OpenAI的ChatGPT、Anthropic的Claude、谷歌Gemini等模型直接集成到Oracle数据库，让企业用户方便调用。这种软硬件结合的AI解决方案是Oracle的传统优势领域（其企业软件客户基础庞大），有望与底层算力建设形成协同效应。</p>
<p>然而，Oracle也面临不小的挑战。首先，三大云巨头并未停下脚步：AWS自研Trainium、Inferentia芯片并继续大量采购英伟达GPU；Azure绑定OpenAI并可能寻求AMD等合作；谷歌有自家TPU和云端英伟达方案。巨头们资金雄厚、生态完善，Oracle要撼动其领先地位并不容易。其次，大举采购50,000块GPU意味着巨额资本开支和技术风险：如果未来AI需求增速放缓或客户不买账，Oracle可能面对产能过剩的窘境。</p>
<p>因此，可以说Oracle在AI云上的进击是一场高风险高回报的豪赌：成功的话将大幅提升其云版图和股价；反之则可能因为投入沉重而业绩承压。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="短期6个月展望热度提升与消化整固">短期（6个月）展望：热度提升与消化整固</h2><a class="sl-anchor-link" href="#短期6个月展望热度提升与消化整固"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “短期（6个月）展望：热度提升与消化整固”</span></a></div>
<p>在未来6个月内（至2026年上半年），Oracle和AMD的股价走势很大程度上取决于市场情绪和短期业绩表现。目前两家公司股价都已因AI题材大幅上涨：截至10月中旬，AMD年内涨幅约85%，逼近历史高点；Oracle年内上涨约80%。尤其是10月初AMD宣布与OpenAI合作后，股价单日暴涨24%，创近九年来最大单日涨幅，市值飙增逾633亿美元。这表明投资者对AMD进军AI领域的期望值骤然提升。</p>
<p>短期来看，这种情绪驱动的上涨需要时间消化。一方面，Oracle-AMD合作等利好已经部分反映在股价中，市场可能进入观望期，等待实际业绩验证。另一方面，短期宏观因素（如利率、经济数据）仍可能带来波动。</p>
<p>未来两个季度，AMD的财报若显示数据中心部门业绩提振（例如MI300X销量增长），可能进一步强化AI故事，对股价形成支撑。但需注意，在MI450真正量产交付前，AMD营收未必有大幅提升，股价主要靠预期驱动，短线波动性加大。</p>
<p>总之，未来半年两家公司股价大概率在高位震荡，热点消息主导短期走势：新的合作宣布、产品发布或行业峰会讲话都可能引发波动。而基本面上尚未有重大业绩兑现前，投资者情绪将反复拉锯。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="中期1年展望兑现合作成果为股价续航">中期（1年）展望：兑现合作成果为股价续航</h2><a class="sl-anchor-link" href="#中期1年展望兑现合作成果为股价续航"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “中期（1年）展望：兑现合作成果为股价续航”</span></a></div>
<p>展望一年后（至2026年下半年），Oracle和AMD的合作将进入初步收获期。2026年下半年正是双方承诺的AI超级集群上线时间节点。如果一切顺利，Oracle将在Q3 2026正式向客户提供基于AMD MI450 GPU的大规模算力服务。这意味着双方前期投入开始转化为实际营收：</p>
<p><strong>对AMD而言</strong>：2026年下半年开始交付的50,000块MI450 GPU，将带来可观的销售收入。同时，AMD与OpenAI的合作也将进入执行阶段——根据协议OpenAI将在2026年下半年启动首批1GW规模（约数千块）AMD GPU部署，并在随后几年扩展至6GW。AMD管理层预计，这些AI大型订单将在未来几年为公司贡献”数百亿美元新增营收”，并显著增厚每股盈利。</p>
<p>如果届时AMD能够顺利量产交付，兑现技术承诺，中期业绩有望出现跳变式增长。华尔街分析师也普遍看好AMD在AI领域的前景，在OpenAI合作宣布后纷纷上调目标价（部分由原先200美元提升至300美元）。因此到2026年底，随着产品落地和营收显现，AMD股价有望在高位基础上进一步攀升。</p>
<p><strong>对Oracle而言</strong>：2026年下半年Oracle的AI云算力规模将大幅跃升，不仅50,000块MI450集群投入运营，Oracle自身在2024-25年推出的MI300X/MI355X云服务也会更加成熟。客户落地方面，届时或能看到Oracle签下的一些AI大单开始贡献收入。如果传闻中的OpenAI巨额合同属实，2027财年起Oracle云业绩将迎来飞跃，中期股价可能因预期提前反映。</p>
<p>中期主要风险在于执行和竞争：AMD的新品可能遭遇研发或生产延迟、性能不及预期等问题；Oracle面临的市场竞争可能加剧，导致客户拓展不如预期。总体而言，2026年前后将是Oracle证明”押注AI云”战略成败的关键窗口。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="长期3年展望行业格局重塑与不确定性">长期（3年）展望：行业格局重塑与不确定性</h2><a class="sl-anchor-link" href="#长期3年展望行业格局重塑与不确定性"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “长期（3年）展望：行业格局重塑与不确定性”</span></a></div>
<p>拉长到三年后的2028年左右，AI、GPU和云计算市场或将出现新的格局。在这一时间尺度上，Oracle与AMD的前景既充满巨大机遇，也伴随不少不确定性：</p>
<p><strong>AMD长期机遇</strong>：如果一系列战略合作顺利推进，到2027-2028年AMD有望跻身AI芯片市场主要玩家，市场份额显著提升。AMD的数据中心GPU业务规模可能从目前的边缘地位成长为数十亿美元级别，成为公司新的增长支柱。更乐观的情形下，AMD或许能拿下AI加速器市场20-30%以上的份额，从英伟达手中争得一席之地。</p>
<p><strong>AMD长期风险</strong>：最大的挑战仍是技术和竞争：AI加速芯片领域每年迭代快速，英伟达预计在2025-2026年推出的Blackwell GPU、2030年前可能实现GPU+CPU+光互连的重大创新，技术领先地位并未拱手相让。AMD必须持续高额研发投入，在架构、软件生态上追平甚至超越对手，难度不小。</p>
<p><strong>Oracle长期机遇</strong>：如果Oracle成功抓住这波机遇，到2028年其云业务规模和行业口碑都有望实现飞跃式提升。一个理想情形是：Oracle凭借与OpenAI等超级客户的深度合作，成为AI云算力的顶级提供商之一，市场份额较目前大幅提高。</p>
<p><strong>Oracle长期风险</strong>：市场竞争演化——三年后AI云领域可能更加两极分化，要么形成寡头垄断，要么进入红海价格战。如果AWS、Azure在AI算力上进一步强化，Oracle可能仍难撼动其主导地位。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="投资机遇与风险总结">投资机遇与风险总结</h2><a class="sl-anchor-link" href="#投资机遇与风险总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “投资机遇与风险总结”</span></a></div>
<p><strong>主要机遇</strong>：</p>
<ol>
<li>AI需求爆发带来的广阔增长空间</li>
<li>重磅合作推动市占率提升</li>
<li>多元化生态崛起的契机</li>
<li>双方股票基本面向好</li>
</ol>
<p><strong>主要风险</strong>：</p>
<ol>
<li>激烈的竞争风险</li>
<li>执行风险</li>
<li>宏观和政策风险</li>
<li>泡沫风险</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="结语展望未来股价走势">结语：展望未来股价走势</h2><a class="sl-anchor-link" href="#结语展望未来股价走势"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语：展望未来股价走势”</span></a></div>
<p>综合以上分析，Oracle和AMD在AI时代的前景可谓机遇与风险并存。两家公司携手布局下一代AI基础设施，抓住了当前行业的一股重大趋势：算力需求爆炸式增长、客户寻求多元选择。这一战略有可能在未来数年为双方带来跨越式的业绩增长和市值提升。</p>
<p>从6个月的短期看，二级市场对AI题材的热情仍是推动股价的主要动力，但波动也在所难免；1年左右的中期，合作项目开始落地将成为验证预期的关键，股价表现取决于双方能否兑现承诺、巩固市场地位；放眼3年长期，如果AI产业保持高速发展、Oracle与AMD双双成功卡位，那么其股价有潜力继续跑赢大盘，实现可观涨幅。</p>
<p>作为投资者，应密切关注未来双方在技术研发、客户拓展以及行业竞争动态方面的进展。在AI大潮中，Oracle和AMD已然站上风口，下一步是展翅高飞，还是迎风波折，有赖于它们在这场技术变革竞赛中的表现。</p>
<p><strong>注：本报告基于公开信息分析，不构成投资建议，投资有风险，入市需谨慎。</strong></p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/finance/" class="astro-sg3lsd66">Finance</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/us-market/" class="astro-sg3lsd66">US Market</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/investment/" class="astro-sg3lsd66">Investment</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/oracle/" class="astro-sg3lsd66">Oracle</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/amd/" class="astro-sg3lsd66">AMD</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ai/" class="astro-sg3lsd66">AI</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/gpu/" class="astro-sg3lsd66">GPU</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/cloud-computing/" class="astro-sg3lsd66">Cloud Computing</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/finance/us-market/2025-10-15-jpmorgan-us-security-index-analysis/" class="astro-dr56dw7m">解密&quot;摩根大通美国安全指数&quot;：39家公司板块前景、机会与风险</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-10-15T00:00:00.000Z" class="astro-2oxtfctb"> 2025年10月15日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 解密"大摩美国安全指数"：39家公司板块前景、机会与风险 -->
<p>美国与中国的博弈、全球能源转型和供应链重构，使得一些关乎国家安全的关键行业受到前所未有的关注。近期**摩根士丹利（大摩）**提出的”美国安全指数”精选了39家上市公司，覆盖核能铀矿、电池储能、稀土战略金属和锂资源四大板块。据称这些公司横跨能源安全、关键矿产供应链、国防科技等领域，被视为美国推动本土资源与科技自主的缩影。本文将系统分析这四大板块的行业背景、国家战略角色、供需现状和未来前景，并结合宏观环境和政策趋势，从投资角度探讨其机会与风险。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="核能与铀矿能源安全基石">核能与铀矿：能源安全基石</h2><a class="sl-anchor-link" href="#核能与铀矿能源安全基石"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “核能与铀矿：能源安全基石”</span></a></div>
<p><strong>行业背景与战略角色：</strong> 核能作为清洁基载能源，在美国电力结构中占比约20%。铀是核电站与核武的燃料，对国家能源和国防安全至关重要。然而美国的铀供应长期依赖进口，2023年美国核电站所用铀浓缩料有99%依靠进口，仅0.05百万磅来自国内生产。过去十年由于价格低迷，美国铀矿开采几近停滞，造成对海外供应（特别是俄罗斯、哈萨克斯坦等）产生高度依赖。地缘紧张下，这种局面被视为战略隐患。2024年美国立法禁止自俄进口浓缩铀（2024年8月起生效，2028年前有限豁免），以摆脱对”不可靠供应商”的依赖。正如美国参议院能源委员会所言，美国目前缺乏完整铀燃料生产能力，过度依赖俄罗斯的铀供应已对能源安全构成威胁。</p>
<p><strong>供需现状与发展前景：</strong> 全球核能正在出现复苏苗头，多个国家重新投资新一代核电站，推动铀需求上升。经历多年供应过剩后，铀市场近年供需趋紧，价格回升。美国政府近年投入巨资重振核燃料产业——能源部获得了27亿美元拨款用于重启国内铀提炼和浓缩设施。美国还成立战略铀储备，直接采购本土矿商产品。除了传统压水堆领域，小型模块化反应堆（SMR）等先进核技术也在兴起，未来有望扩大铀需求。美国能源部已与初创核企签约采购高浓缩铀燃料（HALEU），并支持离心浓缩企业如Centrus Energy (LEU)建设产能。在此背景下，铀矿企业迎来重要机遇：本土铀产量已开始恢复性增长，2024年Q3全美铀产量达12万磅，比上一季度增加24%。未来随着国内矿山重启和新项目上线，美国有望部分削减对进口的依赖。不过短期看，美国每年3200万磅的铀需求量巨大，在进口禁令和地缘风险下，如何弥补俄产铀空缺将是挑战（可通过加大从加拿大、澳大利亚等盟友进口并提速本土项目来缓解）。</p>
<p><strong>代表企业与投资分析：</strong> 摩根士丹利指数所含核能铀矿公司包括美国能源燃料公司Energy Fuels (UUUU)、加拿大铀业巨头Cameco (CCJ)、铀矿开发商NexGen Energy (NXE)等。这些企业直接受益于铀价上涨和美国政策扶持。Cameco作为全球最大铀供应商之一，资源雄厚且与美国和盟国关系紧密，是相对稳健的行业龙头。Energy Fuels等美国本土矿商则在政策利好下重启产能，并拓展稀土提取等新业务，属于高增长潜力股。投资者需注意铀矿板块的周期性和波动性：铀价和核电发展政策是关键驱动。在美国推动核燃料自主的大趋势下，中长期基本面向好。但短期风险在于：若核电复兴不及预期或宏观衰退压制能源需求，铀价可能回调；另外小型矿企普遍尚未盈利、现金流脆弱，炒作游资可能放大股价波动。建议关注拥有产量和合同在手的龙头（如Cameco）以降低风险，而对Exploration类纯概念股保持谨慎，控制仓位。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="电池与储能能源转型动力">电池与储能：能源转型动力</h2><a class="sl-anchor-link" href="#电池与储能能源转型动力"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “电池与储能：能源转型动力”</span></a></div>
<p><strong>行业背景与战略角色：</strong> 电池是新能源汽车和可再生能源发展的核心。随着全球电动汽车（EV）销量屡创新高——预计2025年全球电动车销量将超2000万辆，占汽车销量的四分之一——动力电池需求近年呈指数级增长。同时，为了平衡风能太阳能等间歇性能源，大规模电网储能市场迅速兴起，对电池技术提出巨大需求。当前全球电池产业由中日韩主导，中国企业在锂电池产能和技术上占据压倒性优势。美国意识到这一供应链受制于人的软肋，将电池制造提升到战略高度：2022年通过的《通胀削减法案（IRA）》提供丰厚税收抵扣，鼓励在美建设电池工厂和材料设施。结果是美国本土电池投资大爆发——截至2023年中，已宣布的美国电池产能到2030年将达1.2太瓦时（TWh），比IRA前增加了近70%。这意味着美国有望从目前不到全球10%的电池产量份额大幅提升，从而降低对亚洲供应的依赖。</p>
<p><strong>供需现状与发展前景：</strong> 据贝恩咨询报告预测，全球电池需求将从2023年的约1000 GWh猛增至2030年的4100 GWh，增幅达4倍。驱动力除了乘用车电气化，还有商用车、电动工具以及电网侧储能等多元化应用。国际能源署（IEA）估计目前全球用于EV和储能的电池年产值约1200亿美元，2030年有望接近5000亿美元。美国在需求侧同样增长迅猛：不仅特斯拉等领军车企带动锂电池出货，数据中心等新兴领域也成为储能生力军。值得一提的是，几乎所有未来电力需求增量（预计95%）将靠光伏和风电满足，这离不开大规模电池储能来平抑波动。Fastmarkets分析指出，2017年以来全球数据中心用电每年增长12%，这些中心正大规模安装电池备援，预计到2030年仅数据中心就可能占据三分之一储能市场需求。美国各州新能源项目蓬勃推进，储能装机节节攀升。在供应端，IRA法案提供每千瓦时电池35美元的生产补贴，吸引LG、松下等外资合资建厂，以及本土初创公司扩产。然而短期行业也面临挑战：电池产业技术迭代快、资本开支大，部分初创企业量产进度落后；2023年由于利率上升和电动车补贴政策不确定，一些计划中的电池工厂出现延期甚至取消。总体来看，中长期需求高增长确定，但供给端可能阶段性过剩或产能利用率不均，需警惕产能过热导致的竞争加剧。</p>
<p><strong>代表企业与投资分析：</strong> 电池与储能板块涵盖从整车到材料到储能解决方案的广泛公司。代表性公司包括电动车龙头特斯拉（TSLA），新兴储能企业Eos能源企业（EOSE）、电池制造商Microvast微容（MVST），以及电池材料回收及提炼公司American Battery Technology (ABAT)等。特斯拉作为行业领军，不仅生产电动车，也在美国本土建造超级工厂自制电池（4680电芯），并涉足家庭与电网储能业务，其在美国电池版图中地位举足轻重。不过特斯拉当前市值高企，投资者需评估其估值是否透支未来增长。EOSE主营创新锌基电池储能系统，受益于美国电网储能爆发式增长，且已获得能源部贷款支持，成长空间大但仍处于亏损阶段，属于高风险高弹性品种。Microvast原本业务遍及中美，在美建厂拿到联邦补助，但因早期中国背景一度被取消资助，反映出地缘因素对企业的影响。整体而言，该板块公司享有明确政策红利：IRA补贴降低生产成本超过30%，还有电动车购车补贴要求电池材料本地化等刺激需求。长期成长性方面，看好拥有技术和规模优势的企业（如特斯拉）以及拿下大额订单、产能逐步释放的二线厂商。但需要警惕炒作风险和估值泡沫：部分储能概念股因故事动人股价曾被爆炒，而商业化落地可能需要多年。投资者在布局时应区分稳健龙头与早期概念：高波动成长股（如大部分电池初创）潜力大但不确定性高，稳健布局股（如已有盈利的材料龙头）增长相对温和但胜在确定性。组合中可根据风险偏好适度平衡两者比例。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="稀土与战略金属工业维生素与国防命脉">稀土与战略金属：工业维生素与国防命脉</h2><a class="sl-anchor-link" href="#稀土与战略金属工业维生素与国防命脉"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “稀土与战略金属：工业维生素与国防命脉”</span></a></div>
<p><strong>行业背景与战略角色：</strong> “稀土”指17种元素，被称为现代工业的维生素，广泛用于高性能永磁体（电动车马达、风电涡轮）、航空电子、导弹制导、芯片制造等。战略金属则包括锑、钴、钛、钨等对国防或高科技关键的材料。美国国防部多次警告，稀土等关键矿物对尖端武器系统不可或缺，如F-35战机、潜艇、导弹和无人机所需部件均离不开稀土。但现实是，美国对这些矿物高度依赖中国：中国开采了全球至少60%的稀土并加工了约90%的稀土产品；2020-2023年美国进口的稀土化合物和金属有70%来自中国。此外，中国还是锑（用于防弹合金、弹药引信等）、石墨（电池负极材料）、钨（穿甲弹和刀具）等诸多关键矿产的主要供应者。这种高度集中供应链被视为美国国家安全的软肋。今年（2025年）中国进一步收紧稀土及稀土磁体出口管制，要求含微量重稀土的产品出口需申报用途，引发各国神经紧绷。分析人士指出，北京此举意在提醒华府：中国愿意将稀土供应作为博弈筹码。美国对此强烈反应，不仅官员强调减少对华依赖”已刻不容缓”，还祭出关税威胁和加大资源投资作为反制。</p>
<p><strong>供需现状与发展前景：</strong> 全球稀土需求近年来随电动车和清洁能源激增（如每辆电动车和风机均需用到大量永磁稀土）。但供应端短期内增量有限，主要矿山仍集中在中国和少数国家。若主要出口国实施限制，可能出现供应缺口和价格剧烈波动。美国政府已在多条战线行动：五角大楼斥资扶持本土项目，例如资助MP材料公司在美建设稀土分离厂，资助澳大利亚Lynas公司在德州建重稀土加工设施等。此外还动用《国防生产法》资金支持锂、石墨、镍、锑等矿的开发和冶炼。2024年8月中国限制锑品出口后，美国国防物流局迅速扩大采购计划，拟以2.45亿美元向美国锑业公司（UAMY）采购锑金属，此规模约相当于美国一年进口量的四分之三。同时，战略储备扩容势在必行：2025年10月报道称五角大楼启动100亿美元级别的关键矿物储备计划，以减少对华依赖。该计划不仅囊括稀土，也扩展到钴、钽、铟等此前储备较少的金属。中长期看，全球稀土供需格局或逐步走向多元：澳大利亚、加拿大等国有多个新矿项目在2025-2030年投产；深海采矿（如The Metals Company计划从太平洋结核提取镍钴）也可能贡献新供给。不过新项目普遍面临环保审批难、成本高的问题，一旦商品价格回落，投资动力或不足。因此短期内中国地位难以撼动，西方国家只能通过合作盟友、政府扶持来部分填补缺口。地缘政治风险将长期存在——正如专家所言，“美中经济关系无法简单脱钩，双方仍相互交织”。这意味着稀土等领域供应链重构将是一个曲折拉锯的过程。</p>
<p><strong>代表企业与投资分析：</strong> 稀土与战略金属板块公司多属于资源开采或材料加工领域，包括MP Materials（MP）、USA Rare Earth（USAR）、美国锑业（UAMY）、Ivanhoe Electric（IE）等。MP Materials拥有美国唯一在产稀土矿（加州山口矿），是美国稀土振兴的核心企业，已与通用汽车合作建设磁体厂并获得国防部资助，在整个板块中具备相对成熟的营收和盈利，是中长期具有成长性的标的。USA Rare Earth掌控着德州Round Top稀土矿藏（含多种重稀土和锂等），因其资源战略价值在近期成功上市并受到市场追捧，但公司尚未正式投产，属于政策红利受益者和概念炒作集中点，股价波动剧烈需要注意估值泡沫风险。美国锑业则是北美少有的锑生产商，本身规模小但因拿下五角大楼合同而地位特殊。锑作为重要军工原料，未来年需求增长有限但政府可能维持采购保障，其股价更多受政策消息驱动。总体来说，该板块企业大多处于成长初期或复苏阶段，基本面存在较大不确定性，炒作风险相对较高。投资者应关注哪些企业真正能够兑现产能、签署长期供货协议。一些公司可能借国家安全主题获得超额估值，需防范”一哄而起、一哄而散”的情况。建议优先选择已有产出或确定性项目的公司，并密切留意政策动态：因为政策风向直接决定这些公司的命运，如禁令、关税或政府合约等都可能使个股短期剧烈波动。此外，在整个资源类板块投资还应留意大宗商品价格周期和美元通胀走势——当美联储货币政策收紧、大宗商品价格下行时，小市值资源股往往首当其冲下跌，这是投资高弹性品种需要权衡的风险收益比。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="锂资源新能源汽车的白色石油">锂资源：新能源汽车的”白色石油”</h2><a class="sl-anchor-link" href="#锂资源新能源汽车的白色石油"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “锂资源：新能源汽车的”白色石油””</span></a></div>
<p><strong>行业背景与战略角色：</strong> 锂被誉为新能源时代的”白色石油”，是制造锂离子电池不可或缺的原材料。随着电动车和储能蓬勃发展，锂已上升为全球争夺的战略资源。美国将锂列入关键矿物清单，并视其为实现电动车供应链自主的关键一环。遗憾的是，美国锂资源禀赋一般，现今国内仅有一座在产锂矿（内华达Silver Peak卤水矿），远不能满足需求。美国所需锂材料大部分依赖从南美（智利、阿根廷）和澳大利亚等进口矿石，再经中国精炼后获取。据USGS数据，2022年美国对锂化合物的对外依存度超过50%。一旦国际关系紧张或出口受限，美国电动车产业将面临断供风险。因此近年美国政府大力支持本土锂项目：例如提供贷款担保给Lithium Americas公司在内华达开发Thacker Pass锂矿，鼓励初创企业研发从粘土、地热卤水中提锂的新技术等。同时通过IRA规定，电动车购车补贴需使用一定比例美国或自由贸易伙伴生产的电池关键矿物。这些措施凸显锂在国家新能源战略中的地位。可以说，在”去碳化”与”大国博弈”的双重背景下，锂扮演了保障交通电气化和能源安全的双重角色。</p>
<p><strong>供需现状与发展前景：</strong> 过去几年锂市场经历了过山车行情：电动车销量激增引发锂化合物价格在2021-2022年飙涨数倍，全球矿企竞相扩产。2023年起由于供应增长赶超需求，锂价又大幅回落。据Fastmarkets统计，2024年全球锂矿供应预计增长22%，主要来自中国、澳大利亚、南美和非洲新矿投放，而需求虽保持强劲但一度跟不上供应增速，市场出现阶段性过剩。尽管短期供大于求令价格承压，但长期前景依然向好：全球锂消费2024年达到22万吨LCE，同比增长29%，其中电动车电池用锂预计未来每年增长12%直至2030。若以12%的年复合增速计算，2030年锂需求量将比目前扩大近三倍以上。这一需求增长主要来自电动汽车（包括电动重卡、商用车）以及储能、电动工具等领域。应对需求，各国都在开发新供应：澳洲和南美盐湖扩产最快，非洲多个硬岩锂矿也在未来几年投产，预计2030年非洲将贡献全球18%的硬岩锂。美国的Thacker Pass、Arkansas地热卤水等项目有望在2026-2030逐步上线。但锂供应也有隐忧：一方面，矿业投资需数年回本且环保要求高，美国本土项目进展缓慢（例如Thacker Pass环评诉讼拖延多年）；另一方面，锂提炼高度集中在中国，中国锂精炼能力成本仅约每吨8000美元，远低于北美2万美元以上。这意味着即使美国有矿石，也可能需要依赖海外（特别是中国）加工才能使用。为改变这一局面，必须投入巨资建设本土化学品提炼厂，同时解决环保和社区阻力。因此，锂行业的供应链重塑将是一个长期过程，短期波动在所难免。投资者还需关注技术变革：未来固态电池、钠离子电池等新技术若取得突破，可能改变对锂的需求格局。但权威机构预测2030年前锂离子电池仍将占据主导，锂作为关键元素的地位难以撼动。</p>
<p><strong>代表企业与投资分析：</strong> 锂资源板块内既有上游矿业公司，也有中游加工企业。典型公司如全球最大锂生产商雅宝（Albemarle, ALB）、美加两地运营的锂美洲公司（Lithium Americas, LAC）、新兴矿企西格玛锂业（Sigma Lithium, SGML）等。雅宝是锂行业龙头，拥有智利盐湖和澳洲矿山权益，技术和成本领先，并计划在美国本土建精炼厂。其业务成熟、现金流稳健，相对属于稳健布局型标的。但需注意雅宝作为大宗化工企业，盈利对锂价高度敏感，牛市中利润暴增、熊市中利润下滑，估值随锂价波动明显。锂美洲公司专注开发美洲新资源：其在内华达Thacker Pass项目是全美储量最大黏土锂矿，已获建造许可并获得通用汽车巨额投资和政府贷款支持，被视为美国锂自主的重要支点。LAC计划2026年投产，未来数年处于投入期，当前估值更多反映对其资源价值的预期。投资者应关注项目进度和成本控制，一旦投产顺利，公司有潜力由开发阶段转为高速成长的新供应商。Sigma锂业则在巴西运营高品位锂矿，已开始试生产，是少数即将产生正现金流的新秀。但其股价也曾因被传”特斯拉收购”而大涨大跌，体现炒作风险。总体看，锂矿板块在经历前期狂热后，当前估值有所消化，具备中长期配置价值。然而投资需区分企业阶段：有产能的龙头（如雅宝）抗风险能力强，但增长相对有限；开发期公司弹性大，但失败风险也高。应结合自身风险承受力进行权衡。如果看好电动车电池长期趋势，可以采取**“核心+卫星”**策略：核心持有稳健龙头获取行业平均收益，卫星配置小部分高弹性品种博取超额收益。同时注意锂价周期，低位布局、避免在价格峰值时盲目追高，以降低估值泡沫带来的回调风险。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="宏观背景与策略考量供应链重构下的投资机遇">宏观背景与策略考量：供应链重构下的投资机遇</h2><a class="sl-anchor-link" href="#宏观背景与策略考量供应链重构下的投资机遇"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “宏观背景与策略考量：供应链重构下的投资机遇”</span></a></div>
<p>上述板块的兴起离不开宏观环境的塑造。首先，中美战略博弈愈演愈烈，美国高度警惕在关键领域受制于人，力推供应链”去风险”和本土制造。这不仅是经济问题，更被上升为国家安全议题。摩根大通CEO杰米·戴蒙直言：“美国过度依赖不可靠的供应链获取国家安全所需的重要矿物和产品，这一点已痛切地显现”。因此我们看到美国政府频频动用工业政策工具：巨额补贴、关税壁垒、投资审核、出口管制等，以重塑关键行业生态。在能源转型方面，美国和西方承诺的碳中和目标需要庞大的新能源基础设施做支撑，带来对锂、钴、镍、稀土等前所未有的需求增量，这些金属俨然成为绿电时代的战略资源。与此同时，地缘政治风险频发（贸易战、战事冲突等）放大了供应的不确定性，各国纷纷以国家安全名义强化资源管控，例如中国近年多次限制关键矿物出口、美国则通过《国防授权法》等立法确保资源优先供应本国。这些动态都强化了市场对相关产业的长期看好预期。其次，全球供应链重构和”友岸外包”趋势明显。美国通过联盟体系拉拢矿产资源丰富的盟友（如澳加、非洲部分国家），共同建立去风险的供应网络。例如美日欧与加拿大成立”关键矿物安全伙伴关系”，美国也投入资金帮助非洲和拉美开采（但面临当地不稳定和中资竞争）。这预示未来原料供应格局将更分散，区域合作投资机会增加。另外，宏观经济因素对这些板块影响也不容忽视：通胀与货币政策方面，高通胀往往推升大宗商品价格并提高资源类企业收益，但高利率环境又可能提高新项目融资成本、压低高增长公司估值。近期美国加息周期令部分新能源公司的股价承压，但从长线看，若关键矿产出现结构性短缺，其实物价值有望战胜货币因素影响。因此对于投资者而言，需要综合研判宏观周期和产业趋势，把握进入时点。例如在经济下行、市场情绪悲观时逢低布局具政策支撑的优质标的，往往是不错的策略。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="投资者导向成长与风险的权衡">投资者导向：成长与风险的权衡</h2><a class="sl-anchor-link" href="#投资者导向成长与风险的权衡"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “投资者导向：成长与风险的权衡”</span></a></div>
<p>综合以上分析，可以看出”美国安全指数”覆盖的39家公司中，不乏具备中长期成长性的潜力股，也存在借主题炒作的概念股。投资者应如何甄别并把握其中机会？以下是几点导向：</p>
<p><strong>政策红利受益者：</strong> 美国政府的产业政策为这些公司提供了追风口的顺风车。凡是拿到政府补贴、订单或战略支持的企业，其业绩确定性相对提高。例如获得国防部合同的美国锑业、得到能源部贷款的Eos能源、享受税惠的本土电池厂商等，都有政策”兜底”一定程度保障。投资者应密切关注政策动态，顺势而为布局受益标的。但要注意政策红利往往已部分反映在股价中，需评估估值合理性。</p>
<p><strong>中长期成长股：</strong> 这类公司通常拥有核心资源或技术，市场空间大，能够在5-10年维度持续增长。例如拥有全球级资源的雅宝、MP Materials，具有技术和品牌优势的特斯拉等，它们基本面扎实，预计将随着行业扩张而壮大。对于此类成长股，短期波动不改长趋势，可考虑逢低逐步建仓，长期持有。</p>
<p><strong>高波动概念股：</strong> 部分公司尚无稳定收入，在概念炒作中涨幅巨大，如某些探索阶段矿企或技术路径尚未成熟的电池新创。这类高波动股可能蕴含极高弹性，但投资如同”风险投资”，要有可能归零的心理准备。投资者若参与，宜控制仓位，并设定止损止盈策略，切勿重仓赌单一故事。</p>
<p><strong>估值泡沫风险：</strong> 由于热点板块资金追捧，一些公司股价已包含乐观预期。要提防行业过热时的估值泡沫。衡量标准可以是市净率、市销率是否畸高，相对同业是否失衡，以及对未来盈利预测是否过于理想。如果发现基本面跟不上股价涨幅，应谨慎对待，必要时获利了结。</p>
<p><strong>组合配置与分散：</strong> 面对不确定性，将鸡蛋放在多个篮子是明智的。在新能源、安全主题投资中，不妨采取”核心-卫星”组合：核心仓位配置龙头稳健股获取稳定收益，卫星仓位少量布局高增长高风险股以博取超额收益。这种搭配可以在控制整体波动的同时，享受主题行情的红利。</p>
<p><strong>科普与认知：</strong> 普通投资者在参与这些新兴领域时，要做好知识储备。理解基本概念如稀土、锂辉石、电池储能技术路线等，有助于判断新闻事件对股价的实际影响。本篇已经针对一些术语进行了通俗解释，如将稀土比作”工业维生素”、锂称为”白色石油”等，帮助读者建立直观认识。在投资前，不妨多查阅资料、了解公司财报，做到心中有数再行动。</p>
<p>综上，“美国安全指数”反映了当今大国竞争和能源变革下的投资主线：从矿产资源独立到尖端科技自研。这一主题既有国家战略的加持，也伴随市场投机的噪音。对于普通投资者来说，机会诱人但风险同样不小。理性分析基本面、追踪政策走向、分散投资和长期视角，是参与这些板块的关键。只有这样，才能在服务国家安全与把握财富增值之间取得平衡。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="重点公司及行业核心看点一览">重点公司及行业核心看点一览</h2><a class="sl-anchor-link" href="#重点公司及行业核心看点一览"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “重点公司及行业核心看点一览”</span></a></div>
<p>下表总结了上述板块中具有代表性的部分公司及其所属领域的核心看点，供读者参考：</p>




































































<table><thead><tr><th>公司名称</th><th>所属领域</th><th>战略地位与业务重点</th><th>风险因素</th><th>投资观点（中长期）</th></tr></thead><tbody><tr><td>Cameco (CCJ)</td><td>核能铀矿</td><td>全球最大铀矿商之一，加美重要盟友供应源，长期供货合同稳定；在美英核电燃料市场占关键份额</td><td>铀价波动；资源集中在加国和哈萨克斯坦，地缘风险</td><td>行业龙头稳健，抗风险较强，适合作为核能板块核心配置</td></tr><tr><td>Energy Fuels (UUUU)</td><td>核能铀矿</td><td>美国本土铀矿领军企业，运营多个怀俄明和德州铀项目，受益美战略铀储备收购；拓展稀土提炼业务，打造双主业</td><td>规模小盈利不稳，需资金投入扩大产能；商品价格低迷时现金流承压</td><td>政策受益明显，中长期具成长潜力，但波动大，适合小仓位参与</td></tr><tr><td>Tesla (TSLA)</td><td>电池与储能</td><td>全球电动车龙头，在美建大型电池厂，布局储能产品；技术和品牌优势突出，引领行业创新</td><td>估值较高承载高增长预期；汽车行业竞争加剧可能压缩利润</td><td>长期前景向好，但需容忍股价波动。可长期持有，逢低布局</td></tr><tr><td>Eos Energy (EOSE)</td><td>电池与储能</td><td>美国新型储能电池厂商，主打安全长寿命的锌基电池，契合电网储能需求；获DOE贷款支持，加速产能扩张</td><td>尚未盈利，量产爬坡存在执行风险；市场认可度需时间验证</td><td>新能源储能前沿企业，弹性大但高风险。看好可小注布局，谨慎观望业绩落实</td></tr><tr><td>MP Materials (MP)</td><td>稀土与战略金属</td><td>拥有美唯一稀土矿山（Mountain Pass），获政府资金建分离和磁材设施；稀土产品对接国防和电动车产业</td><td>稀土精矿目前仍需中国加工，产业链不完整；稀土价格和政策管制风险</td><td>美国稀土振兴基石企业，中长期价值突出。适合长期持有，享受产业完善红利</td></tr><tr><td>USA Rare Earth (USAR)</td><td>稀土与战略金属</td><td>开发德州重稀土矿床，资源丰富含多重关键元素；承载美国重稀土供应希望，上市后受资本追捧</td><td>尚处开发阶段无营收，后续融资需求大；项目技术和环保挑战</td><td>战略题材浓厚，但商业化存不确定。适合激进投资者小仓位博弈，谨防泡沫</td></tr><tr><td>Albemarle (ALB)</td><td>锂资源</td><td>全球顶级锂生产商，资源遍布多国，技术领先；积极扩产并计划在美建加工，确保供应链安全</td><td>盈利高度依赖锂价，周期波动大；海外项目政治风险（如智利国策变化）</td><td>行业龙头基本面强健，享受锂长期需求红利。估值合理时可分批配置</td></tr><tr><td>Lithium Americas (LAC)</td><td>锂资源</td><td>拥有北美最大黏土锂矿Thacker Pass，获通用汽车6.5亿美元投资；亦涉足阿根廷盐湖项目</td><td>矿山建设周期长，资本开支高；黏土提锂工艺商业化存在不确定性</td><td>美国锂供应新秀，成长性佳但短期无收益。看好前景，可少量布局耐心持有</td></tr></tbody></table>
<p>通过以上分析和表格总结，希望为广大读者揭开”大摩美国安全指数”背后的投资逻辑。在全球竞相争夺资源与技术自主的大潮中，普通投资者既可分享时代机遇，也需练就火眼金睛、理性应对市场波动。从长远看，国家战略所指引的方向往往也是产业发展的方向，把握好这些方向，有望在支持国家安全的同时实现个人财富的稳健增值。</p>
<p><em>注：以上观点仅供参考，不构成投资建议。股市有风险，投资需谨慎。</em></p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/finance/" class="astro-sg3lsd66">Finance</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/us-market/" class="astro-sg3lsd66">US Market</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/investment/" class="astro-sg3lsd66">Investment</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/jpmorgan/" class="astro-sg3lsd66">JPMorgan</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/energy/" class="astro-sg3lsd66">Energy</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/minerals/" class="astro-sg3lsd66">Minerals</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/practices/2025-10-15-one-prompt-session-auto-lock/" class="astro-dr56dw7m">一段简洁提示词，让 Claude Code 同步改 Web、App、后端（以“会话自动锁屏时长”为例）</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-10-15T00:00:00.000Z" class="astro-2oxtfctb"> 2025年10月15日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 一段简洁提示词，让 Claude Code 同步改 Web、App、后端（以“会话自动锁屏时长”为例） -->
<blockquote>
<p>你写一段<strong>短到离谱</strong>的提示词，智能代理就把 Web（TypeScript）、App（Flutter）和 API（Rails）<strong>一起改完</strong>：加功能、设权限、配多语言，还能起迁移、跑校验。关键是<strong>好写、好复用</strong>。</p>
</blockquote>
<p>空口不信？往下看。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="为什么这套玩法现在靠谱">为什么这套玩法现在靠谱</h2><a class="sl-anchor-link" href="#为什么这套玩法现在靠谱"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “为什么这套玩法现在靠谱”</span></a></div>
<ul>
<li><strong>Claude Code 已上“插件”</strong>：把斜杠命令、子代理、MCP 服务器、生命周期 hooks 打包成一个可一键安装的插件。团队能把“多端联改”做成<strong>标准流水线</strong>。</li>
<li><strong>MCP（Model Context Protocol）相当于给 AI 插了 USB-C</strong>：把 IDE/代理和你的仓库、数据库、工具接起来，读写信息、执行动作都更标准。</li>
<li><strong>支持远程 MCP</strong>：很多能力直接连云端服务，用鉴权就能配，企业里多仓库多环境<strong>更省事</strong>。</li>
<li>官方还给了<strong>代理式编码最佳实践</strong>，强调结构化目标 + 清单式需求写法，落地更稳。</li>
<li>新模型/生态也在推一把，比如 Sonnet 4.5 对复杂代理和“用电脑”场景更强，配合插件/MCP，<strong>从提示到补丁</strong>更顺滑。</li>
</ul>
<p>—</p>
<div class="sl-heading-wrapper level-h2"><h2 id="用会话自动锁屏时长做替身场景">用“会话自动锁屏时长”做替身场景</h2><a class="sl-anchor-link" href="#用会话自动锁屏时长做替身场景"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “用“会话自动锁屏时长”做替身场景”</span></a></div>
<p>我们要在“安全设置”里加一个功能：<strong>会话自动锁屏时长（Session Auto-Lock）</strong></p>
<ul>
<li>两个选项：<strong>标准（2 分钟）</strong>、<strong>严格（30 秒）</strong></li>
<li>仅授权用户能查看/修改</li>
<li>Web 管理台、App 设置页、API 一起改</li>
<li>中英双语 i18n</li>
</ul>
<p>这个功能<strong>足够通用</strong>，不涉及任何敏感业务代码。</p>
<p>—</p>
<div class="sl-heading-wrapper level-h2"><h2 id="给-claude-code-的结构化提示词可直接复用">给 Claude Code 的结构化提示词（可直接复用）</h2><a class="sl-anchor-link" href="#给-claude-code-的结构化提示词可直接复用"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “给 Claude Code 的结构化提示词（可直接复用）”</span></a></div>
<blockquote>
<p>把下面这段当“工单”。短句、动词开头、每段 2～4 行。让代理少追问，多产出。</p>
</blockquote>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Task: Add "Session Auto-Lock Duration" to Security Settings across Web (TypeScript), App (Flutter), and API (Rails).</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Context:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- Two options: standard=2 minutes, strict=30 seconds. Default=standard.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- Only authorized users can view/modify this setting.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Requirements:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1) Web Admin:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Add a dropdown field under Security Settings.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Options: Standard / Strict. Bind permission key: session_auto_lock.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Localize: en_US, zh_CN.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2) Mobile App:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Add the same dropdown in Security Settings screen.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Read/write to user/device security config. Hide/disable if unauthorized.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Localize: en_US, zh_CN.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3) API:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- DB migration: add string column "session_auto_lock_duration" with default "standard".</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Model enum: STANDARD/STRICT/ALL_OPTIONS.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Permission registration for "session_auto_lock".</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Validation: only allow ALL_OPTIONS; return 403 if unauthorized.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4) Copy:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- en_US: "Standard: 2 minutes", "Strict: 30 seconds"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- zh_CN: "标准（2分钟）", "严格（30秒）"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">5) Review checklist:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Permission gating works in Web/App/API.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Default renders as "standard".</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- i18n strings appear correctly.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">   </span></span><span style="--0:#d6deeb;--1:#403f53">- Ship diffs per repo with tests passing.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Task: Add &#x22;Session Auto-Lock Duration&#x22; to Security Settings across Web (TypeScript), App (Flutter), and API (Rails).Context:- Two options: standard=2 minutes, strict=30 seconds. Default=standard.- Only authorized users can view/modify this setting.Requirements:1) Web Admin:   - Add a dropdown field under Security Settings.   - Options: Standard / Strict. Bind permission key: session_auto_lock.   - Localize: en_US, zh_CN.2) Mobile App:   - Add the same dropdown in Security Settings screen.   - Read/write to user/device security config. Hide/disable if unauthorized.   - Localize: en_US, zh_CN.3) API:   - DB migration: add string column &#x22;session_auto_lock_duration&#x22; with default &#x22;standard&#x22;.   - Model enum: STANDARD/STRICT/ALL_OPTIONS.   - Permission registration for &#x22;session_auto_lock&#x22;.   - Validation: only allow ALL_OPTIONS; return 403 if unauthorized.4) Copy:   - en_US: &#x22;Standard: 2 minutes&#x22;, &#x22;Strict: 30 seconds&#x22;   - zh_CN: &#x22;标准（2分钟）&#x22;, &#x22;严格（30秒）&#x22;5) Review checklist:   - Permission gating works in Web/App/API.   - Default renders as &#x22;standard&#x22;.   - i18n strings appear correctly.   - Ship diffs per repo with tests passing."><div></div></button></div></figure></div>
<blockquote>
<p>这种“<strong>落点明确 + 清单化</strong>”的提示，在代理式编码里效果最好；Claude Code 官方也推荐<strong>结构化指令</strong>，一次性降低反复沟通成本。</p>
</blockquote>
<p>—</p>
<div class="sl-heading-wrapper level-h2"><h2 id="三端改造会分别长什么样">三端改造会分别长什么样</h2><a class="sl-anchor-link" href="#三端改造会分别长什么样"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “三端改造会分别长什么样”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="webtypescript">Web（TypeScript）</h3><a class="sl-anchor-link" href="#webtypescript"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Web（TypeScript）”</span></a></div>
<ul>
<li>
<p>安全设置页新增一个 <strong>Session Auto-Lock</strong> 下拉。</p>
</li>
<li>
<p>绑定权限键 <code dir="auto">session_auto_lock</code>；无权限隐藏或禁用。</p>
</li>
<li>
<p>i18n：</p>
<ul>
<li>en_US：Standard / Strict</li>
<li>zh_CN：标准（2分钟）/ 严格（30秒）</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="appflutter">App（Flutter）</h3><a class="sl-anchor-link" href="#appflutter"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “App（Flutter）”</span></a></div>
<ul>
<li>“安全”页加入同名下拉组件。</li>
<li>读取/保存到安全配置；无权限则置灰或不显示。</li>
<li>文案同 Web，保持一致。</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="apirails">API（Rails）</h3><a class="sl-anchor-link" href="#apirails"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “API（Rails）”</span></a></div>
<ul>
<li>迁移：<code dir="auto">session_auto_lock_duration</code>，默认 <code dir="auto">standard</code>。</li>
<li>模型常量：<code dir="auto">STANDARD</code> / <code dir="auto">STRICT</code> / <code dir="auto">ALL_OPTIONS</code>。</li>
<li>权限注册：<code dir="auto">session_auto_lock</code>；写接口做白名单校验；无权限 403。</li>
</ul>
<blockquote>
<p>这些动作可通过<strong>插件 + MCP</strong>连起来：代理读写多仓库文件、生成迁移、跑测试，再开 PR。</p>
</blockquote>
<p>—</p>
<div class="sl-heading-wrapper level-h2"><h2 id="团队落地的小流程">团队落地的小流程</h2><a class="sl-anchor-link" href="#团队落地的小流程"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “团队落地的小流程”</span></a></div>
<p><strong>准备</strong></p>
<ul>
<li>给 Web/App/API 各配一个轻代理或把步骤封装成插件的命令。</li>
<li>接上本地/远程 MCP，绑定仓库与 CI。</li>
</ul>
<p><strong>执行</strong></p>
<ul>
<li>用上面的“工单式提示词”触发。</li>
<li>代理按清单生成补丁、迁移、i18n、权限注册；自动起 MR/PR。</li>
</ul>
<p><strong>复核</strong></p>
<ul>
<li>CI 跑 Lint/Tests；失败交给代理回修。</li>
<li>人眼只看关键差异与验收项。</li>
<li>需要合规/审计？插件里加操作留痕与回滚脚本。
-（注：近期生态对安全和可治理越来越重视，代理工具也在完善规则与用量治理。）</li>
</ul>
<p>—</p>
<div class="sl-heading-wrapper level-h2"><h2 id="踩坑与小技巧">踩坑与小技巧</h2><a class="sl-anchor-link" href="#踩坑与小技巧"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “踩坑与小技巧”</span></a></div>
<ul>
<li>指令别写散。<strong>短句 + 动词 + 名词落点</strong>，成功率更高。</li>
<li>权限键、默认值、白名单选项<strong>写死</strong>，别交给模型“自由发挥”。</li>
<li>文案直接给<strong>最终字符串</strong>，省一次来回。</li>
<li>远程 MCP 很爽，但记得<strong>鉴权与最小权限</strong>，分环境分角色。</li>
<li>把这段提示词沉到团队的<strong>指令库/插件</strong>，以后只换“功能名 + 枚举值”就能复用。</li>
</ul>
<p>—</p>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p>把复杂交给标准，把简单留给人。
一段结构化提示词 + 插件化代理 + MCP，
就能把“<strong>跨端、跨仓、跨语言</strong>”的机械活压扁。
你盯需求定义与最后拍板，其他交给机器跑。</p>
<p><strong>你觉得呢？这个“会话自动锁屏时长”的替身方案适合你们项目吗？</strong></p>
<!-- 
---

# 推荐标题（多语言 + slug）

1. **一句提示，三端齐更：用 Claude Code 上线“会话自动锁屏时长”**
   EN: One Prompt, Three Stacks: Shipping Session Auto-Lock with Claude Code
   繁體: 一句提示，三端齊更：用 Claude Code 上線「自動鎖屏時長」
   日本語: 一文プロンプトで三層同時更新：Session Auto-Lock を実装
   Français : Un prompt, trois piles : déployer l’auto-verrouillage de session
   Español: Un prompt, tres stacks: publicar Auto-Lock de sesión
   Português: Um prompt, três stacks: lançar Auto-Lock de sessão
   **slug:** one-prompt-session-auto-lock

2. **把需求写成开关，代理来接力：MCP 驱动的多端联改实战**
   EN: Spec as Switches, Agents Do the Rest
   繁體: 把需求寫成開關，代理接力落地
   日本語: 仕様をスイッチ化して、実装はエージェント任せ
   Français : Spécifiez en interrupteurs, laissez agir les agents
   Español: Especifica como interruptores, que los agentes hagan el resto
   Português: Especifique como chaves, deixe os agentes fazerem o resto
   **slug:** mcp-agentic-cross-platform

3. **从提示到上线：插件化 Claude Code 的“一口气联改”模板**
   EN: From Prompt to Prod: A Plugin-Powered One-Run Refactor
   繁體: 從提示到上線：外掛化 Claude Code 的一口氣聯改
   日本語: プロンプトから本番へ：プラグイン化 Claude Code の一括改修
   Français : Du prompt à la prod : refactorisation « one-run »
   Español: Del prompt a producción: refactor “one-run”
   Português: Do prompt à produção: refactor “one-run”
   **slug:** prompt-to-prod-one-run

---

# 配图方案（插画风 2:1，无中文）

**封面图 Prompt：**
“Wide 2:1 illustration of an AI agent launching three parallel assembly lines labeled Web, App, API. Robotic arms apply a ‘Lock’ timer toggle to a browser, a phone, and a server rack. Clean tech style, soft gradients, crisp edges.”

**关键图 1（结构化提示词）：**
“A tidy checklist card with five short bullets sliding into an AI agent’s toolbox. The road forks to TypeScript, Flutter, Rails. Minimal blueprint vibe, 2:1.”

**关键图 2（MCP 连接）：**
“A USB-C hub metaphor linking repo, database, CI, and permissions service. Centered security shield icon. Flat vector, 2:1.”

**关键图 3（审计与回滚）：**
“Commit timeline with diffs under a magnifier and a big undo arrow. Calm enterprise palette, 2:1.”

---

# 评论三连（发圈/评论区）

1. “把需求写成开关，这波直接三端齐更，回头我也照抄模板试试😎”
2. “MCP 像 USB-C，一插就通；再配插件，代理能打包跑全程，真省心。”
3. “最喜欢验收清单那段，合规留痕也想到了，稳！”



需要我把**“Auto-Lock”**替换成你们马上要上的别的安全开关吗？还可以顺手补一份**代码审查清单 + 回滚脚本大纲**。

[1]: https://www.anthropic.com/news/claude-code-plugins?utm_source=chatgpt.com "Customize Claude Code with plugins"
[2]: https://docs.anthropic.com/en/docs/mcp?utm_source=chatgpt.com "Model Context Protocol (MCP) - Anthropic API"
[3]: https://docs.claude.com/en/docs/agents-and-tools/remote-mcp-servers?utm_source=chatgpt.com "Remote MCP servers"
[4]: https://www.anthropic.com/engineering/claude-code-best-practices?utm_source=chatgpt.com "Claude Code: Best practices for agentic coding"
[5]: https://www.anthropic.com/news/claude-sonnet-4-5?utm_source=chatgpt.com "Introducing Claude Sonnet 4.5"
[6]: https://www.theverge.com/news/760080/anthropic-updated-usage-policy-dangerous-ai-landscape?utm_source=chatgpt.com "Anthropic has new rules for a more dangerous AI landscape"
— --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/flutter/" class="astro-sg3lsd66">Flutter</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/android/" class="astro-sg3lsd66">Android</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/apk/" class="astro-sg3lsd66">APK</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/practices/2025-10-16-break-the-etc-clarity-for-claude-code/" class="astro-dr56dw7m">Claude Code 也会“偷懒”：当你的 etc. 变成“只做前三条”</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-10-15T00:00:00.000Z" class="astro-2oxtfctb"> 2025年10月15日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # Claude Code 也会“偷懒”：当你的 etc. 变成“只做前三条” -->
<p>**一句话结论：**AI 写代码再快，也拯救不了模糊的需求。<strong>要想让 Claude Code 真正省心，关键是把“etc.”拆成清单、把验收变成剧本、把测试交给机器跑</strong>。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="引言">引言</h2><a class="sl-anchor-link" href="#引言"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言”</span></a></div>
<p>你有没有写过这样的需求：
“首页展示设备关键信息（电源、音量等）”。</p>
<p>结果提测时，AI 只实现了前三项。<strong>“等”就真的没了</strong>。
不是 AI 不聪明，是我们给它的信号不够明确。<strong>Claude Code 也会“偷懒”——当你的指令模糊时，它会合理但不完整地收敛实现范围</strong>。这并非坏事，<strong>这是人机协作的边界提醒</strong>。</p>
<p>顺带一提，Anthropic 刚把 Haiku 升到 4.5，<strong>更便宜、更快、编码表现接近 Sonnet</strong>，在 Copilot 里也开始可用；速度更快，但**“等”还是不会自动补齐**。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="现象等号左边写得少等号右边自然变小">现象：等号左边写得少，等号右边自然变小</h2><a class="sl-anchor-link" href="#现象等号左边写得少等号右边自然变小"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “现象：等号左边写得少，等号右边自然变小”</span></a></div>
<ul>
<li>你写了“电源、音量、亮度等”。</li>
<li>Claude Code 读到的是<strong>明确的三项 + 不明确的“等”</strong>。</li>
<li>结果：代码、自动化测试、文档，<strong>全部只覆盖前三项</strong>。</li>
</ul>
<p>不是 AI “偷工减料”。<strong>是 AI 遵循“可验证优先”</strong>：明确的点能写代码和测试，不明确的点就会被跳过。<strong>这在研究与行业报告里被反复观察到</strong>——AI 助手在<strong>不完整或含糊的需求下更容易遗漏功能</strong>，即使它能更快地给出代码。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="可复制的解决方案别让等上生产">可复制的解决方案：别让“等”上生产</h2><a class="sl-anchor-link" href="#可复制的解决方案别让等上生产"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “可复制的解决方案：别让“等”上生产”</span></a></div>
<p>下面这套流程，<strong>适用于任何 App、后台、Web 项目</strong>。拿走即用。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="一把等变成数据化清单">一、把“等”变成<strong>数据化清单</strong></h3><a class="sl-anchor-link" href="#一把等变成数据化清单"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一、把“等”变成数据化清单”</span></a></div>
<p><strong>把名词写成表格</strong>，给每一项加“状态、来源、展示规则、空值策略、异常策略”。示例字段：</p>
<ul>
<li>名称：Power / Volume / Brightness …</li>
<li>值域：On/Off；0–100…</li>
<li>数据源：本地缓存 / 后端接口 / 蓝牙…</li>
<li>展示：图标、标签、单位</li>
<li>空值：显示“—”还是灰显</li>
<li>异常：超时、断连、权限被拒绝时的占位</li>
</ul>
<p>这样做的价值：<strong>AI 能完整生成 UI + 校验 + 空态 + 错误处理</strong>，而不是只画出“看起来像对的三个组件”。</p>
<blockquote>
<p>参考：<strong>用 Gherkin/BDD 写验收标准</strong>，把行为写成“Given-When-Then”的<strong>剧本</strong>，可读也可测。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="二把验收从口头对升级为可执行">二、把验收从“口头对”升级为“可执行”</h3><a class="sl-anchor-link" href="#二把验收从口头对升级为可执行"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “二、把验收从“口头对”升级为“可执行””</span></a></div>
<p><strong>把清单转成 Gherkin 场景</strong>，再由 AI 产出自动化测试脚本：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Feature: Device key info panel</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">Scenario Outline: Render each key info item</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">Given the device exposes "&#x3C;name>" with value "&#x3C;value>"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">When I open the home page</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">Then I should see "&#x3C;label>" and formatted "&#x3C;value>"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">    </span></span><span style="--0:#d6deeb;--1:#403f53">Examples:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">| name       | value | label      |</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">| Power      | On    | Power     |</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">| Volume     | 70    | Volume    |</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">| Brightness | 40    | Brightness|</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">| …          | …     | …         |</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Feature: Device key info panel  Scenario Outline: Render each key info item    Given the device exposes &#x22;<name>&#x22; with value &#x22;<value>&#x22;    When I open the home page    Then I should see &#x22;<label>&#x22; and formatted &#x22;<value>&#x22;    Examples:      | name       | value | label      |      | Power      | On    | Power     |      | Volume     | 70    | Volume    |      | Brightness | 40    | Brightness|      | …          | …     | …         |"><div></div></button></div></figure></div>
<p><strong>研究表明</strong>：让 LLM 先从用户故事<strong>生成 Gherkin 场景</strong>，再<strong>转成可执行测试</strong>（如 Cypress），能显著提升覆盖率和可控性。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="三把复用做在数据层少踩重复实现的坑">三、把“复用”做在<strong>数据层</strong>，少踩“重复实现”的坑</h3><a class="sl-anchor-link" href="#三把复用做在数据层少踩重复实现的坑"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “三、把“复用”做在数据层，少踩“重复实现”的坑”</span></a></div>
<p>别在多个模块里<strong>各写一份相似的 infos()</strong>。
<strong>抽成可复用的数据映射与渲染器</strong>：一份 schema，<strong>到处消费</strong>。</p>
<ul>
<li><code dir="auto">keyInfo.schema.ts</code>：字段、值域、格式化、空态策略</li>
<li><code dir="auto">keyInfo.adapter.ts</code>：从不同数据源（API、蓝牙、缓存）<strong>统一适配</strong></li>
<li><code dir="auto">KeyInfoPanel.tsx</code>：<strong>纯展示</strong>，不碰业务逻辑</li>
<li><code dir="auto">keyInfo.spec.ts</code>：跑<strong>全量表格驱动</strong>测试，新增一项=自动多测一项</li>
</ul>
<p><strong>结果</strong>：新增“电池温度”这种后续项，也能<strong>一处加 schema，处处生效</strong>。这就是**“等”的工程化**。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="四把ai-生成放进持续集成">四、把“AI 生成”放进<strong>持续集成</strong></h3><a class="sl-anchor-link" href="#四把ai-生成放进持续集成"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “四、把“AI 生成”放进持续集成”</span></a></div>
<ul>
<li>PR 阶段自动跑：<strong>类型检查、静态规则、单元 + 验收测试</strong>。</li>
<li><strong>门禁</strong>：若清单项数 ≠ 测试覆盖项数，直接拒绝合并。</li>
<li>加上安全与合规扫描，防止<strong>AI 生成带来隐性风险</strong>。</li>
</ul>
<blockquote>
<p>单测告诉你“哪里坏了”，验收测告诉你“是不是完整可用”。两者<strong>缺一不可</strong>。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="五善用-claude-code-最新能力但不要把它当读心术">五、善用 Claude Code 最新能力，但不要把它当读心术</h3><a class="sl-anchor-link" href="#五善用-claude-code-最新能力但不要把它当读心术"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “五、善用 Claude Code 最新能力，但不要把它当读心术”</span></a></div>
<ul>
<li><strong>Claude Code Plugins</strong>：把你的“清单生成、Gherkin 转脚本、覆盖率校验”打包成<strong>一键安装的工作流</strong>，团队共享即用。</li>
<li><strong>Haiku 4.5</strong>：<strong>便宜且快</strong>，适合把“清单→场景→测试”的重复体力活<strong>批量化</strong>。在 Copilot 侧也逐步可用。</li>
<li>记住：<strong>更快 ≠ 更懂你</strong>。<strong>明确性</strong>才是生产力倍增器。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="速用清单可直接贴进团队-wiki">速用清单（可直接贴进团队 Wiki）</h2><a class="sl-anchor-link" href="#速用清单可直接贴进团队-wiki"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “速用清单（可直接贴进团队 Wiki）”</span></a></div>
<p><strong>拉齐定义</strong></p>
<ul>
<li>把“等”拆成<strong>表格清单</strong>，每项含：值域、来源、展示、空值、异常。</li>
<li>为每项写 1 条 <strong>Gherkin 场景</strong>。</li>
</ul>
<p><strong>自动化</strong></p>
<ul>
<li>用 Claude 生成 <strong>Cypress/Playwright</strong> 脚本。</li>
<li>CI 强制：<strong>清单项数 = 通过的场景数</strong>。</li>
</ul>
<p><strong>工程化复用</strong></p>
<ul>
<li>schema + adapter + 纯展示组件。</li>
<li>新增项 = 增 schema；测试与 UI <strong>自动跟进</strong>。</li>
</ul>
<p><strong>安全与质量</strong></p>
<ul>
<li>静态扫描 + 依赖与密钥检查。</li>
<li>PR 门禁不过就不合并。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p><strong>Claude Code 没有偷懒。它只是按你给的“边界”办事。</strong>
当你把<strong>模糊</strong>变成<strong>结构化</strong>，把<strong>验收</strong>变成<strong>可执行</strong>，AI 就真的成了<strong>可靠的搭档</strong>。</p>
<p>**你觉得团队里，哪一块最容易写出“等”？你在怎么治理？**欢迎在评论区聊聊。</p>
<!-- 
---

## 配图（插画风 2:1，无中文）

**封面图 Prompt**
“An engineer and an AI robot at a whiteboard turning a vague ‘etc.’ into a detailed checklist, clean UI, code snippets and test cases floating around, modern illustration, high contrast, 2:1 aspect ratio”

**关键章节配图 1（清单化）**
“A before-and-after split: left shows a vague spec with ‘etc.’, right shows a structured table with fields and rules, friendly illustration, 2:1”

**关键章节配图 2（可执行验收）**
“Gherkin scenarios transforming into automated test scripts running on CI pipeline dashboard, minimal devops illustration, 2:1”

**关键章节配图 3（工程化复用）**
“Schema-Adapter-UI layered architecture diagram as blocks connected with arrows, reusable components, 2:1”

---

## 推荐标题（含多语言与 slug）

1. **把“等”打碎，Claude Code 才不“偷懒”**

* EN: Break the “etc.” and Claude Code Stops “Slacking”
* 繁體: 把「等」拆開，Claude Code 才不「偷懶」
* 日本語: 「など」を分解すれば、Claude Code は“サボらない”
* Français : Décomposez le « etc. », Claude Code ne “bâcle” plus
* Español: Rompe el “etc.” y Claude Code deja de “flojar”
* Português: Quebre o “etc.” e o Claude Code para de “enrolar”
* slug: **break-the-etc-clarity-for-claude-code**

2. **AI 写得快，不等于懂你想要的全部**

* EN: Fast Code ≠ Full Intent
* 繁體: 寫得快 ≠ 懂你全部意圖
* 日本語: 速い生成 ≠ すべてを理解
* Français : Vitesse ≠ Intention complète
* Español: Rapidez ≠ Intención completa
* Português: Velocidade ≠ Intenção completa
* slug: **fast-code-not-full-intent**

3. **让验收会“说话”：把需求变成剧本，让测试自己跑**

* EN: Make Acceptance Speak: Script Specs, Let Tests Run Themselves
* 繁體: 讓驗收會「說話」：把需求變劇本，讓測試自動跑
* 日本語: 受入を“語らせる”：仕様を台本化してテストを自動化
* Français : Faites “parler” l’acceptation : scénarisez, testez en automatique
* Español: Que la aceptación “hable”: guioniza y deja que las pruebas corran
* Português: Faça a aceitação “falar”: roteirize e deixe os testes rodarem
* slug: **acceptance-that-speaks**

---

## 朋友圈/评论区文案（3 选 1）

1. “原来 Claude Code 也会‘只做前三条’？我把 etc. 全拆成清单，自动化测试一跑，世界清静了。”
2. “AI 写代码贼快，但不会读心。把验收写成剧本，测试自己跑，比加人靠谱。”
3. “升级 Haiku 4.5 之后更快了，但‘等’还得自己写清楚。别怪 AI，先怪自己的需求。”

---

**参考与延伸阅读**

* **Anthropic：Claude Haiku 4.5 发布**（更快更便宜，编码表现提升），以及 **Claude Code 插件**（把自定义流程打包成插件）。
* **Haiku 4.5 在 GitHub Copilot 公测**（生态可达性增强）。
* **AI 助手的局限与风险**（速度与安全的权衡）。
* **Gherkin/BDD 与可执行验收**（从用户故事到脚本的实践）。

—

需要我把上面“清单模板 + Gherkin 场景 + CI 规则”打包成一份可下载的团队范本吗？我可以直接生成整套文件。满意吗，要不要再**扩写一个真实页面的从 0 到上线示例**？

[1]: https://www.anthropic.com/news/claude-haiku-4-5?utm_source=chatgpt.com "Introducing Claude Haiku 4.5"
[2]: https://arxiv.org/html/2508.07966v1?utm_source=chatgpt.com "Exploring the Challenges and Opportunities of AI-assisted ..."
[3]: https://www.altexsoft.com/blog/acceptance-criteria-purposes-formats-and-best-practices/?utm_source=chatgpt.com "Acceptance Criteria: Purposes, Types, Examples and Best ..."
[4]: https://arxiv.org/html/2504.07244v1?utm_source=chatgpt.com "Acceptance Test Generation with Large Language Models"
[5]: https://www.techradar.com/pro/ai-is-creating-code-faster-but-this-also-means-more-potential-security-issues?utm_source=chatgpt.com "AI is creating code faster - but this also means more potential security issues"
[6]: https://testlio.com/blog/unit-testing-vs-acceptance-testing/?utm_source=chatgpt.com "Understanding Quality - Unit Testing and Acceptance Testing"
[7]: https://www.anthropic.com/news/claude-code-plugins?utm_source=chatgpt.com "Customize Claude Code with plugins"
[8]: https://allthingsopen.org/articles/ai-code-assistants-limitations?utm_source=chatgpt.com "6 limitations of AI code assistants and why developers ..."
[9]: https://github.blog/changelog/2025-10-15-anthropics-claude-haiku-4-5-is-in-public-preview-for-github-copilot/?utm_source=chatgpt.com "Anthropic's Claude Haiku 4.5 is in public preview for ..." --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/typescript/" class="astro-sg3lsd66">TypeScript</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/github-copilot/2025-09-26-github-copilot-cli-public-preview-terminal-workflows/" class="astro-dr56dw7m">来都来了，GitHub Copilot CLI 公测上线</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-26T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月26日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 来都来了，GitHub Copilot CLI 公测上线 -->
<blockquote>
<p>GitHub 把会“动手干活”的 Copilot 编码代理搬进了命令行，能读你仓库、理解 issue/PR，按你的确认一步步执行。装个 npm 包就能用，适合本地开发的<strong>构建/重构/调试/提 PR</strong>整套流。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="引言为什么是-cli">引言：为什么是 CLI？</h2><a class="sl-anchor-link" href="#引言为什么是-cli"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言：为什么是 CLI？”</span></a></div>
<p>我们写代码，80% 的时间都在终端。能不能<strong>把“会规划、会执行”的 AI 搬进命令行</strong>，少来回切换？
GitHub 的回答是：<strong>Copilot CLI</strong>。它把 Copilot 编码代理塞进你的本地环境，<strong>先预览动作、你点头再执行</strong>，既省心又可控。</p>
<blockquote>
<p>这波对“本地效率党”和“安全敏感型团队”都很友好。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="一它到底新在哪">一、它到底新在哪？</h2><a class="sl-anchor-link" href="#一它到底新在哪"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一、它到底新在哪？”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-终端原生一条命令就开聊">1) 终端原生，一条命令就开聊</h3><a class="sl-anchor-link" href="#1-终端原生一条命令就开聊"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1) 终端原生，一条命令就开聊”</span></a></div>
<p>直接在命令行里让 Copilot 看代码、跑指令、给解释。<strong>不用切来切去</strong>，效率直线拉满。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="2-github-全家桶打通">2) GitHub 全家桶打通</h3><a class="sl-anchor-link" href="#2-github-全家桶打通"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2) GitHub 全家桶打通”</span></a></div>
<p>自然语言就能<strong>浏览仓库、搜 issue、查 PR</strong>，身份继承你现有的 GitHub 账号与套餐（Pro/Pro+/Business/Enterprise）。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="3-真agent-能力">3) 真·Agent 能力</h3><a class="sl-anchor-link" href="#3-真agent-能力"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3) 真·Agent 能力”</span></a></div>
<p>不只是补全。它能<strong>规划多步任务、编辑文件、调试、发起变更</strong>。配合 GA 的 Copilot 编码代理，终端里也能跑“能执行的计划”。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="4-mcp-可扩展">4) MCP 可扩展</h3><a class="sl-anchor-link" href="#4-mcp-可扩展"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4) MCP 可扩展”</span></a></div>
<p><strong>内置 GitHub 的 MCP 服务器</strong>，可接入自定义 MCP，扩展到内网工具、知识库、工单系统等。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="5-模型升级加持">5) 模型升级加持</h3><a class="sl-anchor-link" href="#5-模型升级加持"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5) 模型升级加持”</span></a></div>
<p>GitHub 近期已引入 <strong>GPT-5-Codex</strong> 公测，主打更强的代码理解与重构。CLI 背后的代理也能吃到这波模型红利。</p>
<blockquote>
<p><strong>关键点</strong>：<strong>每一步执行前都会给你预览</strong>。不点“确认”，它不会动。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="二三步装好2-分钟上手真的很快">二、三步装好，2 分钟上手（真的很快）</h2><a class="sl-anchor-link" href="#二三步装好2-分钟上手真的很快"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “二、三步装好，2 分钟上手（真的很快）”</span></a></div>
<ol>
<li><strong>安装</strong></li>
</ol>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-g</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">@github/copilot</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install -g @github/copilot"><div></div></button></div></figure></div>
<ol start="2">
<li><strong>登录</strong>（跟随交互完成 GitHub 认证）</li>
<li><strong>开始使用</strong>（付费计划 Pro / Pro+ / Business / Enterprise 其一即可）</li>
</ol>
<blockquote>
<p>详细安装步骤与注意事项参考官方文档“Installing GitHub Copilot CLI”。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="三我日常怎么用给你-6-个高频场景">三、我日常怎么用？给你 6 个高频场景</h2><a class="sl-anchor-link" href="#三我日常怎么用给你-6-个高频场景"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “三、我日常怎么用？给你 6 个高频场景”</span></a></div>
<blockquote>
<p>场景里的命令是<strong>示意</strong>，实际以 CLI 提示为准。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="1-熟悉陌生仓库">1) 熟悉陌生仓库</h3><a class="sl-anchor-link" href="#1-熟悉陌生仓库"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1) 熟悉陌生仓库”</span></a></div>
<p><strong>目标</strong>：10 分钟弄清目录结构与关键模块。
<strong>玩法</strong>：让 Copilot 解析项目、生成模块图、列出“高风险文件”。
<strong>收益</strong>：新人上手更快，减少走弯路。</p>
<p><strong>配图建议</strong>：终端窗口 +“项目地图”小插画（2:1）。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="2-从-issue-开发一个小功能">2) 从 issue 开发一个小功能</h3><a class="sl-anchor-link" href="#2-从-issue-开发一个小功能"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2) 从 issue 开发一个小功能”</span></a></div>
<p><strong>目标</strong>：把一个 issue 变成 PR。
<strong>玩法</strong>：把 issue 文本丢给它，让它<strong>规划→修改代码→本地跑测→起分支→提交 PR 草稿</strong>，每一步你点确认。
<strong>收益</strong>：减少机械劳动，把精力留给评审。</p>
<p><strong>配图建议</strong>：Issue → Plan → Code → Test → PR 的箭头流程。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="3-本地调试--错误解释">3) 本地调试 + 错误解释</h3><a class="sl-anchor-link" href="#3-本地调试--错误解释"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3) 本地调试 + 错误解释”</span></a></div>
<p><strong>目标</strong>：快速定位一个诡异报错。
<strong>玩法</strong>：让它读取日志、结合源码提出<strong>重现场景与修复建议</strong>，并生成最小复现脚本。
<strong>收益</strong>：解决“看得懂报错但不知道从哪下手”的焦虑。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="4-自动补齐缺失单测">4) 自动补齐缺失单测</h3><a class="sl-anchor-link" href="#4-自动补齐缺失单测"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4) 自动补齐缺失单测”</span></a></div>
<p><strong>目标</strong>：补足关键路径的单元测试。
<strong>玩法</strong>：让它扫描覆盖率薄弱区，草拟测试用例，拉起本地测试并<strong>自动修正小错误</strong>。
<strong>收益</strong>：质量门槛更稳，回归不背锅。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="5-大重构周保姆式陪跑">5) “大重构周”保姆式陪跑</h3><a class="sl-anchor-link" href="#5-大重构周保姆式陪跑"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5) “大重构周”保姆式陪跑”</span></a></div>
<p><strong>目标</strong>：跨模块重构、升级依赖、统一风格。
<strong>玩法</strong>：借助 <strong>GPT-5-Codex</strong> 的长链路推理，先出重构计划，再按子任务批处理，<strong>每步都可回退</strong>。
<strong>收益</strong>：把高风险变更拆小、可控推进。</p>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="6-内网工具串联mcp-扩展">6) 内网工具串联（MCP 扩展）</h3><a class="sl-anchor-link" href="#6-内网工具串联mcp-扩展"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6) 内网工具串联（MCP 扩展）”</span></a></div>
<p><strong>目标</strong>：让 CLI 会用你们的 wiki/工单/构建平台。
<strong>玩法</strong>：接入自定义 MCP Server，把“查 wiki、建工单、触发流水线”都交给它。
<strong>收益</strong>：私域知识 + 私有流程联动起来，彻底减少上下文切换。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="四和云端-agent的分工">四、和“云端 Agent”的分工</h2><a class="sl-anchor-link" href="#四和云端-agent的分工"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “四、和“云端 Agent”的分工”</span></a></div>
<ul>
<li><strong>Copilot 编码代理（云）</strong>：可开云环境、长时任务、跨仓库操作，现已 GA。</li>
<li><strong>Copilot CLI（本地）</strong>：贴着你的终端做“短平快”，更适合<strong>边写边改</strong>。
<strong>组合拳</strong>：云端跑重活，本地做迭代与确认，<strong>既省心又可控</strong>。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="五团队落地-4-点建议">五、团队落地 4 点建议</h2><a class="sl-anchor-link" href="#五团队落地-4-点建议"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “五、团队落地 4 点建议”</span></a></div>
<ol>
<li><strong>从安全与审计流程起步</strong>：把“每步需确认”写进团队规范。</li>
<li><strong>把常见任务模板化</strong>：如“修复 ESLint 报错、补测试、生成变更日志”。</li>
<li><strong>用 MCP 接内网</strong>：先从只读接入做起，成熟后再放写权限。</li>
<li><strong>模型策略</strong>：能开就开 <strong>GPT-5-Codex</strong>，重构/迁移收益更明显。</li>
</ol>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="六快速上手清单可贴进-readme">六、快速上手清单（可贴进 README）</h2><a class="sl-anchor-link" href="#六快速上手清单可贴进-readme"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “六、快速上手清单（可贴进 README）”</span></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> <code dir="auto">npm i -g @github/copilot</code> 安装与登录</li>
<li class="task-list-item"><input type="checkbox" disabled> 在个人/组织设置里确认 Copilot 计划（Pro/Pro+/Business/Enterprise）</li>
<li class="task-list-item"><input type="checkbox" disabled> 选 1 个试点仓库：限定权限 + 开启“每步确认”</li>
<li class="task-list-item"><input type="checkbox" disabled> 先跑 3 个任务：<strong>读仓库、修一个 issue、补 1 组单测</strong></li>
<li class="task-list-item"><input type="checkbox" disabled> 团队复盘：记录节省时间、失败案例、流程修订项</li>
<li class="task-list-item"><input type="checkbox" disabled> MCP 接入 1 个内部系统，先只读后读写</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p><strong>CLI 并不是又一个“花哨界面”</strong>。它把 Agent 真正落到“你每天用的地方”。
当 AI 能<strong>读懂上下文、按你确认一步步执行</strong>，开发的节奏就会变：你负责决策，它负责体力活。</p>
<p><strong>你会第一个在团队里吃螃蟹吗？你觉得在哪个场景最值？评论区见。</strong></p>
<!-- 
---

# 配图生成建议（插画风，2:1，比例如 1600×800，图片内暂不含中文）

**封面图 Prompt**

> Terminal with an AI co-pilot glowing inside the command line, repo structure and issue/PR icons floating around, subtle GitHub Octocat silhouette, clean flat illustration, wide 2:1 composition, techy but friendly tone, soft gradients, high contrast focus on the terminal.

**关键章节配图 Prompt**

1. “熟悉陌生仓库”

> A developer facing a branching project map emerging from a terminal window, nodes labeled as modules, minimalist flat illustration, 2:1.

2. “从 issue 到 PR”

> A conveyor belt from an issue card into code edits, tests, and a pull request badge, terminal at the center, 2:1.

3. “自动补齐单测”

> Test tubes morphing into green check marks above a terminal, code lines in the background, 2:1.

4. “MCP 扩展”

> Terminal connected via cables to internal tools (wiki, tickets, pipelines) represented as abstract icons, 2:1.

---

# 标题备选（含多语言与 slug）

1. **中文**：把 AI 搬进命令行：Copilot CLI 公测上手与 6 大高频场景
   **English**: Bring AI to the Terminal: Copilot CLI Public Preview & 6 Everyday Workflows
   **繁體**：把 AI 搬進命令列：Copilot CLI 公測上手與 6 大高頻場景
   **日本語**：AI をターミナルへ：Copilot CLI 公開プレビューと6つの日常ワークフロー
   **Français** : L’IA dans le terminal : Copilot CLI en aperçu public & 6 cas quotidiens
   **Español**: IA en tu terminal: Copilot CLI en vista previa pública y 6 flujos diarios
   **Português**: IA no terminal: Copilot CLI em prévia pública & 6 fluxos do dia a dia
   **slug**：**copilot-cli-public-preview-terminal-workflows**

2. **中文**：不光会写，还会干：Copilot CLI 的“可执行计划”有多香？
   **English**: Not Just Code—It Executes: How Good Is Copilot CLI’s Action Plan?
   **繁體**：不只會寫，還會做：Copilot CLI 的「可執行計畫」有多香？
   **日本語**：書くだけじゃない、動く：Copilot CLI の実行計画はどこまで使える？
   **Français** : Pas seulement du code : le plan d’action exécutable de Copilot CLI
   **Español**: No solo escribe: el plan ejecutable de Copilot CLI
   **Português**: Não só escreve: o plano executável do Copilot CLI
   **slug**：**copilot-cli-executable-plans**

3. **中文**：本地效率爆表：用 Copilot CLI 打造“确认即执行”的开发流
   **English**: Local Speedrun: Build a “Confirm-to-Run” Dev Flow with Copilot CLI
   **繁體**：本地效率爆表：用 Copilot CLI 打造「確認即執行」開發流
   **日本語**：ローカル最速：Copilot CLI で“確認して実行”の開発フロー
   **Français** : Turbo local : un flux “confirmer pour exécuter” avec Copilot CLI
   **Español**: Turbo local: un flujo “confirmar y ejecutar” con Copilot CLI
   **Português**: Turbo local: um fluxo “confirmar e executar” com Copilot CLI
   **slug**：**copilot-cli-confirm-to-run**

---

# 朋友圈/评论区 3 条文案

1. **刚把 Copilot CLI 装上，终端里直接“派活 + 执行 + 起 PR”，每步还能预览确认，真的不慌。你敢把重构周交给它吗？**
2. **原来不是我写得慢，是我做了太多“人力跑腿”。Copilot CLI 进终端后，issue 到 PR 一条龙，舒服了。**
3. **MCP 一接，内网工具也能用。CLI 一句话：查文档→改代码→补单测→发 PR。感觉自己像在带一个超熟练实习生。**

---

**参考与延伸阅读**

* 公测发布与安装要点（npm 命令、计划支持、执行前预览）
* 官方“Installing Copilot CLI”安装文档与注意事项
* “About Copilot CLI / Using in command line” 概念与能力说明
* Copilot 编码代理 **GA** 公告（与 CLI 的配合关系）
* **MCP 扩展**官方指南（自定义能力接入）
* **GPT-5-Codex** 在 GitHub Copilot 上线公测（重构/长链路任务更稳）

---

要不要我把**“项目自检 + issue 到 PR + 单测补齐”**做成一套可复制的**CLI 提示词模板**？或者把上面的**插画**直接帮你出图？你说一声，我就开干～满意吗，要不要再**扩写成应用实战**版？

[1]: https://github.blog/changelog/2025-09-25-github-copilot-cli-is-now-in-public-preview/?utm_source=chatgpt.com "GitHub Copilot CLI is now in public preview"
[2]: https://github.blog/changelog/2025-09-25-copilot-coding-agent-is-now-generally-available/?utm_source=chatgpt.com "Copilot coding agent is now generally available"
[3]: https://docs.github.com/copilot/how-tos/agents/copilot-coding-agent/extending-copilot-coding-agent-with-mcp?utm_source=chatgpt.com "Extending GitHub Copilot coding agent with the Model ..."
[4]: https://github.blog/changelog/2025-09-23-openai-gpt-5-codex-is-rolling-out-in-public-preview-for-github-copilot/?utm_source=chatgpt.com "OpenAI GPT-5-Codex is rolling out in public preview for GitHub Copilot"
[5]: https://docs.github.com/en/copilot/how-tos/set-up/install-copilot-cli?utm_source=chatgpt.com "Installing GitHub Copilot CLI"
[6]: https://docs.github.com/copilot/concepts/agents/about-copilot-cli?utm_source=chatgpt.com "About GitHub Copilot CLI"
[7]: https://docs.github.com/en/copilot/concepts/agents/coding-agent/about-coding-agent?utm_source=chatgpt.com "About GitHub Copilot coding agent"
[8]: https://devblogs.microsoft.com/dotnet/copilot-coding-agent-dotnet/?utm_source=chatgpt.com "Let Copilot Coding Agent handle the busy work - .NET Blog" --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ai/" class="astro-sg3lsd66">AI</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/github-copilot/" class="astro-sg3lsd66">GitHub Copilot</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/vs-code/" class="astro-sg3lsd66">VS Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/code-review/" class="astro-sg3lsd66">Code Review</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/commit-message/" class="astro-sg3lsd66">Commit Message</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/vibe-coding-practices/" class="astro-sg3lsd66">Vibe Coding Practices</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/huawei/harmony-os/sop/2025-09-26-harmonyos-3x-claude-code-doc-bdd/" class="astro-dr56dw7m">用 Claude Code + 面向文档编程 + BDD 业务驱动测试，把华为鸿蒙 App 研发提速 3 倍</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-26T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月26日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 用 Claude Code + 面向文档编程 + BDD 业务驱动测试，把华为鸿蒙 App 研发提速 3 倍 -->
<blockquote>
<p>这套方法，专门解决「AI 能写代码，但不懂鸿蒙」「ArkTS 老报错」「回归测试跟不上」三大痛点。
<strong>核心是：用文档驱动 Claude Code，靠 BDD 自动化把质量兜住。</strong></p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="引言别和-ai-胡扯先把文档写好">引言：别和 AI 胡扯，先把文档写好</h2><a class="sl-anchor-link" href="#引言别和-ai-胡扯先把文档写好"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言：别和 AI 胡扯，先把文档写好”</span></a></div>
<p>很多同学一上来就对 AI 说：“帮我做个蓝牙扫描、连接、同步时间的华为鸿蒙 App。”
结果 Claude Code 写得有模有样，<strong>一编译就全红</strong>。熟不熟 ArkTS？懂不懂 ArkUI 生命周期？测试咋回归？都没谱。</p>
<p>鸿蒙官方早就给出 <strong>ArkTS 编码规范</strong>、<strong>ArkUI 声明式开发范式</strong>、<strong>性能实践</strong>，这些是 Claude Code “学不会就老翻车”的坑位标准件 。
而 ArkTS 是 HarmonyOS 的主力语言，和 TypeScript 同宗但有自己的语义与生态，<strong>照 JS 的老习惯写，很容易踩坑</strong> 。
好消息是：Claude Code 已经支持“读仓库、编辑文件、写并运行测试、在终端执行命令”，只要把上下文喂对，它就能稳定输出工程化结果 。</p>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="一面向文档编程让-claude-code-按你说的来">一、面向文档编程：让 Claude Code 按你说的来</h1><a class="sl-anchor-link" href="#一面向文档编程让-claude-code-按你说的来"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一、面向文档编程：让 Claude Code 按你说的来”</span></a></div>
<p><strong>目标</strong>：把需求、价值、实现、验收，一页纸说清楚；让 Claude Code 在鸿蒙语境里“按章施工”。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="1写一页纸需求可直接贴进仓库-docsfeature-xxxmd">1）写「一页纸」需求（可直接贴进仓库 <code dir="auto">/docs/feature-xxx.md</code>）</h3><a class="sl-anchor-link" href="#1写一页纸需求可直接贴进仓库-docsfeature-xxxmd"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1）写「一页纸」需求（可直接贴进仓库 /docs/feature-xxx.md）”</span></a></div>
<ul>
<li>
<p><strong>功能</strong>：蓝牙设备扫描 → 列表展示 → 连接 → 同步时间 → 读状态 → 发送命令 → 断开</p>
</li>
<li>
<p><strong>业务价值</strong>：门店导购 1 分钟完成设备初始化，减少 80% 人工失误</p>
</li>
<li>
<p><strong>平台</strong>：HarmonyOS NEXT，ArkTS + ArkUI；DevEco Studio 构建</p>
</li>
<li>
<p><strong>接口/模型</strong>：设备名以 <code dir="auto">XX</code> 开头；连接后展示电量；发送“注入”命令回传成功标志</p>
</li>
<li>
<p><strong>验收标准（BDD 口吻）</strong>：</p>
<ul>
<li><strong>Given</strong> 应用在首页</li>
<li><strong>When</strong> 点击「Start Scan」，在列表看到以 <code dir="auto">XX</code> 开头的设备并点击 Connect</li>
<li><strong>Then</strong> 进入已连接页，看到设备名/电量；点击「Sync Time」「Refresh Status」「Send injection Command」均返回成功</li>
</ul>
</li>
</ul>
<blockquote>
<p>ArkTS/ArkUI 的关键约束与最佳实践，记得在文档里抄要点：命名、状态管理、性能注意事项等（来自官方风格指南与状态管理指引）。<strong>把规范直接贴给 Claude Code</strong>，它会在生成时遵守这些规则 。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="2给-claude-code-的首条系统提示贴进-claudeprimermd">2）给 Claude Code 的首条系统提示（贴进 <code dir="auto">.claude/primer.md</code>）</h3><a class="sl-anchor-link" href="#2给-claude-code-的首条系统提示贴进-claudeprimermd"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2）给 Claude Code 的首条系统提示（贴进 .claude/primer.md）”</span></a></div>
<ul>
<li>项目框架（ArkUI 页面结构、目录约定）</li>
<li>ArkTS 代码风格要求（变量/组件命名、可空判断、错误处理）</li>
<li>组件清单 &#x26; 事件流（Button → 扫描 → 列表 → 连接）</li>
<li><strong>测试先行</strong>：先生成 BDD 场景与 ArkTS 测试桩，再补业务代码</li>
<li>失败重试：编译错误→阅读错误→只改最小集</li>
</ul>
<blockquote>
<p>官方与社区都强调 <strong>以规范驱动编码</strong>，这能显著减少返工量与性能问题 。
Claude Code 本身也建议<strong>定制上下文与环境</strong>（例如忽略无关文件、给它一份专用 README/CONTRIBUTING），能明显提高命中率 。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="3把流程说明--验收步骤贴到-readme">3）把“流程说明 + 验收步骤”贴到 README</h3><a class="sl-anchor-link" href="#3把流程说明--验收步骤贴到-readme"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3）把“流程说明 + 验收步骤”贴到 README”</span></a></div>
<p>下图是<strong>我们这次功能的人工验收步骤</strong>，用于人工核对与给 Claude Code 读上下文：</p>
<p><starlight-image-zoom-zoomable><img src="/mnt/data/a67c815f-5bb0-4fa0-aee7-a1010989a1ab.png" alt="Index/Connected 手工验收说明"><button aria-label="Zoom image: Index/Connected 手工验收说明" class="starlight-image-zoom-control"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24"><use href="#starlight-image-zoom-icon-zoom"></use></svg></button></starlight-image-zoom-zoomable></p>
<blockquote>
<p>这段文字会被 Claude Code 当成“<strong>可执行文档</strong>”来吸收：它能先写 UI 流，再补逻辑与测试（Claude 官方宣称可“写并运行测试、编辑文件、提交代码”）。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="二bdd-业务驱动测试把文档变成可执行规范">二、BDD 业务驱动测试：把“文档”变成“可执行规范”</h1><a class="sl-anchor-link" href="#二bdd-业务驱动测试把文档变成可执行规范"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “二、BDD 业务驱动测试：把“文档”变成“可执行规范””</span></a></div>
<p><strong>一句话</strong>：需求写成 Gherkin 场景，测试跑在 DevEco/arkXtest 框架上，<strong>测试红→AI 修→再测绿</strong>。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="1用-gherkin-描述业务">1）用 Gherkin 描述业务</h3><a class="sl-anchor-link" href="#1用-gherkin-描述业务"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1）用 Gherkin 描述业务”</span></a></div>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="gherkin"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">Feature</span><span style="--0:#D6DEEB;--1:#403F53">:</span><span style="--0:#ECC48D;--1:#3B61B0"> Scan and connect device</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">Scenario</span><span style="--0:#D6DEEB;--1:#403F53">:</span><span style="--0:#ECC48D;--1:#3B61B0"> Find and connect device with prefix XX</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">Given </span><span style="--0:#D6DEEB;--1:#403F53">App on Index Page</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">When </span><span style="--0:#D6DEEB;--1:#403F53">I tap </span><span style="--0:#ECC48D;--1:#984E4D">"Start Scan"</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">Then </span><span style="--0:#D6DEEB;--1:#403F53">I should see a device starting with </span><span style="--0:#ECC48D;--1:#984E4D">"XX"</span><span style="--0:#D6DEEB;--1:#403F53"> in the list</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">When </span><span style="--0:#D6DEEB;--1:#403F53">I tap </span><span style="--0:#ECC48D;--1:#984E4D">"Connect"</span><span style="--0:#D6DEEB;--1:#403F53"> on that device</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">Then </span><span style="--0:#D6DEEB;--1:#403F53">I should be on Connected Page with name and battery shown</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Feature: Scan and connect device  Scenario: Find and connect device with prefix XX    Given App on Index Page    When I tap &#x22;Start Scan&#x22;    Then I should see a device starting with &#x22;XX&#x22; in the list    When I tap &#x22;Connect&#x22; on that device    Then I should be on Connected Page with name and battery shown"><div></div></button></div></figure></div>
<blockquote>
<p>Gherkin/BDD 的优势是把“业务语言”直接变成<strong>可执行的规格</strong>，持续校验系统行为是否和文档一致 。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="2arkts-测试落地选型">2）ArkTS 测试落地选型</h3><a class="sl-anchor-link" href="#2arkts-测试落地选型"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2）ArkTS 测试落地选型”</span></a></div>
<ul>
<li><strong>DevEco/arkXtest 体系</strong>：提供 <strong>单元测试 + UI 测试 + 性能测试</strong> 的统一框架；UI 测试脚本执行在单测之上，满足端到端验证需求 。</li>
<li><strong>IDE 支持</strong>：DevEco Studio 集成了测试框架与代码测试入口，便于在真机/模拟器执行 。</li>
</ul>
<blockquote>
<p>一些资料还提到 HarmonyOS/ArkTS 在 NEXT 版本对测试能力升级，支持更现代的写法与参数化等技巧，可按需借鉴到你的工程模板里（以官方与权威资料为准） 。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="3示例ui-场景测试骨架摘自实际项目结构">3）示例：UI 场景测试骨架（摘自实际项目结构）</h3><a class="sl-anchor-link" href="#3示例ui-场景测试骨架摘自实际项目结构"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3）示例：UI 场景测试骨架（摘自实际项目结构）”</span></a></div>
<p><starlight-image-zoom-zoomable><img src="/mnt/data/e7abf7c3-ef3d-4faf-beeb-e80911484aab.png" alt="ArkTS UI 场景测试片段"><button aria-label="Zoom image: ArkTS UI 场景测试片段" class="starlight-image-zoom-control"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24"><use href="#starlight-image-zoom-icon-zoom"></use></svg></button></starlight-image-zoom-zoomable></p>
<p>这个测试干了三件事：</p>
<ol>
<li>若未扫描就尝试点「Start Scan」，否则写日志跳过</li>
<li>等待发现设备</li>
<li>定位包含指定前缀的设备并点击连接，<strong>断言进入已连接页</strong></li>
</ol>
<blockquote>
<p>这类 UI 测试用例结构，和 arkXtest 的设计思路一致：<strong>用 API 驱动 UI 操作，统一在测试框架里收敛结果</strong> 。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="4把测试红ai-修复再测绿做成流水线">4）把“测试红→AI 修复→再测绿”做成流水线</h3><a class="sl-anchor-link" href="#4把测试红ai-修复再测绿做成流水线"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4）把“测试红→AI 修复→再测绿”做成流水线”</span></a></div>
<ul>
<li><strong>Claude Code 回路</strong>：失败就把<strong>编译/运行日志</strong>贴回对话，让它最小改动修复（Claude 官方建议的“环境调优 + 上下文最小化”在这里很关键） 。</li>
<li><strong>IDE/CI 集成</strong>：在 DevEco Studio 本地一键跑；CI 上接入真机/模拟器跑回归（参考 DevEco 测试入口与官方测试文档） 。</li>
<li><strong>可视化验收</strong>：把前面的<strong>人工验收步骤图</strong>放到 wiki，每个版本都跑 Gherkin + UI 测试，保证“文档即真相”。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="三落地手册从-0-到-1-的-7-步-checklist">三、落地手册：从 0 到 1 的 7 步 Checklist</h1><a class="sl-anchor-link" href="#三落地手册从-0-到-1-的-7-步-checklist"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “三、落地手册：从 0 到 1 的 7 步 Checklist”</span></a></div>
<p><strong>Step 1｜项目初始化</strong></p>
<ul>
<li>DevEco Studio 创建 ArkTS 项目；选择 ArkUI 声明式范式；确认目标 API/设备。</li>
<li>建议拉一份 <strong>ArkTS 风格指南</strong> 与 <strong>性能实践</strong> 入库 <code dir="auto">/guides</code>，供人和 AI 同时参考 。</li>
</ul>
<p><strong>Step 2｜一页纸需求</strong></p>
<ul>
<li>写清功能、价值、接口、状态、异常、<strong>验收场景（Given/When/Then）</strong>。</li>
<li>把截图式的人工验收步骤放进 README（上文配图那段）。</li>
</ul>
<p><strong>Step 3｜Claude Code 启动</strong></p>
<ul>
<li>把 <code dir="auto">.claude/primer.md</code> 和 <code dir="auto">/docs</code> 作为<strong>首要上下文</strong>；限制它读取无关大文件。</li>
<li>让它<strong>先生成测试桩 &#x26; Gherkin</strong>，再补业务代码与 ArkUI 页面 。</li>
</ul>
<p><strong>Step 4｜ArkTS/ArkUI 编码</strong></p>
<ul>
<li>遵守命名、组件化、状态管理约束；注意性能实践与可空/异常处理 。</li>
</ul>
<p><strong>Step 5｜测试实现</strong></p>
<ul>
<li>采用 <strong>arkXtest / DevEco 测试</strong> 跑单测+UI 测试；把 Gherkin 作为顶层用例描述（可在步骤定义里调用 UI 测试 API） 。</li>
</ul>
<p><strong>Step 6｜循环修复</strong></p>
<ul>
<li>失败日志丢给 Claude Code 进行<strong>最小修复</strong>；本地/CI 循环跑到全绿 。</li>
</ul>
<p><strong>Step 7｜沉淀知识库</strong></p>
<ul>
<li>把踩坑 &#x26; FAQ 记录到 <code dir="auto">/kb</code>：如 BLE 权限、生命周期、列表性能。</li>
<li>下一次仅需改“一页纸”和少量步骤描述，Claude Code 就能<strong>复用上下文继续生成</strong>。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="四效果质量速度认知三线齐飞">四、效果：质量、速度、认知，三线齐飞</h1><a class="sl-anchor-link" href="#四效果质量速度认知三线齐飞"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “四、效果：质量、速度、认知，三线齐飞”</span></a></div>
<ul>
<li><strong>速度</strong>：有了“文档即代码”的喂法，Claude Code 在鸿蒙项目上更稳定，<strong>减少来回猜</strong> 。</li>
<li><strong>质量</strong>：arkXtest + DevEco 测试把<strong>单测/UI/性能</strong>拉齐，回归自动化，人工只做探索式验证 。</li>
<li><strong>认知</strong>：规范与性能实践写进文档，<strong>人和 AI 同一套规则</strong>，新同学 1 天能上手 ArkTS/ArkUI 的基本套路 。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="五可复制模板你可以直接拷走">五、可复制模板（你可以直接拷走）</h1><a class="sl-anchor-link" href="#五可复制模板你可以直接拷走"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “五、可复制模板（你可以直接拷走）”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="文档目录建议">文档目录建议</h3><a class="sl-anchor-link" href="#文档目录建议"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “文档目录建议”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">/docs</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">feature-ble-connect.md      # 一页纸需求+验收</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">ui-flow.md                  # 界面流程与状态</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">/guides</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">arkts-style-guide.md        # 摘抄+链接官方规范</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">performance-notes.md        # ArkTS 性能实践</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">/tests</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">features/ble_connect.feature  # Gherkin</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">ui/ble_connect.test.ets       # UI 场景测试</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">.kb</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">ble-permissions.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">.claude/primer.md</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="/docs  feature-ble-connect.md      # 一页纸需求+验收  ui-flow.md                  # 界面流程与状态/guides  arkts-style-guide.md        # 摘抄+链接官方规范  performance-notes.md        # ArkTS 性能实践/tests  features/ble_connect.feature  # Gherkin  ui/ble_connect.test.ets       # UI 场景测试.kb  ble-permissions.md.claude/primer.md"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="feature-ble-connectmd-片段"><code dir="auto">feature-ble-connect.md</code> 片段</h3><a class="sl-anchor-link" href="#feature-ble-connectmd-片段"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “feature-ble-connect.md 片段”</span></a></div>
<ul>
<li>背景/价值</li>
<li>约束（API/权限/设备前缀）</li>
<li><strong>验收场景</strong>（5～7 条 Given/When/Then）</li>
<li>灰度/回滚策略</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语让文档测试代码成闭环">结语：让“文档—测试—代码”成闭环</h2><a class="sl-anchor-link" href="#结语让文档测试代码成闭环"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语：让“文档—测试—代码”成闭环”</span></a></div>
<p>当你把<strong>文档写到能直接验收</strong>，Claude Code 才有可能一次就写对 ArkTS；
当你把<strong>BDD 场景跑起来</strong>，每个版本都能一键回归。
这就是我们在鸿蒙项目里稳定拿到“<strong>更快的速度 + 更稳的质量</strong>”的原因。</p>
<p>你觉得这套玩法还缺什么？<strong>评论区聊聊你的场景</strong>。</p>
<!-- 
---

## 推荐标题（多语 & slug）

1. **把鸿蒙 App 研发提速 3 倍：Claude Code × 文档驱动 × BDD 回归闭环**

   * EN: Triple Your HarmonyOS Dev Speed: Claude Code × Doc-Driven × BDD
   * 繁體: 把鴻蒙 App 研發提速 3 倍：Claude Code × 文件驅動 × BDD
   * 日本語: HarmonyOS開発を3倍速に：Claude Code × ドキュメント駆動 × BDD
   * FR: Développez 3× plus vite sur HarmonyOS : Claude Code × Docs × BDD
   * ES: Triplica tu desarrollo HarmonyOS: Claude Code × Docs × BDD
   * PT: Triplique seu dev no HarmonyOS: Claude Code × Docs × BDD
   * slug: `harmonyos-3x-claude-code-doc-bdd`

2. **AI 会写但别乱写：用一页纸文档+BDD，让 ArkTS 不再红**

   * EN: AI Writes, You Control: One-Pager + BDD to Keep ArkTS Green
   * 繁體: AI 會寫但別亂寫：一頁紙 + BDD，ArkTS 不再紅
   * 日本語: AIに任せすぎない：One-Pager＋BDDでArkTSを常時グリーン
   * FR: L’IA code, vous cadrez : One-Pager + BDD pour un ArkTS au vert
   * ES: La IA codifica, tú mandas: One-Pager + BDD para ArkTS en verde
   * PT: IA codifica, você comanda: One-Pager + BDD para ArkTS verde
   * slug: `arkts-one-pager-bdd-green`

3. **从文档到可执行：Claude Code 把需求直接跑成测试与代码**

   * EN: From Docs to Executable: Claude Code Turns Specs into Tests & Code
   * 繁體: 從文件到可執行：Claude Code 把需求變成測試與程式
   * 日本語: 仕様が走る：Claude Codeがテストとコードに直変換
   * FR: Des specs au code exécutable : Claude Code en action
   * ES: De la especificación al código ejecutable con Claude Code
   * PT: Da especificação ao código executável com Claude Code
   * slug: `docs-to-executable-claude-code`

---

## 封面与配图（插画风 2:1，英文文字）

> 你可以把下面的提示词交给画图工具使用（不在图片内显示中文）。

**封面图 Prompt**
“Clean illustration, wide 2:1 canvas. A developer bridges three pillars labeled ‘Claude Code’, ‘Doc-Driven’, and ‘BDD’. Minimal HarmonyOS-style UI elements, terminal window, and test green checkmarks. Soft gradients, modern tech vibe.”

**章节配图 1｜面向文档编程**
“2:1 illustration. A single ‘One-Pager Spec’ sheet feeding into a code editor with ArkTS/ArkUI components. Arrows from spec to code, checklist icons.”

**章节配图 2｜BDD 自动化回归**
“2:1 illustration. Gherkin feature blocks flowing into a test runner dashboard. Red-to-green progress bar, device emulator, and CI badge.”

> 真实项目截图已插入相应段落（测试代码与人工验收步骤）。

---

## 朋友圈/评论区爆款文案（3 选 1）

1. “AI 能写代码，但别让它乱写。试了这招：一页纸+BDD，Claude Code 在鸿蒙项目里第一次就过编译，回归一键全绿，真香～”
2. “以前写鸿蒙，编译器天天骂我。现在先写文档再写代码，Claude Code 乖得像实习生，ArkTS 不再红。”
3. “把需求写成 Gherkin，让文档自己会跑。鸿蒙 App 研发提速 3 倍，周末还能健身了。”

---

需要我把**一页纸模板、Gherkin 示例、arkXtest 框架脚手架**打成仓库结构给你？或者针对你现在的功能点，**直接出一套可跑的测试与页面骨架**也行。你说需求，我这就开干。 --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ddd/" class="astro-sg3lsd66">DDD</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/doocumentation-driven-development/" class="astro-sg3lsd66">Doocumentation-Driven Development</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/bdd/" class="astro-sg3lsd66">BDD</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/behavior-driven-development/" class="astro-sg3lsd66">Behavior-Driven Development</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/arkts/" class="astro-sg3lsd66">ArkTS</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/harmonyos/" class="astro-sg3lsd66">HarmonyOS</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ble/" class="astro-sg3lsd66">BLE</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/bluetooth-low-energy/" class="astro-sg3lsd66">Bluetooth Low Energy</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/finance/us-market/2025-09-25-us-index-funds-longterm-sp500-nasdaq100-vgt/" class="astro-dr56dw7m">普通人也能跑赢大盘 5:2:1 配置法 标普500+纳指100+VGT</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-25T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月25日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 普通人也能跑赢大盘 5:2:1 配置法 标普500+纳指100+VGT -->
<div class="sl-heading-wrapper level-h2"><h2 id="省流版">省流版</h2><a class="sl-anchor-link" href="#省流版"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “省流版”</span></a></div>
<ul>
<li>按照 5:2:1 比例配置三只美股指数基金（标普500：纳斯达克100：信息科技板块）。</li>
<li>按计划长期持有并定期再平衡，依据资金规模、收益目标与风险承受能力动态微调。</li>
</ul>
<blockquote>
<p>一个成功的投资者，85%归功于正确的资产配置，10%来自于选择投资目标的功力，5%必须靠上帝的保佑。
— 威廉·夏普</p>
</blockquote>
<p>长期投资遵循“大道至简”的原则：普通投资者只需要长期持有一两只美股指数基金，就足以获得良好的资产增值效果。作为美国股市市值最大的500家公司综合指数，标普500涵盖了信息科技、消费、金融、医疗健康等主要行业，被视为美国股市整体表现的晴雨表。例如“股神”沃伦·巴菲特多次力荐标普500指数基金，并在遗嘱中规划其90%的个人资产投入标普500指数基金，以此彰显对该指数长期稳健回报的信心。对于国内投资者，可通过场内基金 513500（博时标普500 ETF）进行投资。</p>
<p>然而，仅有标普500指数基金并非唯一选择。根据自身风险偏好，投资者还可加入纳斯达克100指数基金和信息科技板块基金（VGT），构建一个“三足鼎立”的美股指数基金组合。下面分别介绍这三类值得长期持有的指数基金，以及如何按照 5:2:1 比例进行配置。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="标普500指数基金美国股市的核心基石">标普500指数基金：美国股市的核心基石</h2><a class="sl-anchor-link" href="#标普500指数基金美国股市的核心基石"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “标普500指数基金：美国股市的核心基石”</span></a></div>
<p>标普500指数（S&#x26;P 500）由美国市值最大的500家上市公司构成，涵盖从科技、消费到能源、公用事业在内的广泛行业板块。正因其成分股多元且权重分散，标普500指数基金通常被视为投资美国股市的首选核心资产。历史统计显示，标普500指数长期年化回报约在 10% 左右，且波动相对温和，适合大多数寻求稳定增长的投资者。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="优势">优势</h3><a class="sl-anchor-link" href="#优势"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “优势”</span></a></div>
<ul>
<li>分散投资：覆盖 500 家公司，不依赖个别股票，充分分散非系统性风险；指数成分市值占美国股市绝大部分，等于“一键买入美国经济”。</li>
<li>长期稳健增长：历经多次牛熊周期仍不断创出新高，长期滚动区间内取得正回报的概率高。</li>
<li>投资大师背书：不少投资大师提倡普通人定投标普500指数基金；巴菲特长期力荐“买入并持有”。</li>
</ul>
<p>需要注意，标普500指数基金仍会受经济周期影响出现阶段性回撤，但相比更窄基指数，其波动风险较低。对于风险承受能力一般的投资者，标普500指数基金完全可以作为终身持有的单一基金组合。国内投资者可关注 513500 这只跟踪标普500的场内基金。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="纳斯达克100指数基金科技龙头的高成长机会">纳斯达克100指数基金：科技龙头的高成长机会</h2><a class="sl-anchor-link" href="#纳斯达克100指数基金科技龙头的高成长机会"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “纳斯达克100指数基金：科技龙头的高成长机会”</span></a></div>
<p>纳斯达克100指数（Nasdaq-100）由纳斯达克交易所市值最大的100家非金融公司组成，因其科技股权重高而闻名。该指数涵盖苹果、微软、Alphabet（谷歌母公司）、亚马逊、英伟达等众多科技巨头。凭借对高增长行业的集中暴露，纳斯达克100指数过去几十年的年化总回报率显著高于标普500。</p>
<p>纳斯达克100指数基金的特点可以概括为：</p>
<ul>
<li>重配科技成长：信息技术等高增长板块占比高，长期收益往往优于大盘。</li>
<li>波动性较高：高收益伴随高波动，市场下跌时回撤更剧烈（如 2000–2002 年与 2022 年阶段）。</li>
<li>成分偏向新兴行业：多来自科技、通信服务、可选消费等领域，契合未来方向，但抗跌能力偏弱。</li>
</ul>
<p>总的来说，纳斯达克100指数基金提供了分享美国科技龙头成长的机会。其长期收益优异但短期波动较大，适合有一定风险承受能力、能忍受净值大幅波动的投资者。国内投资者可通过嘉实纳斯达克100 ETF（场内代码 159501）投资该指数。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="信息科技板块基金vgt把握科技行业整体红利">信息科技板块基金（VGT）：把握科技行业整体红利</h2><a class="sl-anchor-link" href="#信息科技板块基金vgt把握科技行业整体红利"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “信息科技板块基金（VGT）：把握科技行业整体红利”</span></a></div>
<p>信息科技板块基金专注投资信息技术行业。以先锋集团的 Vanguard 信息科技 ETF（代码 VGT）为例：VGT 跟踪 MSCI 美国 IMI 信息科技 25/50 指数，持有 300+ 家信息科技公司股票，覆盖英伟达、苹果、微软、博通等大型科技企业及众多中小型科技公司。与纳斯达克100类似，VGT 高度集中于科技板块，但覆盖范围更广（不限于纳斯达克上市公司）。</p>
<p>将信息科技板块基金纳入组合，目的是获取科技行业的超额收益。过去十年里，VGT 的表现阶段性优于纳斯达克100：中小市值科技股在科技热潮中贡献了额外涨幅。不过，更高的回报伴随更高的风险。科技板块在利率上行或市场恐慌时往往首当其冲，纯科技 ETF 在波动市中净值回撤更大。2022 年科技股熊市中，VGT 最大跌幅接近 -35%，略高于同期纳指100的最大回撤。</p>
<p>这类基金更适合对科技前景高度看好、且个人风险承受能力较强的投资者。对于已经实现财务自由或投资经验丰富的人士，适当配置以追求更高收益未尝不可；但普通投资者若风险偏好较低，可以不配置或降低配比。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="521-配置策略与定期再平衡">5:2:1 配置策略与定期再平衡</h2><a class="sl-anchor-link" href="#521-配置策略与定期再平衡"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5:2:1 配置策略与定期再平衡”</span></a></div>
<p>面向以上三类指数基金，一个简明的组合策略是按 5:2:1 比例配置：约 62.5% 配置标普500、25% 配置纳斯达克100、12.5% 配置信息科技板块基金。理念在于：</p>
<ul>
<li>核心持仓（约 5 成）：标普500 提供稳定基础与广泛分散，获取美国经济平均增长。</li>
<li>卫星持仓（约 2 成）：纳斯达克100 增厚组合长期收益，分享大型科技成长。</li>
<li>进取持仓（约 1 成）：信息科技板块提高进攻性，在景气周期获得更大弹性。</li>
</ul>
<p>该组合兼顾稳健与进取，可按个人情况微调。例如，保守者可降低纳指与科技基金比重（如 7:2:1 或 8:1:1），进取者可适度提高进取部分。应根据市场变化与财务目标定期再平衡，将各资产权重调回预设水平，以保持风险收益匹配。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="总结">总结</h2><a class="sl-anchor-link" href="#总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “总结”</span></a></div>
<p>标普500、纳斯达克100与信息科技板块基金可组成长期持有的三足组合：既有覆盖全面、稳健增长的核心基石，又有把握科技浪潮的高增长引擎。大多数投资者依据自身风险承受力采用适当比例配置，并长期坚持投资、定期平衡组合，有望获得良好的风险调整后回报，助力财富长期增值。与其频繁择时和炒作个股，不如建立简单高效的指数基金组合并长期持有，穿越牛熊。</p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/finance/" class="astro-sg3lsd66">Finance</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/us-market/" class="astro-sg3lsd66">US Market</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/investment/" class="astro-sg3lsd66">Investment</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/index-funds/" class="astro-sg3lsd66">Index Funds</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/sp-500/" class="astro-sg3lsd66">S&amp;P 500</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/nasdaq-100/" class="astro-sg3lsd66">Nasdaq 100</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/vgt/" class="astro-sg3lsd66">VGT</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/openai/codex/2025-09-25-config-toml-no-more-long-commands/" class="astro-dr56dw7m">Codex 的常用选项放到配置文件</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-25T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月25日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <p>咱把那些一长串的 CLI 选项都收进一个 <code dir="auto">config.toml</code>，以后直接用就行。</p>
<p>下面是<strong>可直接粘贴</strong>的版本，已经把你给的选项排好行、加了注释（TOML 里用 <code dir="auto">#</code> 做行注释）：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame has-title not-content"><figcaption class="header"><span class="title">~/.codex/config.toml</span></figcaption><pre data-language="toml"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># All keys are top-level unless放到 [table] 里</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 注：TOML 用 # 注释，没有块注释语法</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 推理相关</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">model</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">gpt-5-codex</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">model_reasoning_effort</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">high</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">model_reasoning_summary</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">detailed</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 审批与执行策略</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">approval_policy</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">never</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#919F9F;--1:#5F636F"># 跳过每步确认，自动执行</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 沙箱与网络</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">sandbox_mode</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">danger-full-access</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#919F9F;--1:#5F636F"># 风险很高：几乎不做隔离，慎用</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">network_access</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#D6DEEB;--1:#403F53">                  </span><span style="--0:#919F9F;--1:#5F636F"># 允许联网</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># Shell 环境策略</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[shell_environment_policy]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">inherit</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">all</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">                        </span><span style="--0:#919F9F;--1:#5F636F"># 继承所有环境变量</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">ignore_default_excludes</span><span style="--0:#D6DEEB;--1:#403F53"> = </span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#919F9F;--1:#5F636F"># 不忽略默认屏蔽清单</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# All keys are top-level unless放到 [table] 里# 注：TOML 用 # 注释，没有块注释语法# 推理相关model = &#x22;gpt-5-codex&#x22;model_reasoning_effort = &#x22;high&#x22;model_reasoning_summary = &#x22;detailed&#x22;# 审批与执行策略approval_policy = &#x22;never&#x22;              # 跳过每步确认，自动执行# 沙箱与网络sandbox_mode = &#x22;danger-full-access&#x22;    # 风险很高：几乎不做隔离，慎用network_access = true                  # 允许联网# Shell 环境策略[shell_environment_policy]inherit = &#x22;all&#x22;                        # 继承所有环境变量ignore_default_excludes = false        # 不忽略默认屏蔽清单"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="放到哪里">放到哪里？</h3><a class="sl-anchor-link" href="#放到哪里"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “放到哪里？”</span></a></div>
<p>路径是 <code dir="auto">~/.codex/config.toml</code></p>
<div class="sl-heading-wrapper level-h3"><h3 id="一步到位的小命令">一步到位的小命令</h3><a class="sl-anchor-link" href="#一步到位的小命令"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一步到位的小命令”</span></a></div>
<p>不想手写的话，用这两行创建文件并打开（按你喜欢的编辑器改 <code dir="auto">vim</code>）：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-p</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">~/.codex</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3B61B0">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">~/.codex/config.toml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="mkdir -p ~/.codex &#x26;&#x26; vim ~/.codex/config.toml"><div></div></button></div></figure></div>
<p>想用 XDG 规范位置：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">mkdir</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-p</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">~/.config/codex</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3B61B0">vim</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">~/.config/codex/config.toml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="mkdir -p ~/.config/codex &#x26;&#x26; vim ~/.config/codex/config.toml"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="可选快速自检">可选：快速自检</h3><a class="sl-anchor-link" href="#可选快速自检"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “可选：快速自检”</span></a></div>
<p>TOML 有格式错误会让工具读不到。你可以用 Python 3.11+ 自带的 <code dir="auto">tomllib</code> 做一次语法校验：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">python</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">&#x3C;&#x3C;</span><span style="--0:#D9F5DD;--1:#111111">'PY'</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">import tomllib, pathlib</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">p = pathlib.Path.home()/'.codex'/'config.toml'</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">with p.open('rb') as f:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#984E4D">    </span></span><span style="--0:#ECC48D;--1:#984E4D">tomllib.load(f)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">print('TOML OK at', p)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">PY</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="python - <<&#x27;PY&#x27;import tomllib, pathlibp = pathlib.Path.home()/&#x27;.codex&#x27;/&#x27;config.toml&#x27;with p.open(&#x27;rb&#x27;) as f:    tomllib.load(f)print(&#x27;TOML OK at&#x27;, p)PY"><div></div></button></div></figure></div>
<blockquote>
<p>说明：TOML 的注释必须每行用 <code dir="auto">#</code>，没有 <code dir="auto">/* ... */</code> 这种块注释；键值是 <code dir="auto">key = value</code>，表用 <code dir="auto">[table]</code>。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="安全小贴士很重要">安全小贴士（很重要）</h3><a class="sl-anchor-link" href="#安全小贴士很重要"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “安全小贴士（很重要）”</span></a></div>
<ul>
<li><code dir="auto">danger-full-access</code> = 几乎<strong>不做隔离</strong>的执行环境。只在你非常确定命令来源、并且代码仓库可信的场景下启用。日常建议切回更安全的沙箱模式（如果支持）。</li>
<li><code dir="auto">approval_policy = "never"</code> 会<strong>自动执行</strong>，省心也更危险；做破坏性操作（删库、批量重命名、<code dir="auto">rm -rf</code>）前，临时改成需要确认的策略更稳。</li>
</ul>
<!-- 
如果你愿意，把你现在 `codex` 的典型命令贴一个给我，我可以把**所有常用开关**也收进这个配置里（比如默认工作目录、日志级别、缓存目录、代理设置等），让你达到“零参数启动”的效果。

要不要我再根据你的习惯，出一版**更安全的默认配置**？

[1]: https://toml.io/en/?utm_source=chatgpt.com "TOML: Tom's Obvious Minimal Language"
[2]: https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html?utm_source=chatgpt.com "XDG Base Directory Specification" --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/codex/" class="astro-sg3lsd66">Codex</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/openai/" class="astro-sg3lsd66">OpenAI</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/openai/codex/bmad/2025-09-25-bmad-with-codex-ai-squad/" class="astro-dr56dw7m">在 Codex 里像 Claude Code 一样用 BMAD：把多角色 AI 团队装进你的仓库</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-25T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月25日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 在 Codex 里像 Claude Code 一样用 BMAD：把“多角色 AI 团队”装进你的仓库 -->
<blockquote>
<p>装好 Codex 与 BMAD，把 BMAD 的“多角色专家”挂到 <code dir="auto">AGENTS.md</code>，在终端直接喊 “*agent analyst”，Codex 就能按 BMAD 的敏捷流程带你做完从需求到交付的闭环。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="引言">引言</h2><a class="sl-anchor-link" href="#引言"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言”</span></a></div>
<p>做项目最怕两件事：<strong>没人写清需求</strong>，<strong>写了又没人照着落地</strong>。
BMAD 把“业务分析、架构、产品、开发、测试、Scrum”等角色，做成一套可版本化的 Markdown 代理。配合 Codex 的 <code dir="auto">AGENTS.md</code>，你就像带着一支 AI 小分队在干活。</p>
<blockquote>
<p>这篇就是<strong>最实用的上手路线</strong>：
1）安装 BMAD；
2）改 <code dir="auto">AGENTS.md</code> 挂上 BMAD 角色；
3）一条提示词把 <strong>Analyst</strong> 拉进来开工。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="为什么用-codex--bmad">为什么用 Codex + BMAD？</h2><a class="sl-anchor-link" href="#为什么用-codex--bmad"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “为什么用 Codex + BMAD？”</span></a></div>
<ul>
<li><strong>Codex 读得懂 <code dir="auto">AGENTS.md</code></strong>，会按你的项目习惯来构建、测试、提 PR，支持本地 CLI 与 IDE。</li>
<li><strong>BMAD 提供可复用的“Agent as Code”</strong>：每个角色都是一个 <code dir="auto">.md</code>，自带任务、清单、模板与工作流。</li>
<li><strong>两者合体</strong>＝“项目规则 + 多角色协作 + 可执行检查”。用起来更像一支真团队。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="步骤一安装-bmad3-分钟快走法">步骤一：安装 BMAD（3 分钟快走法）</h2><a class="sl-anchor-link" href="#步骤一安装-bmad3-分钟快走法"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “步骤一：安装 BMAD（3 分钟快走法）”</span></a></div>
<blockquote>
<p>先保证 Node.js v20+。</p>
</blockquote>
<p>在你的项目根目录运行：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 推荐的一键装/升级</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npx</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-method</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 或已安装过就：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">git</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">clone</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">https://github.com/bmad-code-org/BMAD-METHOD</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">BMAD-METHOD</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">git</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pull</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install:bmad</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npx bmad-method installgit clone https://github.com/bmad-code-org/BMAD-METHODcd BMAD-METHODgit pullnpm run install:bmad"><div></div></button></div></figure></div>
<p>这会把 BMAD 的核心结构与脚本落到项目里（含 <code dir="auto">.bmad-core</code> 目录、模板与脚本），并为后续代理工作做准备。</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">❯</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">npx</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-method</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">██████╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">███╗</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">███╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">█████╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">██████╗</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3B61B0">███╗</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">███╗███████╗████████╗██╗</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">██████╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">██████╗</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">██╔══██╗████╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">████║██╔══██╗██╔══██╗</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3B61B0">████╗</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">████║██╔════╝╚══██╔══╝██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║██╔═══██╗██╔══██╗</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">██████╔╝██╔████╔██║███████║██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║█████╗██╔████╔██║█████╗</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">███████║██║</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">██║██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">██╔══██╗██║╚██╔╝██║██╔══██║██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║╚════╝██║╚██╔╝██║██╔══╝</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">██╔══██║██║</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">██║██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">██████╔╝██║</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">██║██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║██████╔╝</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">██║███████╗</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">██║</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">██║╚██████╔╝██████╔╝</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">╚═════╝</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝╚═╝</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝╚═════╝</span><span style="--0:#D6DEEB;--1:#403F53">       </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝╚══════╝</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">╚═╝</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">╚═════╝</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">╚═════╝</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">🚀</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Universal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">AI</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Framework</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Any</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Domain</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✨</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Installer</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">v4.43.1</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Enter the full path to your project directory where BMad should be installed:</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Select what to install/update (</span><span style="--0:#82AAFF;--1:#3B61B0">use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">space</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">select,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">enter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">continue</span><span style="--0:#D6DEEB;--1:#403F53">): BMad Agile Core System (</span><span style="--0:#82AAFF;--1:#3B61B0">v4.43.1</span><span style="--0:#D6DEEB;--1:#403F53">) .bmad-core</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">📋</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Document</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Organization</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Settings</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Configure</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">how</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">your</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">project</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">documentation</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">should</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">be</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">organized.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Will the PRD (</span><span style="--0:#82AAFF;--1:#3B61B0">Product</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Requirements</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Document</span><span style="--0:#D6DEEB;--1:#403F53">) be sharded into multiple files</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Yes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Will the architecture documentation be sharded into multiple files</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Yes</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">🛠️</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">IDE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Configuration</span></div></div><div class="ec-line"><div class="code"><span class="indent"> </span><span style="--0:#82AAFF;--1:#3B61B0">⚠️</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">IMPORTANT:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">This</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">is</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">a</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">MULTISELECT!</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">SPACEBAR</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">toggle</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">each</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">IDE!</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">🔸</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">arrow</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">keys</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">navigate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">🔸</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">SPACEBAR</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">select/deselect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">IDEs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">🔸</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Press</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ENTER</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">when</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">finished</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">selecting</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Which IDE(</span><span style="--0:#82AAFF;--1:#3B61B0">s</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">do</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">you</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">want</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">configure?</span><span style="--0:#D6DEEB;--1:#403F53"> (Select </span><span style="--0:#ECC48D;--1:#3B61B0">with</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">SPACEBAR,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">confirm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">with</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ENTER</span><span style="--0:#D6DEEB;--1:#403F53">): Cursor, Claude Code, iFlow CLI, Windsurf, Trae, Roo Code, Kilo</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Code,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Cline,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Gemini</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">CLI,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Qwen</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Code,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Crush,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Github</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Copilot,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Auggie</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">CLI</span><span style="--0:#D6DEEB;--1:#403F53"> (Augment </span><span style="--0:#ECC48D;--1:#3B61B0">Code</span><span style="--0:#D6DEEB;--1:#403F53">), Codex CLI, Codex Web</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">🔧</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">GitHub</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Copilot</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Configuration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">works</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">best</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">with</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">specific</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">VS</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Code</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">settings</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">optimal</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">experience.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> How would you like to configure GitHub Copilot settings</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Use recommended defaults (</span><span style="--0:#82AAFF;--1:#3B61B0">fastest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">setup</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">📍</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Auggie</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">CLI</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Location</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Configuration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Choose</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">where</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agents</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Auggie</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">CLI</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">access.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Select Auggie CLI command locations: Workspace Commands (</span><span style="--0:#82AAFF;--1:#3B61B0">Project</span><span style="--0:#D6DEEB;--1:#403F53">): Stored in repository, shared with team</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Would you like to include pre-built web bundles</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#82AAFF;--1:#3B61B0">standalone</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">files</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ChatGPT,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Claude,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Gemini</span><span style="--0:#D6DEEB;--1:#403F53">) Yes</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">📦</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Web</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bundles</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">are</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">standalone</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">files</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">perfect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">web</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">AI</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">platforms.</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#82AAFF;--1:#3B61B0">You</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">choose</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">different</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">teams/agents</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">than</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">your</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">IDE</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">installation.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> What web bundles would you like to include</span><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> All available bundles (</span><span style="--0:#82AAFF;--1:#3B61B0">agents,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">teams,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">expansion</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">packs</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">?</span><span style="--0:#D6DEEB;--1:#403F53"> Enter directory </span><span style="--0:#C792EA;--1:#8844AE">for</span><span style="--0:#D6DEEB;--1:#403F53"> web bundles: web-bundles</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">⠋</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Analyzing</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">installation</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">directory...</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">Processed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">67</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">files</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">with</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">{root}</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">replacement</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">4</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">common</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">utilities</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">documentation</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">files</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Installed</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">all</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">web</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bundles</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">web-bundles</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ux-expert.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sm.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">qa.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">po.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pm.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">⠙</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Setting</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">up</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">cursor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">integration...✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">architect.mdc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">analyst.mdc</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Cursor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rules</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.cursor/rules/bmad</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/ux-expert</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/sm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/qa</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/po</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/pm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad-orchestrator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad-master</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/architect</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/analyst</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/validate-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/trace-requirements</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/test-design</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/shard-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/risk-profile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/review-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/qa-gate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/nfr-assess</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/kb-mode-interaction</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/index-docs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/generate-ai-frontend-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/facilitate-brainstorming-session</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/execute-checklist</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/document-project</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-deep-research-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-brownfield-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/correct-course</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/brownfield-create-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/brownfield-create-epic</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/apply-qa-fixes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/advanced-elicitation</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Claude</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Code</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">commands</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">core</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.claude/commands/BMad</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Agents</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.claude/commands/BMad/agents</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Tasks</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.claude/commands/BMad/tasks</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/ux-expert</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/sm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/qa</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/po</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/pm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad-orchestrator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad-master</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/architect</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/analyst</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/validate-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/trace-requirements</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/test-design</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/shard-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/risk-profile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/review-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/qa-gate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/nfr-assess</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/kb-mode-interaction</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/index-docs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/generate-ai-frontend-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/facilitate-brainstorming-session</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/execute-checklist</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/document-project</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-deep-research-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-brownfield-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/correct-course</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/brownfield-create-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/brownfield-create-epic</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/apply-qa-fixes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/advanced-elicitation</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">iFlow</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">CLI</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">commands</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">core</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.iflow/commands/BMad</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Agents</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.iflow/commands/BMad/agents</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Tasks</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.iflow/commands/BMad/tasks</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ux-expert.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sm.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">qa.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">po.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pm.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">architect.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflow:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">analyst.md</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Windsurf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workflows</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.windsurf/workflows</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ux-expert.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sm.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">⠹</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Setting</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">up</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">trae</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">integration...✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">qa.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">po.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pm.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">architect.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">analyst.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-ux-expert</span><span style="--0:#D6DEEB;--1:#403F53"> (🎨 </span><span style="--0:#ECC48D;--1:#3B61B0">UX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Expert</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-sm</span><span style="--0:#D6DEEB;--1:#403F53"> (🏃 </span><span style="--0:#ECC48D;--1:#3B61B0">Scrum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Master</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-qa</span><span style="--0:#D6DEEB;--1:#403F53"> (🧪 </span><span style="--0:#ECC48D;--1:#3B61B0">Test</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Architect</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26; </span><span style="--0:#82AAFF;--1:#3B61B0">Quality</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Advisor</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-po</span><span style="--0:#D6DEEB;--1:#403F53"> (📝 </span><span style="--0:#ECC48D;--1:#3B61B0">Product</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Owner</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-pm</span><span style="--0:#D6DEEB;--1:#403F53"> (📋 </span><span style="--0:#ECC48D;--1:#3B61B0">Product</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Manager</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-dev</span><span style="--0:#D6DEEB;--1:#403F53"> (💻 </span><span style="--0:#ECC48D;--1:#3B61B0">Full</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Stack</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Developer</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-bmad-orchestrator</span><span style="--0:#D6DEEB;--1:#403F53"> (🎭 </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Master</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Orchestrator</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-bmad-master</span><span style="--0:#D6DEEB;--1:#403F53"> (🧙 </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Master</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Executor</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-architect</span><span style="--0:#D6DEEB;--1:#403F53"> (🏗️ </span><span style="--0:#ECC48D;--1:#3B61B0">Architect</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-analyst</span><span style="--0:#D6DEEB;--1:#403F53"> (📊 </span><span style="--0:#ECC48D;--1:#3B61B0">Business</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Analyst</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.roomodes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">file</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">project</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">root</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Roo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Code</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">setup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">complete!</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Custom</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">modes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">will</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">be</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">available</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">when</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">you</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">open</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">project</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Roo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Code</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-ux-expert</span><span style="--0:#D6DEEB;--1:#403F53"> (🎨 </span><span style="--0:#ECC48D;--1:#3B61B0">UX</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Expert</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-sm</span><span style="--0:#D6DEEB;--1:#403F53"> (🏃 </span><span style="--0:#ECC48D;--1:#3B61B0">Scrum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Master</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-qa</span><span style="--0:#D6DEEB;--1:#403F53"> (🧪 </span><span style="--0:#ECC48D;--1:#3B61B0">Test</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Architect</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26; </span><span style="--0:#82AAFF;--1:#3B61B0">Quality</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Advisor</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-po</span><span style="--0:#D6DEEB;--1:#403F53"> (📝 </span><span style="--0:#ECC48D;--1:#3B61B0">Product</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Owner</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-pm</span><span style="--0:#D6DEEB;--1:#403F53"> (📋 </span><span style="--0:#ECC48D;--1:#3B61B0">Product</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Manager</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-dev</span><span style="--0:#D6DEEB;--1:#403F53"> (💻 </span><span style="--0:#ECC48D;--1:#3B61B0">Full</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Stack</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Developer</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator</span><span style="--0:#D6DEEB;--1:#403F53"> (🎭 </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Master</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Orchestrator</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master</span><span style="--0:#D6DEEB;--1:#403F53"> (🧙 </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Master</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Executor</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-architect</span><span style="--0:#D6DEEB;--1:#403F53"> (🏗️ </span><span style="--0:#ECC48D;--1:#3B61B0">Architect</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Kilo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-analyst</span><span style="--0:#D6DEEB;--1:#403F53"> (📊 </span><span style="--0:#ECC48D;--1:#3B61B0">Business</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Analyst</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.kilocodemodes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">file</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">project</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">root</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">KiloCode</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">setup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">complete!</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Custom</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">modes</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">will</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">be</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">available</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">when</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">you</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">open</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">this</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">project</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">KiloCode</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">10-ux-expert.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">07-sm.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">09-qa.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">06-po.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">03-pm.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">08-dev.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">02-bmad-orchestrator.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">01-bmad-master.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">05-architect.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rule:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">04-analyst.md</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Cline</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rules</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.clinerules</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:ux-expert</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:sm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:qa</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:po</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:pm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:bmad-orchestrator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:bmad-master</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:architect</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:analyst</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:validate-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:trace-requirements</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:test-design</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:shard-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:risk-profile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:review-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:qa-gate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:nfr-assess</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:kb-mode-interaction</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:index-docs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:generate-ai-frontend-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:facilitate-brainstorming-session</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:execute-checklist</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:document-project</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:create-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:create-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:create-deep-research-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:create-brownfield-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:correct-course</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:brownfield-create-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:brownfield-create-epic</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">⠸</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Setting</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">up</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">gemini</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">integration...✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:apply-qa-fixes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:advanced-elicitation</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Gemini</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">CLI</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">extension</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.gemini/commands/BMad/</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">You</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">now</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">use</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">commands</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">like</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:agents:dev</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">or</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad:tasks:create-doc.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">ux-expert</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">sm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">qa</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">po</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">pm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">architect</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Added</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">context</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">*</span><span style="--0:#ECC48D;--1:#3B61B0">analyst</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">QWEN.md</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.qwen/bmad-method</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/ux-expert</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/sm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/qa</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/po</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/pm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad-orchestrator</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/bmad-master</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/architect</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/analyst</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/validate-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/trace-requirements</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/test-design</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/shard-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/risk-profile</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/review-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/qa-gate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/nfr-assess</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/kb-mode-interaction</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/index-docs</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/generate-ai-frontend-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/facilitate-brainstorming-session</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/execute-checklist</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/document-project</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-next-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-doc</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-deep-research-prompt</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/create-brownfield-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/correct-course</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/brownfield-create-story</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/brownfield-create-epic</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/apply-qa-fixes</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">task</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">command:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/advanced-elicitation</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Crush</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">commands</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">core</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.crush/commands/BMad</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Agents</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.crush/commands/BMad/agents</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Tasks</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.crush/commands/BMad/tasks</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Using</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pre-configured</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">GitHub</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Copilot</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">settings:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">defaults</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Using</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">recommended</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">defaults</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Github</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Copilot</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">settings</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">VS</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Code</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">workspace</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">settings</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">configured</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">successfully</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">Settings</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">written</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">to</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.vscode/settings.json:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">•</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat.agent.enabled:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">•</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat.agent.maxRequests:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">15</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">•</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">github.copilot.chat.agent.runTasks:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">•</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat.mcp.discovery.enabled:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">•</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">github.copilot.chat.agent.autoFix:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">•</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat.tools.autoApprove:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">false</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">You</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">modify</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">these</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">settings</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">anytime</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">.vscode/settings.json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ux-expert.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sm.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">qa.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">po.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pm.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">architect.chatmode.md</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Created</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mode:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">analyst.chatmode.md</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">✓</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Github</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Copilot</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">setup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">complete!</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">You</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">can</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">now</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">find</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">BMad</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">agents</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">in</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">the</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">Chat</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">view</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">s mode selector.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">Using pre-configured Auggie CLI (Augment Code) locations: workspace</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: ux-expert.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: sm.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: qa.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: po.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: pm.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: dev.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: bmad-orchestrator.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: bmad-master.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: architect.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created command: analyst.md in Workspace Commands (Project)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created Auggie CLI commands in .augment/commands/bmad/</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#ECC48D;--1:#984E4D">  </span></span><span style="--0:#ECC48D;--1:#984E4D">Location: Workspace Commands (Project) - Stored in your repository and shared with your team</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">⠼ Setting up codex integration...✓ Created/updated AGENTS.md for Codex CLI integration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">Codex reads AGENTS.md automatically. Run `codex` in this project to use BMAD agents.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Added npm scripts: bmad:refresh, bmad:list, bmad:validate</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Added .bmad-core/* to .gitignore for local-only Codex setup</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Created/updated AGENTS.md for Codex CLI integration</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">Codex reads AGENTS.md automatically. Run `codex` in this project to use BMAD agents.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Updated .gitignore to include .bmad-core in commits</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✔ Installation complete!</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ BMad Method installed successfully!</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">🎯 Installation Summary:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ .bmad-core framework installed with all agents and workflows</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ Web bundles (all bundles) installed to: web-bundles</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">✓ IDE rules and configurations set up for: cursor, claude-code, iflow-cli, windsurf, trae, roo, kilo, cline, gemini, qwen-code, crush, github-copilot, auggie-cli, codex, codex-web</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">📖 IMPORTANT: Please read the user guide at docs/user-guide.md (also installed at .bmad-core/user-guide.md)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#ECC48D;--1:#984E4D">This guide contains essential information about the BMad workflow and how to use the agents effectively.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="❯ npx bmad-method install██████╗ ███╗   ███╗ █████╗ ██████╗       ███╗   ███╗███████╗████████╗██╗  ██╗ ██████╗ ██████╗██╔══██╗████╗ ████║██╔══██╗██╔══██╗      ████╗ ████║██╔════╝╚══██╔══╝██║  ██║██╔═══██╗██╔══██╗██████╔╝██╔████╔██║███████║██║  ██║█████╗██╔████╔██║█████╗     ██║   ███████║██║   ██║██║  ██║██╔══██╗██║╚██╔╝██║██╔══██║██║  ██║╚════╝██║╚██╔╝██║██╔══╝     ██║   ██╔══██║██║   ██║██║  ██║██████╔╝██║ ╚═╝ ██║██║  ██║██████╔╝      ██║ ╚═╝ ██║███████╗   ██║   ██║  ██║╚██████╔╝██████╔╝╚═════╝ ╚═╝     ╚═╝╚═╝  ╚═╝╚═════╝       ╚═╝     ╚═╝╚══════╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝ ╚═════╝🚀 Universal AI Agent Framework for Any Domain✨ Installer v4.43.1? Enter the full path to your project directory where BMad should be installed:? Select what to install/update (use space to select, enter to continue): BMad Agile Core System (v4.43.1) .bmad-core📋 Document Organization SettingsConfigure how your project documentation should be organized.? Will the PRD (Product Requirements Document) be sharded into multiple files? Yes? Will the architecture documentation be sharded into multiple files? Yes🛠️  IDE Configuration ⚠️  IMPORTANT: This is a MULTISELECT! Use SPACEBAR to toggle each IDE!🔸 Use arrow keys to navigate🔸 Use SPACEBAR to select/deselect IDEs🔸 Press ENTER when finished selecting? Which IDE(s) do you want to configure? (Select with SPACEBAR, confirm with ENTER): Cursor, Claude Code, iFlow CLI, Windsurf, Trae, Roo Code, KiloCode, Cline, Gemini CLI, Qwen Code, Crush, Github Copilot, Auggie CLI (Augment Code), Codex CLI, Codex Web🔧 GitHub Copilot ConfigurationBMad works best with specific VS Code settings for optimal agent experience.? How would you like to configure GitHub Copilot settings? Use recommended defaults (fastest setup)📍 Auggie CLI Location ConfigurationChoose where to install BMad agents for Auggie CLI access.? Select Auggie CLI command locations: Workspace Commands (Project): Stored in repository, shared with team? Would you like to include pre-built web bundles? (standalone files for ChatGPT, Claude, Gemini) Yes📦 Web bundles are standalone files perfect for web AI platforms.   You can choose different teams/agents than your IDE installation.? What web bundles would you like to include? All available bundles (agents, teams, expansion packs)? Enter directory for web bundles: web-bundles⠋ Analyzing installation directory...  Processed 67 files with {root} replacement  Added 4 common utilities  Added 3 documentation files✓ Installed all web bundles to: web-bundles✓ Created rule: ux-expert.mdc✓ Created rule: sm.mdc✓ Created rule: qa.mdc✓ Created rule: po.mdc✓ Created rule: pm.mdc✓ Created rule: dev.mdc✓ Created rule: bmad-orchestrator.mdc⠙ Setting up cursor integration...✓ Created rule: bmad-master.mdc✓ Created rule: architect.mdc✓ Created rule: analyst.mdc✓ Created Cursor rules in .cursor/rules/bmad✓ Created agent command: /ux-expert✓ Created agent command: /sm✓ Created agent command: /qa✓ Created agent command: /po✓ Created agent command: /pm✓ Created agent command: /dev✓ Created agent command: /bmad-orchestrator✓ Created agent command: /bmad-master✓ Created agent command: /architect✓ Created agent command: /analyst✓ Created task command: /validate-next-story✓ Created task command: /trace-requirements✓ Created task command: /test-design✓ Created task command: /shard-doc✓ Created task command: /risk-profile✓ Created task command: /review-story✓ Created task command: /qa-gate✓ Created task command: /nfr-assess✓ Created task command: /kb-mode-interaction✓ Created task command: /index-docs✓ Created task command: /generate-ai-frontend-prompt✓ Created task command: /facilitate-brainstorming-session✓ Created task command: /execute-checklist✓ Created task command: /document-project✓ Created task command: /create-next-story✓ Created task command: /create-doc✓ Created task command: /create-deep-research-prompt✓ Created task command: /create-brownfield-story✓ Created task command: /correct-course✓ Created task command: /brownfield-create-story✓ Created task command: /brownfield-create-epic✓ Created task command: /apply-qa-fixes✓ Created task command: /advanced-elicitation✓ Created Claude Code commands for core in .claude/commands/BMad  - Agents in: .claude/commands/BMad/agents  - Tasks in: .claude/commands/BMad/tasks✓ Created agent command: /ux-expert✓ Created agent command: /sm✓ Created agent command: /qa✓ Created agent command: /po✓ Created agent command: /pm✓ Created agent command: /dev✓ Created agent command: /bmad-orchestrator✓ Created agent command: /bmad-master✓ Created agent command: /architect✓ Created agent command: /analyst✓ Created task command: /validate-next-story✓ Created task command: /trace-requirements✓ Created task command: /test-design✓ Created task command: /shard-doc✓ Created task command: /risk-profile✓ Created task command: /review-story✓ Created task command: /qa-gate✓ Created task command: /nfr-assess✓ Created task command: /kb-mode-interaction✓ Created task command: /index-docs✓ Created task command: /generate-ai-frontend-prompt✓ Created task command: /facilitate-brainstorming-session✓ Created task command: /execute-checklist✓ Created task command: /document-project✓ Created task command: /create-next-story✓ Created task command: /create-doc✓ Created task command: /create-deep-research-prompt✓ Created task command: /create-brownfield-story✓ Created task command: /correct-course✓ Created task command: /brownfield-create-story✓ Created task command: /brownfield-create-epic✓ Created task command: /apply-qa-fixes✓ Created task command: /advanced-elicitation✓ Created iFlow CLI commands for core in .iflow/commands/BMad  - Agents in: .iflow/commands/BMad/agents  - Tasks in: .iflow/commands/BMad/tasks✓ Created workflow: ux-expert.md✓ Created workflow: sm.md✓ Created workflow: qa.md✓ Created workflow: po.md✓ Created workflow: pm.md✓ Created workflow: dev.md✓ Created workflow: bmad-orchestrator.md✓ Created workflow: bmad-master.md✓ Created workflow: architect.md✓ Created workflow: analyst.md✓ Created Windsurf workflows in .windsurf/workflows✓ Created rule: ux-expert.md✓ Created rule: sm.md⠹ Setting up trae integration...✓ Created rule: qa.md✓ Created rule: po.md✓ Created rule: pm.md✓ Created rule: dev.md✓ Created rule: bmad-orchestrator.md✓ Created rule: bmad-master.md✓ Created rule: architect.md✓ Created rule: analyst.md✓ Added mode: bmad-ux-expert (🎨 UX Expert)✓ Added mode: bmad-sm (🏃 Scrum Master)✓ Added mode: bmad-qa (🧪 Test Architect &#x26; Quality Advisor)✓ Added mode: bmad-po (📝 Product Owner)✓ Added mode: bmad-pm (📋 Product Manager)✓ Added mode: bmad-dev (💻 Full Stack Developer)✓ Added mode: bmad-bmad-orchestrator (🎭 BMad Master Orchestrator)✓ Added mode: bmad-bmad-master (🧙 BMad Master Task Executor)✓ Added mode: bmad-architect (🏗️ Architect)✓ Added mode: bmad-analyst (📊 Business Analyst)✓ Created .roomodes file in project root✓ Roo Code setup complete!Custom modes will be available when you open this project in Roo Code✓ Added Kilo mode: bmad-ux-expert (🎨 UX Expert)✓ Added Kilo mode: bmad-sm (🏃 Scrum Master)✓ Added Kilo mode: bmad-qa (🧪 Test Architect &#x26; Quality Advisor)✓ Added Kilo mode: bmad-po (📝 Product Owner)✓ Added Kilo mode: bmad-pm (📋 Product Manager)✓ Added Kilo mode: bmad-dev (💻 Full Stack Developer)✓ Added Kilo mode: bmad-orchestrator (🎭 BMad Master Orchestrator)✓ Added Kilo mode: bmad-master (🧙 BMad Master Task Executor)✓ Added Kilo mode: bmad-architect (🏗️ Architect)✓ Added Kilo mode: bmad-analyst (📊 Business Analyst)✓ Created .kilocodemodes file in project root✓ KiloCode setup complete!Custom modes will be available when you open this project in KiloCode✓ Created rule: 10-ux-expert.md✓ Created rule: 07-sm.md✓ Created rule: 09-qa.md✓ Created rule: 06-po.md✓ Created rule: 03-pm.md✓ Created rule: 08-dev.md✓ Created rule: 02-bmad-orchestrator.md✓ Created rule: 01-bmad-master.md✓ Created rule: 05-architect.md✓ Created rule: 04-analyst.md✓ Created Cline rules in .clinerules✓ Created agent command: /bmad:agents:ux-expert✓ Created agent command: /bmad:agents:sm✓ Created agent command: /bmad:agents:qa✓ Created agent command: /bmad:agents:po✓ Created agent command: /bmad:agents:pm✓ Created agent command: /bmad:agents:dev✓ Created agent command: /bmad:agents:bmad-orchestrator✓ Created agent command: /bmad:agents:bmad-master✓ Created agent command: /bmad:agents:architect✓ Created agent command: /bmad:agents:analyst✓ Created task command: /bmad:tasks:validate-next-story✓ Created task command: /bmad:tasks:trace-requirements✓ Created task command: /bmad:tasks:test-design✓ Created task command: /bmad:tasks:shard-doc✓ Created task command: /bmad:tasks:risk-profile✓ Created task command: /bmad:tasks:review-story✓ Created task command: /bmad:tasks:qa-gate✓ Created task command: /bmad:tasks:nfr-assess✓ Created task command: /bmad:tasks:kb-mode-interaction✓ Created task command: /bmad:tasks:index-docs✓ Created task command: /bmad:tasks:generate-ai-frontend-prompt✓ Created task command: /bmad:tasks:facilitate-brainstorming-session✓ Created task command: /bmad:tasks:execute-checklist✓ Created task command: /bmad:tasks:document-project✓ Created task command: /bmad:tasks:create-next-story✓ Created task command: /bmad:tasks:create-doc✓ Created task command: /bmad:tasks:create-deep-research-prompt✓ Created task command: /bmad:tasks:create-brownfield-story✓ Created task command: /bmad:tasks:correct-course✓ Created task command: /bmad:tasks:brownfield-create-story✓ Created task command: /bmad:tasks:brownfield-create-epic⠸ Setting up gemini integration...✓ Created task command: /bmad:tasks:apply-qa-fixes✓ Created task command: /bmad:tasks:advanced-elicitation✓ Created Gemini CLI extension in .gemini/commands/BMad/You can now use commands like /bmad:agents:dev or /bmad:tasks:create-doc.✓ Added context for *ux-expert✓ Added context for *sm✓ Added context for *qa✓ Added context for *po✓ Added context for *pm✓ Added context for *dev✓ Added context for *bmad-orchestrator✓ Added context for *bmad-master✓ Added context for *architect✓ Added context for *analyst✓ Created QWEN.md in .qwen/bmad-method✓ Created agent command: /ux-expert✓ Created agent command: /sm✓ Created agent command: /qa✓ Created agent command: /po✓ Created agent command: /pm✓ Created agent command: /dev✓ Created agent command: /bmad-orchestrator✓ Created agent command: /bmad-master✓ Created agent command: /architect✓ Created agent command: /analyst✓ Created task command: /validate-next-story✓ Created task command: /trace-requirements✓ Created task command: /test-design✓ Created task command: /shard-doc✓ Created task command: /risk-profile✓ Created task command: /review-story✓ Created task command: /qa-gate✓ Created task command: /nfr-assess✓ Created task command: /kb-mode-interaction✓ Created task command: /index-docs✓ Created task command: /generate-ai-frontend-prompt✓ Created task command: /facilitate-brainstorming-session✓ Created task command: /execute-checklist✓ Created task command: /document-project✓ Created task command: /create-next-story✓ Created task command: /create-doc✓ Created task command: /create-deep-research-prompt✓ Created task command: /create-brownfield-story✓ Created task command: /correct-course✓ Created task command: /brownfield-create-story✓ Created task command: /brownfield-create-epic✓ Created task command: /apply-qa-fixes✓ Created task command: /advanced-elicitation✓ Created Crush commands for core in .crush/commands/BMad  - Agents in: .crush/commands/BMad/agents  - Tasks in: .crush/commands/BMad/tasksUsing pre-configured GitHub Copilot settings: defaults✓ Using recommended BMad defaults for Github Copilot settings✓ VS Code workspace settings configured successfully  Settings written to .vscode/settings.json:  • chat.agent.enabled: true  • chat.agent.maxRequests: 15  • github.copilot.chat.agent.runTasks: true  • chat.mcp.discovery.enabled: true  • github.copilot.chat.agent.autoFix: true  • chat.tools.autoApprove: falseYou can modify these settings anytime in .vscode/settings.json✓ Created chat mode: ux-expert.chatmode.md✓ Created chat mode: sm.chatmode.md✓ Created chat mode: qa.chatmode.md✓ Created chat mode: po.chatmode.md✓ Created chat mode: pm.chatmode.md✓ Created chat mode: dev.chatmode.md✓ Created chat mode: bmad-orchestrator.chatmode.md✓ Created chat mode: bmad-master.chatmode.md✓ Created chat mode: architect.chatmode.md✓ Created chat mode: analyst.chatmode.md✓ Github Copilot setup complete!You can now find the BMad agents in the Chat view&#x27;s mode selector.Using pre-configured Auggie CLI (Augment Code) locations: workspace✓ Created command: ux-expert.md in Workspace Commands (Project)✓ Created command: sm.md in Workspace Commands (Project)✓ Created command: qa.md in Workspace Commands (Project)✓ Created command: po.md in Workspace Commands (Project)✓ Created command: pm.md in Workspace Commands (Project)✓ Created command: dev.md in Workspace Commands (Project)✓ Created command: bmad-orchestrator.md in Workspace Commands (Project)✓ Created command: bmad-master.md in Workspace Commands (Project)✓ Created command: architect.md in Workspace Commands (Project)✓ Created command: analyst.md in Workspace Commands (Project)✓ Created Auggie CLI commands in .augment/commands/bmad/  Location: Workspace Commands (Project) - Stored in your repository and shared with your team⠼ Setting up codex integration...✓ Created/updated AGENTS.md for Codex CLI integrationCodex reads AGENTS.md automatically. Run &#x60;codex&#x60; in this project to use BMAD agents.✓ Added npm scripts: bmad:refresh, bmad:list, bmad:validate✓ Added .bmad-core/* to .gitignore for local-only Codex setup✓ Created/updated AGENTS.md for Codex CLI integrationCodex reads AGENTS.md automatically. Run &#x60;codex&#x60; in this project to use BMAD agents.✓ Updated .gitignore to include .bmad-core in commits✔ Installation complete!✓ BMad Method installed successfully!🎯 Installation Summary:✓ .bmad-core framework installed with all agents and workflows✓ Web bundles (all bundles) installed to: web-bundles✓ IDE rules and configurations set up for: cursor, claude-code, iflow-cli, windsurf, trae, roo, kilo, cline, gemini, qwen-code, crush, github-copilot, auggie-cli, codex, codex-web📖 IMPORTANT: Please read the user guide at docs/user-guide.md (also installed at .bmad-core/user-guide.md)This guide contains essential information about the BMad workflow and how to use the agents effectively."><div></div></button></div></figure></div>
<blockquote>
<p>小贴士：遇到路径报错，<strong>确认目录前面有点</strong>（<code dir="auto">.bmad-core</code> 而不是 <code dir="auto">bmad-core</code>）。这类路径不一致是常见坑。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="步骤二在-agentsmd-挂上-bmad-角色">步骤二：在 <code dir="auto">AGENTS.md</code> 挂上 BMAD 角色</h2><a class="sl-anchor-link" href="#步骤二在-agentsmd-挂上-bmad-角色"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “步骤二：在 AGENTS.md 挂上 BMAD 角色”</span></a></div>
<p><code dir="auto">AGENTS.md</code> 就是“给 AI 的 README”。位置在<strong>仓库根目录</strong>，是标准 Markdown，形式自由，写你希望代理遵循的构建/测试/风格/流程等。</p>
<blockquote>
<p>Codex、Cursor、Gemini 等主流代理都会读它；你写在这里的规则，代理会按你说的做。</p>
</blockquote>
<p>为了<strong>让 Codex 快速定位 BMAD 角色</strong>，在 <code dir="auto">AGENTS.md</code> 中新增一个“BMAD Agents”小节，并放入<strong>简洁的角色映射</strong>。很多团队习惯用 YAML 片段来列出路径（便于人和工具解析），示例如下：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># BMAD Agents</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">agents</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">analyst</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/analyst.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">architect</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/architect.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-master</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/bmad-master.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">bmad-orchestrator</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/bmad-orchestrator.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">dev</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/dev.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">pm</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/pm.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">po</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/po.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">qa</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/qa.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">sm</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/sm.md</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">id</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">ux-expert</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">.bmad-core/agents/ux-expert.md</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="# BMAD Agentsagents:  - id: analyst    path: .bmad-core/agents/analyst.md  - id: architect    path: .bmad-core/agents/architect.md  - id: bmad-master    path: .bmad-core/agents/bmad-master.md  - id: bmad-orchestrator    path: .bmad-core/agents/bmad-orchestrator.md  - id: dev    path: .bmad-core/agents/dev.md  - id: pm    path: .bmad-core/agents/pm.md  - id: po    path: .bmad-core/agents/po.md  - id: qa    path: .bmad-core/agents/qa.md  - id: sm    path: .bmad-core/agents/sm.md  - id: ux-expert    path: .bmad-core/agents/ux-expert.md"><div></div></button></div></figure></div>
<blockquote>
<p>说明：<code dir="auto">AGENTS.md</code> <strong>并不强制 YAML</strong>，它本质是 Markdown；你也可以用表格或列表写法表达同样信息。核心是让代理<strong>可靠找到</strong>这些 <code dir="auto">.md</code>。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="步骤三在-codex-里启动-analystbmad-分析师">步骤三：在 Codex 里启动 <em>Analyst</em>（BMAD 分析师）</h2><a class="sl-anchor-link" href="#步骤三在-codex-里启动-analystbmad-分析师"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “步骤三：在 Codex 里启动 Analyst（BMAD 分析师）”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="31-启动-codex">3.1 启动 Codex</h3><a class="sl-anchor-link" href="#31-启动-codex"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3.1 启动 Codex”</span></a></div>
<p>CLI 两种安装二选一：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">i</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-g</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">@openai/codex</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 或</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">brew</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">codex</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm i -g @openai/codexbrew install codex"><div></div></button></div></figure></div>
<p>装完在项目根目录运行 <code dir="auto">codex</code>，按提示登录 ChatGPT 账号即可开始。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="32-一段话让-analyst-上线">3.2 「一段话」让 Analyst 上线</h3><a class="sl-anchor-link" href="#32-一段话让-analyst-上线"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3.2 「一段话」让 Analyst 上线”</span></a></div>
<p>进入 Codex 交互后，直接说：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">*agent analyst</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">Hi, I’m Mary — Business Analyst.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">All commands must start with *.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">1. *help — Show available commands</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">2. *brainstorm {topic} — Facilitate structured brainstorming</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">3. *create-competitor-analysis — Create competitor analysis doc</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">4. *create-project-brief — Create project brief</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">5. *doc-out — Output current document</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">6. *elicit — Run advanced elicitation</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">7. *perform-market-research — Create market research doc</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">8. *research-prompt {topic} — Generate deep research prompt</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">      </span></span><span style="--0:#d6deeb;--1:#403f53">9. *yolo — Toggle skip confirmations</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">     </span></span><span style="--0:#d6deeb;--1:#403f53">10. *exit — Exit Business Analyst persona</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="*agent analyst  Hi, I’m Mary — Business Analyst.  All commands must start with *.      1. *help — Show available commands      2. *brainstorm {topic} — Facilitate structured brainstorming      3. *create-competitor-analysis — Create competitor analysis doc      4. *create-project-brief — Create project brief      5. *doc-out — Output current document      6. *elicit — Run advanced elicitation      7. *perform-market-research — Create market research doc      8. *research-prompt {topic} — Generate deep research prompt      9. *yolo — Toggle skip confirmations     10. *exit — Exit Business Analyst persona"><div></div></button></div></figure></div>
<p>BMAD 的 Web/IDE 工作流里，<code dir="auto">*help</code>、<code dir="auto">*analyst</code> 是常见的入口提示与角色选择语法；把这一套“数字选项 + 任务驱动”的对话风格<strong>原样搬到 Codex</strong>，就能获得类似体验。</p>
<blockquote>
<p>备忘：BMAD 的 Analyst/Architect/PM/Dev 等角色在对应的 <code dir="auto">agents/*.md</code> 里有命令与清单；有些任务（如<strong>头脑风暴</strong>）依赖 <code dir="auto">.bmad-core/tasks/*</code> 中的文件。路径对了，代理就能加载。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="一套从零到一的小抄可直接用">一套「从零到一」的小抄（可直接用）</h2><a class="sl-anchor-link" href="#一套从零到一的小抄可直接用"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一套「从零到一」的小抄（可直接用）”</span></a></div>
<p><strong>初始化</strong></p>
<ul>
<li><code dir="auto">npx bmad-method install</code>（或 <code dir="auto">npm run install:bmad</code>）</li>
<li>检查 <code dir="auto">.bmad-core</code> 是否到位、Node v20+。</li>
</ul>
<p><strong>配置</strong></p>
<ul>
<li>在 <code dir="auto">AGENTS.md</code> 写“构建/测试/代码风格/提交流程”。</li>
<li>加上“BMAD Agents”映射，确保各角色 <code dir="auto">.md</code> 能被找见。</li>
</ul>
<p><strong>开干</strong></p>
<ul>
<li>进 <code dir="auto">codex</code>，发送 *agent analyst 启动词。</li>
<li>产出 <code dir="auto">docs/brief.md</code> → 切 Architect 出架构稿 → Scrum Master 切故事 → Dev 执行实现 → QA 校验。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="实战加速把检查与提-pr也交给-codex">实战加速：把“检查与提 PR”也交给 Codex</h2><a class="sl-anchor-link" href="#实战加速把检查与提-pr也交给-codex"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “实战加速：把“检查与提 PR”也交给 Codex”</span></a></div>
<p>Codex 天生支持在仓库里跑命令与做代码评审（如在 PR 里 @ 它），搭配 <code dir="auto">AGENTS.md</code> 里的测试/风格/构建说明，能把<strong>本地验证</strong>与<strong>自动审查</strong>串起来。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="常见坑位与解决法">常见坑位与解决法</h2><a class="sl-anchor-link" href="#常见坑位与解决法"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常见坑位与解决法”</span></a></div>
<ul>
<li><strong>路径写错</strong>：<code dir="auto">.bmad-core</code> 少了前导点，导致加载失败 → 统一改为带点路径。</li>
<li><strong>指令太散</strong>：记得把“怎么构建/怎么测/代码规范/提交规则”写进 <code dir="auto">AGENTS.md</code>，代理才会一致执行。</li>
<li><strong>角色太多记不住</strong>：进对话就打 <code dir="auto">*help</code> 或在启动词里让代理<strong>用数字选项</strong>提议下一步。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p><strong>BMAD 把“角色”变成可版本化的代码</strong>，<strong>Codex 把“执行”变成可自动化的动作</strong>。
把两者接上，你的项目就多了一支<strong>不疲劳、可复制、对规矩永远不忘</strong>的 AI 团队。</p>
<p>你会把哪个项目先交给这支团队？<strong>评论区聊聊。</strong></p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="互动小题">互动小题</h2><a class="sl-anchor-link" href="#互动小题"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “互动小题”</span></a></div>
<blockquote>
<p>你会把 BMAD 的哪个角色<strong>深度定制</strong>？Analyst、Architect 还是 QA？<br>
说说你的理由和一个<strong>必须执行</strong>的团队规则。</p>
</blockquote>
<!--
---

# 推荐标题（3 组，多语言 + slug）

1) **把 BMAD 装进 Codex：一支“AI 小分队”，带你从需求到交付**  
EN: Plug BMAD into Codex: An AI Squad from Brief to Delivery  
繁體: 把 BMAD 裝進 Codex：一支「AI 小分隊」，帶你從需求到交付  
日本語: Codex に BMAD を組み込む：要件から納品まで動く AI 分隊  
Français : Intégrer BMAD à Codex : une escouade d’IA du besoin à la livraison  
Español: Integra BMAD en Codex: un escuadrón de IA de requisitos a entrega  
Português: Integre o BMAD ao Codex: um esquadrão de IA do briefing à entrega  
**slug**: bmad-with-codex-ai-squad

2) **AGENTS.md + BMAD：教会 Codex 按你的规矩写代码**  
EN: AGENTS.md + BMAD: Teach Codex to Code Your Way  
繁體: AGENTS.md + BMAD：教會 Codex 按你的規矩寫程式  
日本語: AGENTS.md × BMAD：Codex に君の作法で書かせる  
Français : AGENTS.md + BMAD : apprenez à Codex à coder à votre façon  
Español: AGENTS.md + BMAD: enseña a Codex a programar a tu manera  
Português: AGENTS.md + BMAD: ensine o Codex a codar do seu jeito  
**slug**: agents-md-bmad-teach-codex

3) **三步搞定：安装 BMAD → 改 AGENTS.md → 召唤 Analyst**  
EN: Three Steps: Install BMAD → Edit AGENTS.md → Summon Analyst  
繁體: 三步搞定：安裝 BMAD → 改 AGENTS.md → 召喚 Analyst  
日本語: 3 ステップ：BMAD を入れる → AGENTS.md を編集 → Analyst を呼ぶ  
Français : En 3 étapes : Installer BMAD → Modifier AGENTS.md → Invoquer Analyst  
Español: En 3 pasos: Instala BMAD → Edita AGENTS.md → Invoca Analyst  
Português: Em 3 passos: Instale BMAD → Edite o AGENTS.md → Chame o Analyst  
**slug**: 3-steps-bmad-codex-analyst

---

# 配图（插画风，2:1，无中文文案）

**封面图提示**  
“An AI squad in a terminal-driven workshop: analyst, architect, developer as stylized avatars around a floating Markdown file labeled AGENTS.md, terminal windows glowing, blueprint lines connecting nodes, clean neon palette, 2:1 illustration.”

**关键章节配图**  
1) *安装 BMAD*：  
“Terminal window running `npx bmad-method install`, progress bars, Node v20 badge, minimal cyber aesthetic, 2:1 illustration.”  
2) *挂载 BMAD 到 AGENTS.md*：  
“Open repo layout, AGENTS.md in focus, YAML lines mapping ids to `.bmad-core/agents/*.md`, link cables to role icons, 2:1 illustration.”  
3) *召唤 Analyst*：  
“Chat bubble saying ‘Start Analyst’, a character with notepad spawning a project brief document tree, numbered choices UI hints, 2:1 illustration.”

> 如需，我也可以**直接为你生成这些插画**。

---

# 朋友圈/评论区文案（3 条）

1) 今天把 BMAD 装进 Codex，Analyst 一开口就把需求会给我跑完了，顺手出个 PRD…真有点上头😂  
2) 原来 `AGENTS.md` 这么香，写清套路后 Codex 乖得不行：构建、测试、提 PR，全自动。  
3) 多角色 AI 团队真的能干活：Analyst 拉需求，Architect 给方案，Dev 直接开写。下班不加班的感觉回来了…

---

需要我把**你的仓库**也按这套改好吗？或者把**Analyst/Architect** 两个角色**定制**到你的业务？我可以继续**扩写更细的操作清单**与**项目模板**。  

---

### 参考
- BMAD 安装与快速上手（官方 README，含 Node v20+、一键安装/升级命令）与 Web/IDE 工作流说明。:contentReference[oaicite:22]{index=22}  
- Codex CLI 安装、登录与 `AGENTS.md` 支持。:contentReference[oaicite:23]{index=23}  
- Codex 官方介绍：`AGENTS.md` 作为代理引导文件。:contentReference[oaicite:24]{index=24}  
- `AGENTS.md` 规范与多代理生态适配、格式自由。:contentReference[oaicite:25]{index=25}  
- 常见坑：`.bmad-core` 路径不一致导致加载失败（社区 Issue）。:contentReference[oaicite:26]{index=26}

你觉得这版是否 OK？要不要我**直接给你生成可用的 `AGENTS.md` 完整模板**，或把**Analyst 启动词**再细化到“选项 1/2/3”的半自动流程？
::contentReference[oaicite:27]{index=27}
```

[1]: https://github.com/openai/codex "GitHub - openai/codex: Lightweight coding agent that runs in your terminal"
[2]: https://github.com/bmad-code-org/BMAD-METHOD "GitHub - bmad-code-org/BMAD-METHOD: Breakthrough Method for Agile Ai Driven Development"
[3]: https://dev.to/vishalmysore/agent-as-code-bmad-method-4no9?utm_source=chatgpt.com "Agent As Code : BMAD-METHOD"
[4]: https://agents.md/ "AGENTS.md"
[5]: https://github.com/bmad-code-org/BMAD-METHOD/issues/526?utm_source=chatgpt.com "Inconsistent Path References to core-config.yaml Causing ..."
[6]: https://github.com/bmad-code-org/BMAD-METHOD/issues/410?utm_source=chatgpt.com "'facilitate-brainstorming-session.md' file not found during ..."
[7]: https://www.itpro.com/business/business-strategy/openais-codex-developer-agent-just-got-a-big-update?utm_source=chatgpt.com "OpenAI's Codex developer agent just got a big update"
--> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/bmad/" class="astro-sg3lsd66">BMAD</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/codex/" class="astro-sg3lsd66">codex</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/codex-cli/" class="astro-sg3lsd66">Codex CLI</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/openai/" class="astro-sg3lsd66">OpenAI</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/gpt-5/" class="astro-sg3lsd66">GPT-5</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/huawei/harmony-os/ble/2025-09-22-claude-code-harmonyos-ble/" class="astro-dr56dw7m">Claude Code 自动迁移 HarmonyOS BLE v15+ 多路扫描与连接管理</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-22T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月22日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <div class="sl-heading-wrapper level-h1"><h1 id="用-claude-code-快速开发-harmonyos-6-蓝牙设备管理-app蓝牙交互arkts-编译修复与-tddbdd-实战">用 Claude Code 快速开发 HarmonyOS 6 蓝牙设备管理 App：蓝牙交互、ArkTS 编译修复与 TDD/BDD 实战</h1><a class="sl-anchor-link" href="#用-claude-code-快速开发-harmonyos-6-蓝牙设备管理-app蓝牙交互arkts-编译修复与-tddbdd-实战"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “用 Claude Code 快速开发 HarmonyOS 6 蓝牙设备管理 App：蓝牙交互、ArkTS 编译修复与 TDD/BDD 实战”</span></a></div>
<p>本文演示如何借助 Claude Code 快速完成一款面向华为 HarmonyOS 6 的蓝牙设备管理 App，覆盖典型能力：接收蓝牙广播、连接设备、设置时间、同步状态、输注、获取日志；并重点介绍 ArkTS 编译错误修复思路，以及以 TDD/BDD 为导向的测试落地。</p>
<p>—— 适合希望以“边写边测、快速迭代”打造 BLE 设备应用的团队。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="一开发目标与设备协议概览">一、开发目标与设备协议概览</h2><a class="sl-anchor-link" href="#一开发目标与设备协议概览"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一、开发目标与设备协议概览”</span></a></div>
<ul>
<li>目标设备：蓝牙设备。</li>
<li>典型指令：
<ul>
<li>读取状态、同步时间、输注、读取记录。</li>
</ul>
</li>
</ul>
<p>实现文件与数据模型：</p>
<ul>
<li><code dir="auto">entry/src/main/ets/utils/BleService.ets</code> 扫描与发现、连接、通知、命令发送等一站式封装。</li>
<li><code dir="auto">entry/src/main/ets/utils/BleCommand.ets</code> 指令构造（含 CRC 与长度、时间/剂量编码）。</li>
<li><code dir="auto">entry/src/main/ets/utils/BleResponseParser.ets</code> 响应解析。</li>
<li><code dir="auto">entry/src/main/ets/utils/BleAdvertisingParser.ets</code> 广播数据解析（本地名、UUID、厂商数据等）。</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="二claude-code-如何加速-arkts-原生开发">二、Claude Code 如何加速 ArkTS 原生开发</h2><a class="sl-anchor-link" href="#二claude-code-如何加速-arkts-原生开发"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “二、Claude Code 如何加速 ArkTS 原生开发”</span></a></div>
<ul>
<li>代码导航与重构
<ul>
<li>通过指令快速定位 BLE 相关入口、交叉引用与依赖；批量改名与接口抽取保持一致性。</li>
</ul>
</li>
<li>辅助修复 ArkTS 编译告警/错误
<ul>
<li>自动指出 <code dir="auto">arkts-no-spread</code>、<code dir="auto">unknown/any</code> 等规则触发点，给出替换写法与类型补全建议。</li>
</ul>
</li>
<li>生成测试骨架并补充断言
<ul>
<li>基于 Hypium 的单元测试、UI 集成测试样例可快速落地与扩展。</li>
</ul>
</li>
</ul>
<p>结合这些能力，可以形成“修改 → 运行测试 → 分析日志 → 修复/重构”的高频闭环，显著缩短从协议梳理到端到端可用的周期。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="三蓝牙交互全流程拆解">三、蓝牙交互全流程拆解</h2><a class="sl-anchor-link" href="#三蓝牙交互全流程拆解"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “三、蓝牙交互全流程拆解”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-接收蓝牙广播扫描与解析">1. 接收蓝牙广播（扫描与解析）</h3><a class="sl-anchor-link" href="#1-接收蓝牙广播扫描与解析"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. 接收蓝牙广播（扫描与解析）”</span></a></div>
<ul>
<li>多路径扫描（HarmonyOS API v15+）：
<ul>
<li>入口：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code> <code dir="auto">startScan(...)</code></li>
<li>事件：<code dir="auto">BLEDeviceFind</code> 持续上报，内部使用 <code dir="auto">BleAdvertisingParser</code> 解析本地名、服务 UUID、厂商数据等。</li>
</ul>
</li>
<li>广播解析：<code dir="auto">entry/src/main/ets/utils/BleAdvertisingParser.ets</code>
<ul>
<li>覆盖 Flags、完整/不完整 UUID、Manufacturer Specific Data 等主流 AD 类型，便于快速判断是否为目标设备。</li>
</ul>
</li>
</ul>
<p>配套的发现服务：<code dir="auto">entry/src/main/ets/utils/BleDiscoveryService.ets</code> 封装了发现列表、按 RSSI 排序、超时自动停止与“可信设备”缓存策略，UI 侧直接订阅状态/结果回调即可。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="2-连接设备与开启通知">2. 连接设备与开启通知</h3><a class="sl-anchor-link" href="#2-连接设备与开启通知"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. 连接设备与开启通知”</span></a></div>
<ul>
<li>连接与服务发现后，写入前必须“先订阅、再开通知、再读一次”：
<ul>
<li>启用通知：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code>
<ul>
<li>先 <code dir="auto">gattClient.on('BLECharacteristicChange', ...)</code> 订阅回调</li>
<li>再 <code dir="auto">setCharacteristicChangeNotification(..., true)</code> 开启</li>
<li>可选执行一次 <code dir="auto">readCharacteristicValue</code> 以“预热”通知通道（部分设备需要）</li>
</ul>
</li>
</ul>
</li>
<li>通知回调：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code> <code dir="auto">onCharacteristicChanged(...)</code>
<ul>
<li>使用小写 UUID 比对，规避不同大小写带来的遗漏</li>
<li>将 <code dir="auto">characteristic.characteristicValue</code> 转为 <code dir="auto">ArrayBuffer</code> 后分发给待处理回调或统一协议解析</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="3-指令发送与调试">3. 指令发送与调试</h3><a class="sl-anchor-link" href="#3-指令发送与调试"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. 指令发送与调试”</span></a></div>
<ul>
<li>发送写入：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code> <code dir="auto">sendCommand(...)</code>
<ul>
<li>ArkTS 禁用对象展开（no-spread），需直接修改 <code dir="auto">characteristicValue</code> 后写入</li>
<li>统一输出十六进制串以便排查：<code dir="auto">BleCommand.toHexString(...)</code></li>
</ul>
</li>
<li>指令构建：
<ul>
<li>读状态 <code dir="auto">entry/src/main/ets/utils/BleCommand.ets</code></li>
<li>同步时间 <code dir="auto">entry/src/main/ets/utils/BleCommand.ets</code></li>
<li>输注指令 <code dir="auto">entry/src/main/ets/utils/BleCommand.ets</code>（剂量 ×1000 转整数，小端写入）</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="4-同步时间与读取状态">4. 同步时间与读取状态</h3><a class="sl-anchor-link" href="#4-同步时间与读取状态"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4. 同步时间与读取状态”</span></a></div>
<ul>
<li>同步时间：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code>，写入 0xA7 包含年月日周时分秒，完成后走通知通道校验。</li>
<li>读取状态：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code> → 等待通知 → 解析：<code dir="auto">entry/src/main/ets/utils/BleResponseParser.ets</code>
<ul>
<li>解析电池状态、电压/电量、剩余剂量、单次/日上限、告警位、今日用量、最大日志条数等。</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="5-输注">5. 输注</h3><a class="sl-anchor-link" href="#5-输注"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5. 输注”</span></a></div>
<ul>
<li><code dir="auto">entry/src/main/ets/utils/BleService.ets</code> 调用 <code dir="auto">buildInjectionCommand(dose)</code></li>
<li><code dir="auto">entry/src/main/ets/utils/BleCommand.ets</code> 剂量按千分精度编码为 4 字节小端整数，满足“较大/高精度剂量”场景。</li>
<li>建议：
<ul>
<li>结合状态中的单次/日上限做前置校验，必要时分包或分次下发；</li>
<li>关注 MTU（典型 20 字节）限制与指令长度设计。</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="6-获取日志记录解析">6. 获取日志（记录解析）</h3><a class="sl-anchor-link" href="#6-获取日志记录解析"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6. 获取日志（记录解析）”</span></a></div>
<ul>
<li>通知处理分流：<code dir="auto">entry/src/main/ets/utils/BleService.ets</code> <code dir="auto">processReceivedData(...)</code>
<ul>
<li>“ 路径调用记录解析：<code dir="auto">entry/src/main/ets/utils/BleResponseParser.ets</code> <code dir="auto">parseRecord(...)</code></li>
<li>支持注射记录与操作记录两类结构化数据。</li>
</ul>
</li>
<li>若需“按索引/类型拉取历史记录”，可在 <code dir="auto">BleCommand</code> 中补齐 <code dir="auto">READ_RECORD_WITH_TYPE </code> 构造（工程中已留注释模板），与上面的解析逻辑无缝对接。</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="四arkts-编译错误与修复要点">四、ArkTS 编译错误与修复要点</h2><a class="sl-anchor-link" href="#四arkts-编译错误与修复要点"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “四、ArkTS 编译错误与修复要点”</span></a></div>
<p>文档汇总：<code dir="auto">docs/ble-arkts-fix-summary.md</code></p>
<ul>
<li>类属性缺失
<ul>
<li>如 <code dir="auto">connectionPromiseResolvers</code> 未声明，需补充为 <code dir="auto">Map&#x3C;string,  => void></code>，用于连接 Promise 的外部解析。</li>
</ul>
</li>
<li><code dir="auto">arkts-no-spread</code>
<ul>
<li>写特征值时禁止对象展开，直接改 <code dir="auto">existing.characteristicValue = ...</code>（见 <code dir="auto">BleService.ets</code> 段落）。</li>
</ul>
</li>
<li><code dir="auto">unknown/any</code> 与宽松字面量
<ul>
<li>通知回调中移除 <code dir="auto">Record&#x3C;string, string></code>/<code dir="auto">unknown</code> 临时断言，改为强类型访问；</li>
</ul>
</li>
<li>通知匹配与日志
<ul>
<li>UUID 小写比对，详细打印 <code dir="auto">service/char UUID</code> 与十六进制载荷，便于现场排障。</li>
</ul>
</li>
</ul>
<p>这些修复在不改变业务语义的前提下，让代码同时满足 ArkTS 语义与 Lint 规则，构建稳定且可维护。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="五tdd-与-bdd-测试实践">五、TDD 与 BDD 测试实践</h2><a class="sl-anchor-link" href="#五tdd-与-bdd-测试实践"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “五、TDD 与 BDD 测试实践”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-单元测试tdd">1. 单元测试（TDD）</h3><a class="sl-anchor-link" href="#1-单元测试tdd"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. 单元测试（TDD）”</span></a></div>
<ul>
<li>设备发现与缓存
<ul>
<li><code dir="auto">entry/src/ohosTest/ets/test/BleDiscoveryService.test.ets</code></li>
<li><code dir="auto">entry/src/ohosTest/ets/test/DeviceCache.test.ets</code></li>
</ul>
</li>
<li>覆盖点：
<ul>
<li>扫描状态流转、按名称过滤、RSSI 排序、自动停止；</li>
<li>可信设备标记、缓存清理、容量上限、过期统计等。</li>
</ul>
</li>
<li>运行：
<ul>
<li><code dir="auto">hvigor test</code></li>
<li>按文件过滤：<code dir="auto">hvigor test --filter BleDiscoveryService</code></li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="2-行为驱动bdd与-ui-集成">2. 行为驱动（BDD）与 UI 集成</h3><a class="sl-anchor-link" href="#2-行为驱动bdd与-ui-集成"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. 行为驱动（BDD）与 UI 集成”</span></a></div>
<ul>
<li>场景用例：<code dir="auto">entry/src/ohosTest/ets/test/BleUIIntegration.test.ets</code>
<ul>
<li>启动 → 开始扫描 → 发现设备 → 连接 → 同步时间/刷新状态/发送输注 → 断开。</li>
<li>利用 <code dir="auto">@kit.TestKit</code> 的 <code dir="auto">Driver</code> 查找按钮、点击与断言，保障“从 UI 到协议”的端到端路径。</li>
</ul>
</li>
<li>运行：
<ul>
<li>全量集成测试：<code dir="auto">hvigor test --integration</code></li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="3-断言与超时策略">3. 断言与超时策略</h3><a class="sl-anchor-link" href="#3-断言与超时策略"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. 断言与超时策略”</span></a></div>
<ul>
<li>BLE 环节多为异步回调：为扫描/连接/写入/通知分别设置合理超时（如 5–15s），避免误报；</li>
<li>对关键 UI 文案与按钮可多次尝试查找，提升稳定性；</li>
<li>以十六进制日志为断言辅助（见 <code dir="auto">BleService.ets</code>/<code dir="auto">BleService.ets</code>）。</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="六实战建议与常见坑">六、实战建议与常见坑</h2><a class="sl-anchor-link" href="#六实战建议与常见坑"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “六、实战建议与常见坑”</span></a></div>
<ul>
<li>通知顺序与“预热”
<ul>
<li>订阅 → 打开通知 → 先读一次，能显著提升部分设备第一次下行响应的成功率。</li>
</ul>
</li>
<li>MTU 与指令长度
<ul>
<li>典型 BLE 4.2 仅 20 字节，复杂指令需要分拆或升级端侧/固件侧协商策略。</li>
</ul>
</li>
<li>小端编码与 CRC
<ul>
<li>指令总长度、字段编码与 CRC16（CCITT/False）计算需与固件严格对齐。</li>
</ul>
</li>
<li>HiLog 代替 console
<ul>
<li>统一域/Tag 与 <code dir="auto">%{public}</code> 输出（见 <code dir="auto">docs/hilog-migration-summary.md</code>），便于线下与现场定位。</li>
</ul>
</li>
<li>权限与蓝牙状态
<ul>
<li>统一入口：<code dir="auto">entry/src/main/ets/utils/BlePermissionManager.ets</code> <code dir="auto">ensureBleReady(...)</code>，在进入扫描前一次性处理权限与适配器状态。</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="七结语与下一步">七、结语与下一步</h2><a class="sl-anchor-link" href="#七结语与下一步"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “七、结语与下一步”</span></a></div>
<p>得益于 Claude Code 的“代码导航 + 编译修复 + 测试生成功能”，我们用最少的往返就完成了从协议梳理到端到端跑通的闭环：</p>
<ul>
<li>蓝牙交互：扫描、连接、通知、命令、记录解析全链路打通；</li>
<li>ArkTS 修复：严格遵循语义与 Lint 规则，构建稳定；</li>
<li>TDD/BDD：单元与 UI 集成测试覆盖主要场景，便于持续回归。</li>
</ul>
<p>推荐的后续工作：</p>
<ul>
<li>在 <code dir="auto">BleCommand</code> 中补齐 <code dir="auto">READ_RECORD_WITH_TYPE </code> 指令构造，与现有解析对接，完善“按索引拉取日志”。</li>
<li>引入更细粒度的 ViewModel 层状态管理与数据持久化，配合记录同步形成完整“云-端-设备”闭环。</li>
<li>梳理异常码与重试策略，增强断网/重连下的健壮性。</li>
</ul> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/arkts/" class="astro-sg3lsd66">ArkTS</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/harmonyos/" class="astro-sg3lsd66">HarmonyOS</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ble/" class="astro-sg3lsd66">BLE</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/bluetooth-low-energy/" class="astro-sg3lsd66">Bluetooth Low Energy</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/huawei/harmony-os/ble/2025-09-20-claude-code-auto-migrate-harmonyos-ble-v15-multi-scan-connection/" class="astro-dr56dw7m">Claude Code 自动迁移 HarmonyOS BLE v15+ 多路扫描与连接管理</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-20T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月20日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <div class="sl-heading-wrapper level-h2"><h2 id="省流版">省流版</h2><a class="sl-anchor-link" href="#省流版"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “省流版”</span></a></div>
<p>之前项目中使用的 HarmonyOS BLE API 版本较低（v14及以前），存在单路扫描限制、资源管理不完善等问题。</p>
<p>现在使用Claude Code生成和修改代码，帮助我理解并自动迁移到最新的 HarmonyOS BLE API v15+，实现多路扫描和更健壮的连接管理。</p>
<p>最后总结记录了从 v14 迁移到 v15+ 的完整过程，重点介绍多路扫描支持、广播数据解析和连接管理优化。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="背景">背景</h2><a class="sl-anchor-link" href="#背景"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “背景”</span></a></div>
<p>在 HarmonyOS 生态中，BLE（Bluetooth Low Energy）是智能设备互联的重要技术。随着应用需求的增加，单路扫描的限制逐渐显现，尤其是在需要同时扫描多个设备或服务的场景下。</p>
<p>HarmonyOS 在 API version 15 中引入了多路扫描支持，允许应用创建多个独立的扫描实例，提升了资源管理和扫描灵活性。</p>
<p>然而，现有项目代码仍然基于旧版 API，存在以下问题：</p>
<ol>
<li><strong>单路扫描限制</strong>：只能同时进行一个扫描任务，无法满足多设备扫描需求。</li>
<li><strong>资源管理不完善</strong>：扫描器实例未独立管理，导致状态混乱。</li>
<li><strong>缺少广播数据解析</strong>：扫描结果未解析广播数据，影响设备信息获取。</li>
<li><strong>连接管理简单</strong>：缺少重试和自动重连机制，影响连接稳定性。</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="目标">目标</h2><a class="sl-anchor-link" href="#目标"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “目标”</span></a></div>
<p>基于最新的 HarmonyOS BLE API v15+，重构现有的 BLE 服务代码，实现以下目标：</p>
<ol>
<li><strong>多路扫描支持</strong>：允许同时运行多个扫描任务，每个任务独立管理。</li>
<li><strong>独立资源管理</strong>：每个扫描器实例独立控制，避免冲突。</li>
<li><strong>完整的广播数据解析</strong>：实现对 BLE 广播数据的解析功能。</li>
<li><strong>增强的连接管理</strong>：实现连接重试和自动重连机制，提升连接稳定性。</li>
<li><strong>现代化的异步处理</strong>：使用 Promise/async-await 处理异步 BLE 操作。</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="迁移过程">迁移过程</h2><a class="sl-anchor-link" href="#迁移过程"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “迁移过程”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-阅读官方文档">1. 阅读官方文档</h3><a class="sl-anchor-link" href="#1-阅读官方文档"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. 阅读官方文档”</span></a></div>
<p>在开始迁移之前，首先需要下载官方文档，让 Claude Code 了解 HarmonyOS BLE API v15+ 的新特性和变更。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="2-使用-claude-code-生成迁移建议">2. 使用 Claude Code 生成迁移建议</h3><a class="sl-anchor-link" href="#2-使用-claude-code-生成迁移建议"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. 使用 Claude Code 生成迁移建议”</span></a></div>
<p>我将官方文档内容提供给 Claude Code，并请求它分析现有代码中的问题，并执行迁移到最新 API 的步骤。</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#096E72">></span><span style="--0:#D6DEEB;--1:#403F53"> @harmony-os-docs/cn/doc/harmonyos-guides/ble-development-guide.md 推荐使用API version</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">15开始支持的扫描方式，该方式支持应用发起和管理多路扫描。不要再使用</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">version</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">14及以前支持的扫描方式只支持应用发起单路扫描</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">⎿</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#ECC48D;--1:#3B61B0">Read</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">harmony-os-docs/cn/doc/harmonyos-guides/ble-development-guide.md</span><span style="--0:#D6DEEB;--1:#403F53"> (806 </span><span style="--0:#ECC48D;--1:#3B61B0">lines</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">⏺</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">我理解了，这份文档强调了HarmonyOS</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">BLE开发的重要更新：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">关键要点</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">API版本升级建议：</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">推荐：使用API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">version</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">15+的多路扫描方式</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">避免：API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">version</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">14及以前的单路扫描方式</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">主要差异对比</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">v15+</span><span style="--0:#D6DEEB;--1:#403F53"> (推荐方式)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">创建独立的扫描实例，支持多路扫描管理</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3B61B0">let</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bleScanner:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ble.BleScanner</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ble.createBleScanner</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">订阅扫描结果</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">bleScanner.on(</span><span style="--0:#82AAFF;--1:#3B61B0">'BLEDeviceFind'</span><span style="--0:#82AAFF;--1:#3B61B0">,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">onReceiveEvent</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">启动扫描</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">bleScanner.startScan([scanFilter],</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">scanOptions</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">停止扫描</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">bleScanner.stopScan</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">优势：</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">✅</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">支持多路并发扫描</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">✅</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">每个扫描实例独立管理</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">✅</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">更灵活的资源控制</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">✅</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">更好的扫描隔离性</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">v14及以前</span><span style="--0:#D6DEEB;--1:#403F53"> (不推荐)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">//</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">全局单例扫描，仅支持单路</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">ble.on(</span><span style="--0:#82AAFF;--1:#3B61B0">'BLEDeviceFind'</span><span style="--0:#82AAFF;--1:#3B61B0">,</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">onReceiveEvent</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">ble.startBLEScan([scanFilter],</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">scanOptions</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">ble.stopBLEScan</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">局限：</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">❌</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">仅支持单路扫描</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">❌</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">全局状态管理复杂</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">-</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">❌</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">无法同时管理多个扫描任务</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">实施建议</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">根据文档中的示例代码（BleScanManager类），建议项目采用以下架构：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">1.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">使用BleScanner实例管理：每个扫描任务创建独立的BleScanner实例</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">2.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">封装扫描管理器：如文档中的BleScanManager类，统一管理扫描生命周期</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">3.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">完整的广播解析：实现完整的BLE广播数据解析功能</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">4.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">异步操作处理：使用Promise/async-await处理异步BLE操作</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">这种升级对于HarmonyOS项目特别重要，因为应用可能需要同时扫描多个设备或执行不同类型的扫描任务。</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">我将基于HarmonyOS</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">v15+的最新规范重构BleService.ets，实现多路扫描管理和更现代化的BLE操作架构。</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">⏺</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">代码分析</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">现有BleService.ets存在以下关键问题：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">1.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">使用已废弃的API</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">v14单路扫描：使用ble.startBLEScan</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#ECC48D;--1:#3B61B0">和ble.on</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3B61B0">'BLEDeviceFind'</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">2.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">缺少BLE广播数据解析：未解析扫描结果中的广播数据</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">3.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">资源管理不完善：扫描器实例未独立管理</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">4.</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">错误处理简单：缺少细粒度的错误恢复机制</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">...</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> @harmony-os-docs/cn/doc/harmonyos-guides/ble-development-guide.md 推荐使用API version  15开始支持的扫描方式，该方式支持应用发起和管理多路扫描。不要再使用 API version  14及以前支持的扫描方式只支持应用发起单路扫描  ⎿  Read harmony-os-docs/cn/doc/harmonyos-guides/ble-development-guide.md (806 lines)⏺ 我理解了，这份文档强调了HarmonyOS BLE开发的重要更新：  关键要点  API版本升级建议：  - 推荐：使用API version 15+的多路扫描方式  - 避免：API version 14及以前的单路扫描方式  主要差异对比  API v15+ (推荐方式)  // 创建独立的扫描实例，支持多路扫描管理  let bleScanner: ble.BleScanner = ble.createBleScanner();  // 订阅扫描结果  bleScanner.on(&#x27;BLEDeviceFind&#x27;, onReceiveEvent);  // 启动扫描  bleScanner.startScan([scanFilter], scanOptions);  // 停止扫描  bleScanner.stopScan();  优势：  - ✅ 支持多路并发扫描  - ✅ 每个扫描实例独立管理  - ✅ 更灵活的资源控制  - ✅ 更好的扫描隔离性  API v14及以前 (不推荐)  // 全局单例扫描，仅支持单路  ble.on(&#x27;BLEDeviceFind&#x27;, onReceiveEvent);  ble.startBLEScan([scanFilter], scanOptions);  ble.stopBLEScan();  局限：  - ❌ 仅支持单路扫描  - ❌ 全局状态管理复杂  - ❌ 无法同时管理多个扫描任务  实施建议  根据文档中的示例代码（BleScanManager类），建议项目采用以下架构：  1. 使用BleScanner实例管理：每个扫描任务创建独立的BleScanner实例  2. 封装扫描管理器：如文档中的BleScanManager类，统一管理扫描生命周期  3. 完整的广播解析：实现完整的BLE广播数据解析功能  4. 异步操作处理：使用Promise/async-await处理异步BLE操作  这种升级对于HarmonyOS项目特别重要，因为应用可能需要同时扫描多个设备或执行不同类型的扫描任务。我将基于HarmonyOS API v15+的最新规范重构BleService.ets，实现多路扫描管理和更现代化的BLE操作架构。⏺ 代码分析  现有BleService.ets存在以下关键问题：  1. 使用已废弃的API v14单路扫描：使用ble.startBLEScan()和ble.on(&#x27;BLEDeviceFind&#x27;)  2. 缺少BLE广播数据解析：未解析扫描结果中的广播数据  3. 资源管理不完善：扫描器实例未独立管理  4. 错误处理简单：缺少细粒度的错误恢复机制..."><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="3-生成迁移代码">3. 生成迁移代码</h3><a class="sl-anchor-link" href="#3-生成迁移代码"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. 生成迁移代码”</span></a></div>
<p>Claude Code 根据分析结果，生成了新的 <code dir="auto">BleService.ets</code> 代码，包含多路扫描支持、广播数据解析和增强的连接管理功能。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">481</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">482</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#919F9F;--1:#5D6376">// Pending response callbacks</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">483</span><span style="--0:#D6DEEB;--1:#403F53">      private pendingCallbacks: Map</span><span style="--0:#C792EA;--1:#8844AE">&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53">string, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">data</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">ArrayBuffer</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">484</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">485</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#919F9F;--1:#5F636F">/**</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">486 +     * Clean up scanner resources</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">487 +     */</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">488</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    private </span><span style="--0:#82AAFF;--1:#3B61B0">cleanupScanner</span><span style="--0:#D6DEEB;--1:#403F53">(scanId: string): </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">489</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#919F9F;--1:#5D6376">// Clear timer</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">490</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">timer</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanTimers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">get</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">491</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (timer) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">492</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3B61B0">clearTimeout</span><span style="--0:#D6DEEB;--1:#403F53">(timer);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">493</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanTimers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">494</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">495</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">496</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#919F9F;--1:#5D6376">// Remove from active set</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">497</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">activeScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">498</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">499</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#919F9F;--1:#5D6376">// Clean up scanner instance</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">500</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">bleScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">501</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanCallbacks</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">502</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">503</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">504</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#919F9F;--1:#5F636F">/**</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">505 +     * Set up periodic cleanup of stale discovered devices</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">506 +     */</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">507</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    private </span><span style="--0:#82AAFF;--1:#3B61B0">setupDeviceCleanupTimer</span><span style="--0:#D6DEEB;--1:#403F53">(): </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">508</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#82AAFF;--1:#3B61B0">setInterval</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">509</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">now</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">Date</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">now</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">510</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">staleThreshold</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#F78C6C;--1:#AA0982">60000</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#919F9F;--1:#5D6376">// 60 seconds</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">511</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">512</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8844AE">for</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">const [</span><span style="--0:#82AAFF;--1:#3B61B0">deviceId</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#82AAFF;--1:#3B61B0">lastSeen</span><span style="--0:#C792EA;--1:#8844AE">] </span><span style="--0:#7FDBCA;--1:#096E72">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">deviceLastSeenTime</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">entries</span><span style="--0:#D6DEEB;--1:#403F53">()) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">513</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (now </span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#D6DEEB;--1:#403F53"> lastSeen </span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> staleThreshold) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">514</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#919F9F;--1:#5D6376">// Remove stale devices not connected</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">515</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">connectedDevices</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">has</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId)) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">516</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">discoveredDevices</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">517</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">deviceLastSeenTime</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">518</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">              hilog</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">info</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3B61B0">DOMAIN</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">TAG</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">Removed stale device: </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">deviceId</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">519</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">520</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">521</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">522</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      }, </span><span style="--0:#F78C6C;--1:#AA0982">30000</span><span style="--0:#D6DEEB;--1:#403F53">); </span><span style="--0:#919F9F;--1:#5D6376">// Run every 30 seconds</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">523</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">524</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">525</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#919F9F;--1:#5F636F">/**</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">526 +     * Get all discovered devices (including non-connected)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">527 +     */</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">528</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    public </span><span style="--0:#82AAFF;--1:#3B61B0">getDiscoveredDevices</span><span style="--0:#D6DEEB;--1:#403F53">(): BleDevice[] {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">529</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> Array</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">from</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">discoveredDevices</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">values</span><span style="--0:#D6DEEB;--1:#403F53">());</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">530</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">531</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">532</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#919F9F;--1:#5F636F">/**</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">533 +     * Get active scanner IDs</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">534 +     */</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">535</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    public </span><span style="--0:#82AAFF;--1:#3B61B0">getActiveScanners</span><span style="--0:#D6DEEB;--1:#403F53">(): string[] {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">536</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> Array</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">from</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">activeScanners</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">537</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">538</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">539</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#919F9F;--1:#5F636F">/**</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">540 +     * Create targeted scan for specific device</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#919F9F;--1:#5F636F">       </span></span><span style="--0:#919F9F;--1:#5F636F">541 +     */</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">542</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    public async </span><span style="--0:#82AAFF;--1:#3B61B0">scanForDevice</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">543</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      deviceId: string,</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">544</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      timeout: number </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10000</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">545</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">    ): </span><span style="--0:#C5E478;--1:#3B61B0">Promise</span><span style="--0:#C792EA;--1:#8844AE">&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53">BleDevice </span><span style="--0:#C792EA;--1:#8844AE">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">null</span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">546</span><span style="--0:#D6DEEB;--1:#403F53"> +      return new Promise((resolve, reject) => {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">547</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">scanId</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">targeted-</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">deviceId</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0">-</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">Date</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">now</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">548</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">549</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">550</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          scanId,</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">551</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">device</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">552</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (device</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">id</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">===</span><span style="--0:#D6DEEB;--1:#403F53"> deviceId) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">553</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">stopScan</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">554</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">              </span><span style="--0:#82AAFF;--1:#3B61B0">resolve</span><span style="--0:#D6DEEB;--1:#403F53">(device);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">555</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">556</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          },</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">557</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          { timeout }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">558</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        );</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">559</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">560</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#919F9F;--1:#5D6376">// Set timeout for not finding device</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">561</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3B61B0">setTimeout</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">562</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">activeScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">has</span><span style="--0:#D6DEEB;--1:#403F53">(scanId)) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">563</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">stopScan</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">564</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">            </span><span style="--0:#82AAFF;--1:#3B61B0">resolve</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#FF6A83;--1:#A24848">null</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">565</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">          }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">566</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">        }, timeout);</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">567</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">+</span><span style="--0:#D6DEEB;--1:#403F53">      });</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">568</span><span style="--0:#D6DEEB;--1:#403F53"> +    }</span></div></div><div class="ec-line"><div class="code"><span class="indent">       </span><span style="--0:#F78C6C;--1:#AA0982">569</span><span style="--0:#D6DEEB;--1:#403F53">    }</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="       481       482      // Pending response callbacks       483      private pendingCallbacks: Map<string, (data: ArrayBuffer) => void> = new Map();       484 +       485 +    /**       486 +     * Clean up scanner resources       487 +     */       488 +    private cleanupScanner(scanId: string): void {       489 +      // Clear timer       490 +      const timer = this.scanTimers.get(scanId);       491 +      if (timer) {       492 +        clearTimeout(timer);       493 +        this.scanTimers.delete(scanId);       494 +      }       495 +       496 +      // Remove from active set       497 +      this.activeScanners.delete(scanId);       498 +       499 +      // Clean up scanner instance       500 +      this.bleScanners.delete(scanId);       501 +      this.scanCallbacks.delete(scanId);       502 +    }       503 +       504 +    /**       505 +     * Set up periodic cleanup of stale discovered devices       506 +     */       507 +    private setupDeviceCleanupTimer(): void {       508 +      setInterval(() => {       509 +        const now = Date.now();       510 +        const staleThreshold = 60000; // 60 seconds       511 +       512 +        for (const [deviceId, lastSeen] of this.deviceLastSeenTime.entries()) {       513 +          if (now - lastSeen > staleThreshold) {       514 +            // Remove stale devices not connected       515 +            if (!this.connectedDevices.has(deviceId)) {       516 +              this.discoveredDevices.delete(deviceId);       517 +              this.deviceLastSeenTime.delete(deviceId);       518 +              hilog.info(DOMAIN, TAG, &#x60;Removed stale device: ${deviceId}&#x60;);       519 +            }       520 +          }       521 +        }       522 +      }, 30000); // Run every 30 seconds       523 +    }       524 +       525 +    /**       526 +     * Get all discovered devices (including non-connected)       527 +     */       528 +    public getDiscoveredDevices(): BleDevice[] {       529 +      return Array.from(this.discoveredDevices.values());       530 +    }       531 +       532 +    /**       533 +     * Get active scanner IDs       534 +     */       535 +    public getActiveScanners(): string[] {       536 +      return Array.from(this.activeScanners);       537 +    }       538 +       539 +    /**       540 +     * Create targeted scan for specific device       541 +     */       542 +    public async scanForDevice(       543 +      deviceId: string,       544 +      timeout: number = 10000       545 +    ): Promise<BleDevice | null> {       546 +      return new Promise((resolve, reject) => {       547 +        const scanId = &#x60;targeted-${deviceId}-${Date.now()}&#x60;;       548 +       549 +        this.startScan(       550 +          scanId,       551 +          (device) => {       552 +            if (device.id === deviceId) {       553 +              this.stopScan(scanId);       554 +              resolve(device);       555 +            }       556 +          },       557 +          { timeout }       558 +        );       559 +       560 +        // Set timeout for not finding device       561 +        setTimeout(() => {       562 +          if (this.activeScanners.has(scanId)) {       563 +            this.stopScan(scanId);       564 +            resolve(null);       565 +          }       566 +        }, timeout);       567 +      });       568 +    }       569    }"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="4-代码审查与测试">4. 代码审查与测试</h3><a class="sl-anchor-link" href="#4-代码审查与测试"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4. 代码审查与测试”</span></a></div>
<p>我对生成的代码进行了详细审查，确保符合项目需求，并在实际设备上进行了全面测试，验证多路扫描和连接管理功能的稳定性。</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">hdc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">file</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">send</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">entry/build/default/outputs/ohosTest/entry-ohosTest-signed.hap</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">data/local/tmp/6a550b34422f402d80438c69110c772e</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">hdc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">shell</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-p</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">data/local/tmp/6a550b34422f402d80438c69110c772e</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">hdc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">shell</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">rm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-rf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">data/local/tmp/6a550b34422f402d80438c69110c772e</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Running</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">tests.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">$</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">hdc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">shell</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">aa</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">test</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-b</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">com.vibersparking.ble_test</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-m</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">entry_test</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">unittest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">OpenHarmonyTestRunner</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">BleServiceTest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-s</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">timeout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">15000</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Started</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">running</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">tests.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">Test</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">finished.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="$ hdc file send entry/build/default/outputs/ohosTest/entry-ohosTest-signed.hap &#x22;data/local/tmp/6a550b34422f402d80438c69110c772e&#x22;$ hdc shell bm install -p data/local/tmp/6a550b34422f402d80438c69110c772e$ hdc shell rm -rf data/local/tmp/6a550b34422f402d80438c69110c772eRunning tests.$ hdc shell aa test -b com.vibersparking.ble_test -m entry_test -s unittest OpenHarmonyTestRunner -s class BleServiceTest -s timeout 15000Started running tests.Test finished."><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="5-总结文档">5. 总结文档</h3><a class="sl-anchor-link" href="#5-总结文档"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5. 总结文档”</span></a></div>
<p>最后让Claude Code生成了完整的总结文件，记录了从HarmonyOS BLE API v14迁移到v15+的完整过程，包括多路扫描支持、广播数据解析和增强的连接管理功能。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="核心变更">核心变更</h2><a class="sl-anchor-link" href="#核心变更"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “核心变更”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-api版本对比">1. API版本对比</h3><a class="sl-anchor-link" href="#1-api版本对比"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. API版本对比”</span></a></div>



































<table><thead><tr><th>特性</th><th>API v14及之前</th><th>API v15+</th></tr></thead><tbody><tr><td>扫描方式</td><td>单路扫描（全局）</td><td>多路扫描（实例化）</td></tr><tr><td>扫描器管理</td><td><code dir="auto">ble.startBLEScan()</code></td><td><code dir="auto">ble.createBleScanner()</code></td></tr><tr><td>扫描事件</td><td><code dir="auto">ble.on('BLEDeviceFind')</code></td><td><code dir="auto">bleScanner.on('BLEDeviceFind')</code></td></tr><tr><td>停止扫描</td><td><code dir="auto">ble.stopBLEScan()</code></td><td><code dir="auto">bleScanner.stopScan()</code></td></tr><tr><td>资源管理</td><td>全局状态</td><td>独立实例管理</td></tr></tbody></table>
<div class="sl-heading-wrapper level-h3"><h3 id="2-关键优势">2. 关键优势</h3><a class="sl-anchor-link" href="#2-关键优势"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. 关键优势”</span></a></div>
<ul>
<li><strong>多路并发扫描</strong>：支持同时运行多个扫描任务</li>
<li><strong>独立资源管理</strong>：每个扫描器独立控制，避免冲突</li>
<li><strong>更好的错误隔离</strong>：单个扫描失败不影响其他扫描</li>
<li><strong>灵活的过滤配置</strong>：每个扫描可设置独立过滤条件</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="实现架构">实现架构</h2><a class="sl-anchor-link" href="#实现架构"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “实现架构”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="核心服务结构">核心服务结构</h3><a class="sl-anchor-link" href="#核心服务结构"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “核心服务结构”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">BleService</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// API v15+ 扫描器管理</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> bleScanners</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Map</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#889FB2;--1:#4D667B">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FFCB8B;--1:#111111">BleScanner</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> activeScanners</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Set</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Set</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> scanCallbacks</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Map</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">device</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">BleDevice</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">void</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> scanTimers</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Map</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3B61B0">number</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 设备缓存管理</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> discoveredDevices</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Map</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#FFCB8B;--1:#111111">BleDevice</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> deviceLastSeenTime</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Map</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3B61B0">number</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 连接管理</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> autoReconnectDevices</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Set</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Set</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">private</span><span style="--0:#D6DEEB;--1:#403F53"> connectionRetryCount</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Map</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#C5E478;--1:#3B61B0">number</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="export class BleService {  // API v15+ 扫描器管理  private bleScanners: Map<string, ble.BleScanner> = new Map();  private activeScanners: Set<string> = new Set();  private scanCallbacks: Map<string, (device: BleDevice) => void> = new Map();  private scanTimers: Map<string, number> = new Map();  // 设备缓存管理  private discoveredDevices: Map<string, BleDevice> = new Map();  private deviceLastSeenTime: Map<string, number> = new Map();  // 连接管理  private autoReconnectDevices: Set<string> = new Set();  private connectionRetryCount: Map<string, number> = new Map();}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="多路扫描实现">多路扫描实现</h3><a class="sl-anchor-link" href="#多路扫描实现"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “多路扫描实现”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">public </span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">scanId: string,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">callback: </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">device</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">BleDevice</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">options</span><span style="--0:#C792EA;--1:#8844AE">?:</span><span style="--0:#D6DEEB;--1:#403F53"> BleStartScanOptions</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">): </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 检查扫描ID唯一性</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">activeScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">has</span><span style="--0:#D6DEEB;--1:#403F53">(scanId)) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">hilog</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">warn</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#82AAFF;--1:#3B61B0">DOMAIN</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#82AAFF;--1:#3B61B0">TAG</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">Scanner </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">scanId</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0"> already active</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">try</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// 创建独立扫描器实例 (API v15+)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">bleScanner</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">createBleScanner</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">bleScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">set</span><span style="--0:#D6DEEB;--1:#403F53">(scanId, bleScanner);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanCallbacks</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">set</span><span style="--0:#D6DEEB;--1:#403F53">(scanId, callback);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// 配置扫描过滤器</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">scanFilters</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#C792EA;--1:#8844AE"> ble.</span><span style="--0:#FFCB8B;--1:#111111">ScanFilter</span><span style="--0:#D6DEEB;--1:#403F53">[]</span><span style="--0:#C792EA;--1:#8844AE"> =</span><span style="--0:#D6DEEB;--1:#403F53"> [];</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (options</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">filterServiceUuid</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">scanFilters</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">push</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">serviceUuid: </span><span style="--0:#82AAFF;--1:#3B61B0">SERVICE_UUID</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// 订阅扫描结果</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">bleScanner</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">on</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">BLEDeviceFind</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">scanReport</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--1:#111111"><span style="--0:#FFCB8B">ScanReport</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">onDeviceFoundV15</span><span style="--0:#D6DEEB;--1:#403F53">(scanId, scanReport);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// 启动扫描</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">bleScanner</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(scanFilters, scanOptions);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">activeScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// 设置自动停止定时器</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">timeout</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">options</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">timeout</span><span style="--0:#C792EA;--1:#8844AE"> || </span><span style="--0:#82AAFF;--1:#3B61B0">SCAN_TIMEOUT_MS</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">timer</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#82AAFF;--1:#3B61B0">setTimeout</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">if </span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">activeScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">has</span><span style="--0:#D6DEEB;--1:#403F53">(scanId))</span><span style="--0:#C792EA;--1:#8844AE"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">stopScan</span><span style="--0:#D6DEEB;--1:#403F53">(scanId)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}, </span><span style="--0:#D6DEEB;--1:#403F53">timeout);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanTimers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">set</span><span style="--0:#D6DEEB;--1:#403F53">(scanId, timer);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#C792EA;--1:#8844AE">catch</span><span style="--0:#D6DEEB;--1:#403F53"> (error) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">cleanupScanner</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">throw</span><span style="--0:#D6DEEB;--1:#403F53"> error;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public startScan(  scanId: string,  callback: (device: BleDevice) => void,  options?: BleStartScanOptions): void {  // 检查扫描ID唯一性  if (this.activeScanners.has(scanId)) {    hilog.warn(DOMAIN, TAG, &#x60;Scanner ${scanId} already active&#x60;);    return;  }  try {    // 创建独立扫描器实例 (API v15+)    const bleScanner = ble.createBleScanner();    this.bleScanners.set(scanId, bleScanner);    this.scanCallbacks.set(scanId, callback);    // 配置扫描过滤器    const scanFilters: ble.ScanFilter[] = [];    if (options?.filterServiceUuid) {      scanFilters.push({        serviceUuid: SERVICE_UUID      });    }    // 订阅扫描结果    bleScanner.on(&#x27;BLEDeviceFind&#x27;, (scanReport: ble.ScanReport) => {      this.onDeviceFoundV15(scanId, scanReport);    });    // 启动扫描    bleScanner.startScan(scanFilters, scanOptions);    this.activeScanners.add(scanId);    // 设置自动停止定时器    const timeout = options?.timeout || SCAN_TIMEOUT_MS;    const timer = setTimeout(() => {      if (this.activeScanners.has(scanId)) {        this.stopScan(scanId);      }    }, timeout);    this.scanTimers.set(scanId, timer);  } catch (error) {    this.cleanupScanner(scanId);    throw error;  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="ble广播数据解析器">BLE广播数据解析器</h3><a class="sl-anchor-link" href="#ble广播数据解析器"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “BLE广播数据解析器”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">BleAdvertisingParser</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">public</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">parse</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">data</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">ArrayBuffer</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">ParsedAdvertisingData</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">result</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#FFCB8B;--1:#111111">ParsedAdvertisingData</span><span style="--0:#C792EA;--1:#8844AE"> = {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">serviceUuids:</span><span style="--0:#D6DEEB;--1:#403F53"> []</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">serviceSolicitationUuids:</span><span style="--0:#D6DEEB;--1:#403F53"> []</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">serviceData: </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">manufactureSpecificData: </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">Map</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">rawData: </span><span style="--0:#D6DEEB;--1:#403F53">data</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">advData</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">Uint8Array</span><span style="--0:#D6DEEB;--1:#403F53">(data);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">let</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#D6DEEB;--1:#403F53">position</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">while</span><span style="--0:#D6DEEB;--1:#403F53"> (position </span><span style="--0:#C792EA;--1:#8844AE">&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> advData</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">byteLength</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">length</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">advData[position</span><span style="--0:#C792EA;--1:#8844AE">++</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (length </span><span style="--0:#C792EA;--1:#8844AE">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">type</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">advData[position</span><span style="--0:#C792EA;--1:#8844AE">++</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">dataLength</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">length</span><span style="--0:#C792EA;--1:#8844AE"> - </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">dataStart</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">position;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">switch</span><span style="--0:#D6DEEB;--1:#403F53"> (type) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> AdvertisingDataType</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">FLAGS</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">result</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">flags</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> advData[dataStart];</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> AdvertisingDataType</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">LOCAL_NAME_COMPLETE</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">result</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">localName</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">parseString</span><span style="--0:#D6DEEB;--1:#403F53">(advData, dataStart, dataLength);</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> AdvertisingDataType</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">SERVICE_UUID_16_COMPLETE</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">parseServiceUuids</span><span style="--0:#D6DEEB;--1:#403F53">(advData, dataStart, dataLength, </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">, result</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">serviceUuids</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> AdvertisingDataType</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">MANUFACTURER_SPECIFIC_DATA</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">parseManufacturerData</span><span style="--0:#D6DEEB;--1:#403F53">(advData, dataStart, dataLength, result</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">manufactureSpecificData</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">position </span><span style="--0:#C792EA;--1:#8844AE">+=</span><span style="--0:#D6DEEB;--1:#403F53"> dataLength;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> result;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="export class BleAdvertisingParser {  public parse(data: ArrayBuffer): ParsedAdvertisingData {    const result: ParsedAdvertisingData = {      serviceUuids: [],      serviceSolicitationUuids: [],      serviceData: new Map(),      manufactureSpecificData: new Map(),      rawData: data    };    const advData = new Uint8Array(data);    let position = 0;    while (position < advData.byteLength) {      const length = advData[position++];      if (length === 0) break;      const type = advData[position++];      const dataLength = length - 1;      const dataStart = position;      switch (type) {        case AdvertisingDataType.FLAGS:          result.flags = advData[dataStart];          break;        case AdvertisingDataType.LOCAL_NAME_COMPLETE:          result.localName = this.parseString(advData, dataStart, dataLength);          break;        case AdvertisingDataType.SERVICE_UUID_16_COMPLETE:          this.parseServiceUuids(advData, dataStart, dataLength, 2, result.serviceUuids!);          break;        case AdvertisingDataType.MANUFACTURER_SPECIFIC_DATA:          this.parseManufacturerData(advData, dataStart, dataLength, result.manufactureSpecificData!);          break;      }      position += dataLength;    }    return result;  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="增强的连接管理">增强的连接管理</h3><a class="sl-anchor-link" href="#增强的连接管理"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “增强的连接管理”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">public async </span><span style="--0:#82AAFF;--1:#3B61B0">connectDevice</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">deviceId: string,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">options</span><span style="--0:#C792EA;--1:#8844AE">?:</span><span style="--0:#D6DEEB;--1:#403F53"> BleConnectOptions</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">): </span><span style="--0:#C5E478;--1:#3B61B0">Promise</span><span style="--0:#C792EA;--1:#8844AE">&#x3C;</span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">const timeout </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> options</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">timeout</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">||</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">CONNECTION_TIMEOUT_MS</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">const retryCount </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> options</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">retryCount</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">||</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">const autoReconnect </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> options</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">autoReconnect</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">!==</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 实现重试逻辑</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">let lastError: Error </span><span style="--0:#C792EA;--1:#8844AE">|</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">null</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF6A83;--1:#A24848">null</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">for</span><span style="--0:#D6DEEB;--1:#403F53"> (let attempt </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">; attempt </span><span style="--0:#C792EA;--1:#8844AE">&#x3C;=</span><span style="--0:#D6DEEB;--1:#403F53"> retryCount; attempt</span><span style="--0:#C792EA;--1:#8844AE">++</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">try {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">connectWithTimeout</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId, timeout);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (autoReconnect) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">autoReconnectDevices</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#919F9F;--1:#5D6376">// 成功</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">} catch (error) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">lastError = error as Error;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#82AAFF;--1:#3B61B0">if</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D7DBE0">attempt</span><span style="--0:#D6DEEB"> &#x3C; </span><span style="--0:#D7DBE0">retryCount</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#919F9F;--1:#5D6376">// 指数退避重试</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3B61B0">const</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">delay</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">Math</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">min</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#F78C6C;--1:#AA0982">1000</span><span style="--0:#C792EA;--1:#8844AE"> * </span><span style="--0:#D6DEEB;--1:#403F53">Math</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">pow</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#D6DEEB;--1:#403F53">attempt</span><span style="--0:#C792EA;--1:#8844AE"> - </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#F78C6C;--1:#AA0982">5000</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delay</span><span style="--0:#D6DEEB;--1:#403F53">(delay);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">throw</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Error</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">Failed to connect after </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">retryCount</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0"> attempts: </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">lastError</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">message</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public async connectDevice(  deviceId: string,  options?: BleConnectOptions): Promise<void> {  const timeout = options?.timeout || CONNECTION_TIMEOUT_MS;  const retryCount = options?.retryCount || 3;  const autoReconnect = options?.autoReconnect !== false;  // 实现重试逻辑  let lastError: Error | null = null;  for (let attempt = 1; attempt <= retryCount; attempt++) {    try {      await this.connectWithTimeout(deviceId, timeout);      if (autoReconnect) {        this.autoReconnectDevices.add(deviceId);      }      return; // 成功    } catch (error) {      lastError = error as Error;      if (attempt < retryCount) {        // 指数退避重试        const delay = Math.min(1000 * Math.pow(2, attempt - 1), 5000);        await this.delay(delay);      }    }  }  throw new Error(&#x60;Failed to connect after ${retryCount} attempts: ${lastError?.message}&#x60;);}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="迁移步骤">迁移步骤</h2><a class="sl-anchor-link" href="#迁移步骤"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “迁移步骤”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-更新导入和类型定义">1. 更新导入和类型定义</h3><a class="sl-anchor-link" href="#1-更新导入和类型定义"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. 更新导入和类型定义”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 添加新的接口定义</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">interface</span><span style="--0:#D6DEEB;--1:#403F53"> BleStartScanOptions {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">timeout</span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">number</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">filterServiceUuid</span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">boolean</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">filterManufacturerId</span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">boolean</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">interface</span><span style="--0:#D6DEEB;--1:#403F53"> BleConnectOptions {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">timeout</span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">number</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">retryCount</span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">number</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">autoReconnect</span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">boolean</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 添加新的接口定义interface BleStartScanOptions {  timeout?: number;  filterServiceUuid?: boolean;  filterManufacturerId?: boolean;}interface BleConnectOptions {  timeout?: number;  retryCount?: number;  autoReconnect?: boolean;}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="2-替换扫描实现">2. 替换扫描实现</h3><a class="sl-anchor-link" href="#2-替换扫描实现"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. 替换扫描实现”</span></a></div>
<p><strong>旧代码 (v14):</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startBLEScan</span><span style="--0:#D6DEEB;--1:#403F53">([scanFilter], scanOptions);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">on</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">BLEDeviceFind</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">devices</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Array</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#889FB2;--1:#4D667B">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FFCB8B;--1:#111111">ScanResult</span><span style="--0:#D6DEEB;--1:#403F53">></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">onDeviceFound</span><span style="--0:#D6DEEB;--1:#403F53">(devices);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="ble.startBLEScan([scanFilter], scanOptions);ble.on(&#x27;BLEDeviceFind&#x27;, (devices: Array<ble.ScanResult>) => {  this.onDeviceFound(devices);});"><div></div></button></div></figure></div>
<p><strong>新代码 (v15+):</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">bleScanner</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">createBleScanner</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleScanner</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">on</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">BLEDeviceFind</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">scanReport</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--1:#111111"><span style="--0:#FFCB8B">ScanReport</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">onDeviceFoundV15</span><span style="--0:#D6DEEB;--1:#403F53">(scanId, scanReport);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleScanner</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">([scanFilter], scanOptions);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const bleScanner = ble.createBleScanner();bleScanner.on(&#x27;BLEDeviceFind&#x27;, (scanReport: ble.ScanReport) => {  this.onDeviceFoundV15(scanId, scanReport);});bleScanner.startScan([scanFilter], scanOptions);"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="3-实现资源清理">3. 实现资源清理</h3><a class="sl-anchor-link" href="#3-实现资源清理"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. 实现资源清理”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">private </span><span style="--0:#82AAFF;--1:#3B61B0">cleanupScanner</span><span style="--0:#D6DEEB;--1:#403F53">(scanId: string): </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 清理定时器</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">timer</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanTimers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">get</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (timer) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">clearTimeout</span><span style="--0:#D6DEEB;--1:#403F53">(timer);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanTimers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 移除活动扫描器</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">activeScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 清理扫描器实例</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">bleScanners</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">scanCallbacks</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(scanId);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="private cleanupScanner(scanId: string): void {  // 清理定时器  const timer = this.scanTimers.get(scanId);  if (timer) {    clearTimeout(timer);    this.scanTimers.delete(scanId);  }  // 移除活动扫描器  this.activeScanners.delete(scanId);  // 清理扫描器实例  this.bleScanners.delete(scanId);  this.scanCallbacks.delete(scanId);}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="4-添加设备缓存管理">4. 添加设备缓存管理</h3><a class="sl-anchor-link" href="#4-添加设备缓存管理"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4. 添加设备缓存管理”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">private </span><span style="--0:#82AAFF;--1:#3B61B0">setupDeviceCleanupTimer</span><span style="--0:#D6DEEB;--1:#403F53">(): </span><span style="--0:#7FDBCA;--1:#096E72">void</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">setInterval</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">now</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">Date</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">now</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">staleThreshold</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#F78C6C;--1:#AA0982">60000</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#919F9F;--1:#5D6376">// 60秒</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">deviceLastSeenTime</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">forEach</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D7DBE0">lastSeen</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">deviceId</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (now </span><span style="--0:#C792EA;--1:#8844AE">-</span><span style="--0:#D6DEEB;--1:#403F53"> lastSeen </span><span style="--0:#C792EA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53"> staleThreshold) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">connectedDevices</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">has</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId)) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">discoveredDevices</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId);</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">deviceLastSeenTime</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}, </span><span style="--0:#F78C6C;--1:#AA0982">30000</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="private setupDeviceCleanupTimer(): void {  setInterval(() => {    const now = Date.now();    const staleThreshold = 60000; // 60秒    this.deviceLastSeenTime.forEach((lastSeen, deviceId) => {      if (now - lastSeen > staleThreshold) {        if (!this.connectedDevices.has(deviceId)) {          this.discoveredDevices.delete(deviceId);          this.deviceLastSeenTime.delete(deviceId);        }      }    });  }, 30000);}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="使用示例">使用示例</h2><a class="sl-anchor-link" href="#使用示例"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “使用示例”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="基础扫描">基础扫描</h3><a class="sl-anchor-link" href="#基础扫描"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “基础扫描”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">bleService</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">BleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">getInstance</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 启动扫描</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">scan-1</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">device</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">Found device: </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">device</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">name</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">timeout: </span><span style="--0:#F78C6C;--1:#AA0982">30000</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">filterServiceUuid: </span><span style="--0:#FF6A83;--1:#A24848">true</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const bleService = BleService.getInstance();// 启动扫描bleService.startScan(  &#x27;scan-1&#x27;,  (device) => {    console.log(&#x60;Found device: ${device.name}&#x60;);  },  {    timeout: 30000,    filterServiceUuid: true  });"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="多路并发扫描">多路并发扫描</h3><a class="sl-anchor-link" href="#多路并发扫描"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “多路并发扫描”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 扫描特定服务</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">service-scan</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, callback1, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">filterServiceUuid: </span><span style="--0:#FF6A83;--1:#A24848">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 扫描特定制造商</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">manufacturer-scan</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, callback2, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">filterManufacturerId: </span><span style="--0:#FF6A83;--1:#A24848">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 通用扫描</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">startScan</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">general-scan</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, callback3, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">timeout: </span><span style="--0:#F78C6C;--1:#AA0982">60000</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 扫描特定服务bleService.startScan(&#x27;service-scan&#x27;, callback1, {  filterServiceUuid: true});// 扫描特定制造商bleService.startScan(&#x27;manufacturer-scan&#x27;, callback2, {  filterManufacturerId: true});// 通用扫描bleService.startScan(&#x27;general-scan&#x27;, callback3, {  timeout: 60000});"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="连接管理">连接管理</h3><a class="sl-anchor-link" href="#连接管理"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “连接管理”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 带重试和自动重连的连接</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">await</span><span style="--0:#D6DEEB;--1:#403F53"> bleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">connectDevice</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">timeout: </span><span style="--0:#F78C6C;--1:#AA0982">10000</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">retryCount: </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">autoReconnect: </span><span style="--0:#FF6A83;--1:#A24848">true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 监听连接状态</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">bleService</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">addConnectionStateListener</span><span style="--0:#D6DEEB;--1:#403F53">(deviceId, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D7DBE0">state</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">prevState</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3B61B0">Connection state changed: </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">prevState</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#3B61B0"> -> </span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#D6DEEB;--1:#403F53">state</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 带重试和自动重连的连接await bleService.connectDevice(deviceId, {  timeout: 10000,  retryCount: 3,  autoReconnect: true});// 监听连接状态bleService.addConnectionStateListener(deviceId, (state, prevState) => {  console.log(&#x60;Connection state changed: ${prevState} -> ${state}&#x60;);});"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="最佳实践">最佳实践</h2><a class="sl-anchor-link" href="#最佳实践"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “最佳实践”</span></a></div>
<ol>
<li>
<p><strong>扫描管理</strong></p>
<ul>
<li>为每个扫描任务分配唯一ID</li>
<li>设置合理的超时时间</li>
<li>及时清理不需要的扫描器</li>
</ul>
</li>
<li>
<p><strong>设备缓存</strong></p>
<ul>
<li>实现过期机制避免内存泄漏</li>
<li>保留最近发现的设备信息</li>
<li>支持快速重连</li>
</ul>
</li>
<li>
<p><strong>错误处理</strong></p>
<ul>
<li>实现重试机制</li>
<li>使用指数退避策略</li>
<li>提供详细的错误日志</li>
</ul>
</li>
<li>
<p><strong>资源优化</strong></p>
<ul>
<li>避免重复扫描</li>
<li>合理设置扫描参数</li>
<li>及时释放GATT客户端</li>
</ul>
</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="性能优化建议">性能优化建议</h2><a class="sl-anchor-link" href="#性能优化建议"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “性能优化建议”</span></a></div>
<ol>
<li>
<p><strong>扫描优化</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="typescript"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">scanOptions</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#C792EA;--1:#8844AE"> ble.</span><span style="--0:#FFCB8B;--1:#111111">ScanOptions</span><span style="--0:#C792EA;--1:#8844AE"> = {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">interval: </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#919F9F;--1:#5D6376">// 无延迟报告</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">dutyMode: </span><span style="--0:#D6DEEB;--1:#403F53">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">ScanDuty</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">SCAN_MODE_LOW_LATENCY</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#919F9F;--1:#5D6376">// 低延迟模式</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">matchMode: </span><span style="--0:#D6DEEB;--1:#403F53">ble</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">MatchMode</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">MATCH_MODE_AGGRESSIVE</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#919F9F;--1:#5D6376">// 激进匹配</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const scanOptions: ble.ScanOptions = {  interval: 0, // 无延迟报告  dutyMode: ble.ScanDuty.SCAN_MODE_LOW_LATENCY, // 低延迟模式  matchMode: ble.MatchMode.MATCH_MODE_AGGRESSIVE // 激进匹配};"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>连接优化</strong></p>
<ul>
<li>实现连接池管理</li>
<li>预先发现服务缓存</li>
<li>批量处理通知数据</li>
</ul>
</li>
<li>
<p><strong>内存管理</strong></p>
<ul>
<li>定期清理过期设备</li>
<li>限制缓存大小</li>
<li>避免内存泄漏</li>
</ul>
</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="故障排查">故障排查</h2><a class="sl-anchor-link" href="#故障排查"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “故障排查”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="常见问题">常见问题</h3><a class="sl-anchor-link" href="#常见问题"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常见问题”</span></a></div>
<ol>
<li>
<p><strong>扫描无结果</strong></p>
<ul>
<li>检查蓝牙权限</li>
<li>验证蓝牙是否开启</li>
<li>确认过滤条件正确</li>
</ul>
</li>
<li>
<p><strong>连接失败</strong></p>
<ul>
<li>增加重试次数</li>
<li>延长超时时间</li>
<li>检查设备是否在范围内</li>
</ul>
</li>
<li>
<p><strong>资源泄漏</strong></p>
<ul>
<li>确保清理所有扫描器</li>
<li>正确关闭GATT客户端</li>
<li>清理事件监听器</li>
</ul>
</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="总结">总结</h2><a class="sl-anchor-link" href="#总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “总结”</span></a></div>
<p>API v15+的升级带来了显著的改进：</p>
<ul>
<li>✅ 支持多路并发扫描</li>
<li>✅ 独立的资源管理</li>
<li>✅ 更好的错误隔离</li>
<li>✅ 灵活的配置选项</li>
<li>✅ 增强的稳定性</li>
</ul>
<p>通过遵循本指南，可以顺利完成从v14到v15+的迁移，充分利用新API的优势，提供更稳定、高效的BLE连接体验。</p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/arkts/" class="astro-sg3lsd66">ArkTS</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/harmonyos/" class="astro-sg3lsd66">HarmonyOS</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ble/" class="astro-sg3lsd66">BLE</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/bluetooth-low-energy/" class="astro-sg3lsd66">Bluetooth Low Energy</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/management/2025-09-18-ai-trio-workflow-codex-claude-gemini-todo/" class="astro-dr56dw7m">AI 闭环开发实战：Codex、Claude Code、Gemini CLI 联手打造 ToDo 应用</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-18T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月18日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # AI 闭环开发实战：Codex、Claude Code、Gemini CLI 联手打造 ToDo 应用 -->
<p>现在 AI 真的能独立开发一个网站了吗？本文分享一次真实实验：让三个 AI 工具各司其职，协作完成一个 ToDo 待办管理网站的端到端开发。我们让它们分别扮演：</p>
<ul>
<li>Codex：项目经理（需求与验收标准）</li>
<li>Claude Code：开发与自测工程师</li>
<li>Gemini CLI：代码审查与文档工程师</li>
</ul>
<p>最终形成一个从「需求分析 -> 功能实现 -> 自动测试 -> 复审改进 -> 总结文档」的 AI 协同闭环。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="1-codexai-项目经理制定需求清单">1. Codex：AI 项目经理制定需求清单</h2><a class="sl-anchor-link" href="#1-codexai-项目经理制定需求清单"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. Codex：AI 项目经理制定需求清单”</span></a></div>
<p>Codex 擅长把模糊想法转化为结构化需求。我们给出“待办事项网站”这个概念，并要求：</p>
<ul>
<li>输出功能需求文档</li>
<li>列出每项功能的量化验收标准</li>
<li>补充异常与边界场景</li>
</ul>
<p>示例提示（Prompt）：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请充当项目经理。基于“待办事项网站”构想，生成详细功能需求文档，并为每项功能制定可量化的验收标准。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请充当项目经理。基于“待办事项网站”构想，生成详细功能需求文档，并为每项功能制定可量化的验收标准。"><div></div></button></div></figure></div>
<p>Codex 产出内容涵盖：</p>
<ul>
<li>基础功能：添加任务 / 标记完成 / 删除任务</li>
<li>任务状态显示与更新逻辑</li>
<li>验收标准示例：
<ul>
<li>添加后任务应立即出现在列表</li>
<li>标记完成的任务样式区别于未完成</li>
<li>删除后列表即时刷新且无残留</li>
</ul>
</li>
<li>异常处理：空输入、重复任务、非法字符等</li>
</ul>
<p>要点提示：</p>
<ul>
<li>提示越具体，生成的需求越完整</li>
<li>明确“行为 + 判定标准”可直接转换为测试用例</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="2-claude-codeai-开发工程师生成并执行代码">2. Claude Code：AI 开发工程师生成并执行代码</h2><a class="sl-anchor-link" href="#2-claude-codeai-开发工程师生成并执行代码"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. Claude Code：AI 开发工程师生成并执行代码”</span></a></div>
<p>Claude Code 接收需求文档后开始实现前后端与基础测试，用 React + Node/Express 构建：</p>
<ul>
<li>前端：任务输入、展示、状态切换、删除交互</li>
<li>后端：简单内存数据存储 + REST API（增/查/更/删）</li>
<li>支撑文档：README（运行步骤、依赖说明）</li>
<li>自动化测试：模拟添加 / 标记 / 删除并断言状态与列表长度</li>
</ul>
<p>示例提示：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">根据这份需求文档，实现 ToDo 列表网站的前后端代码。使用 React 和 Node.js。包含：添加任务、标记完成、删除任务，并编写自动化测试验证各功能。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="根据这份需求文档，实现 ToDo 列表网站的前后端代码。使用 React 和 Node.js。包含：添加任务、标记完成、删除任务，并编写自动化测试验证各功能。"><div></div></button></div></figure></div>
<p>Claude 的执行特点：</p>
<ul>
<li>按模块生成文件（组件、服务、测试）</li>
<li>边写代码边运行测试，未通过即调整</li>
<li>发现并修复：例如删除后未即时刷新等小问题</li>
</ul>
<p>不足之处（待改进）：</p>
<ul>
<li>UI 初版较朴素</li>
<li>尚未实现任务过滤 / 搜索</li>
<li>缺少持久化（仅内存）</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="3-gemini-cliai-代码审查员检查并改进">3. Gemini CLI：AI 代码审查员检查并改进</h2><a class="sl-anchor-link" href="#3-gemini-cliai-代码审查员检查并改进"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. Gemini CLI：AI 代码审查员检查并改进”</span></a></div>
<p>Gemini CLI 作为审查与总结角色，聚焦：</p>
<ul>
<li>核对功能是否满足需求与验收标准</li>
<li>指出缺口与可提升项</li>
<li>生成项目总结与技术文档</li>
</ul>
<p>示例提示：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请作为代码审查员，检查该 ToDo 应用是否满足需求文档的验收标准；若有不足给出改进建议；并生成一份技术说明文档（包含功能概述、运行步骤、实现要点及后续优化建议）。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请作为代码审查员，检查该 ToDo 应用是否满足需求文档的验收标准；若有不足给出改进建议；并生成一份技术说明文档（包含功能概述、运行步骤、实现要点及后续优化建议）。"><div></div></button></div></figure></div>
<p>Gemini 给出的改进建议示例：</p>
<ul>
<li>增加任务过滤：全部 / 未完成 / 已完成</li>
<li>可添加搜索或分页以应对大量任务</li>
<li>UI 增强：状态颜色、空列表占位文案、按钮可访问性</li>
<li>引入数据持久化（文件 / SQLite / IndexedDB / LocalStorage）</li>
<li>增加错误提示与输入校验反馈</li>
<li>增加 E2E 测试（如使用 Playwright）</li>
</ul>
<p>生成的技术文档结构（摘要）：</p>
<ul>
<li>项目简介</li>
<li>功能列表与对应实现</li>
<li>技术栈：React（前端 SPA）+ Axios（API 调用）+ Express（REST 服务）</li>
<li>运行步骤：安装依赖 -> 启动后端 -> 启动前端 -> 访问本地端口</li>
<li>测试说明：功能测试 + 可扩展集成测试</li>
<li>未来规划：状态过滤、持久化、权限、多用户、多端适配</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="4-协作闭环价值总结">4. 协作闭环价值总结</h2><a class="sl-anchor-link" href="#4-协作闭环价值总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4. 协作闭环价值总结”</span></a></div>
<p>优势：</p>
<ul>
<li>角色清晰：需求 → 实现 → 审查 → 文档一气呵成</li>
<li>可追溯：验收标准直接映射测试</li>
<li>高效：人工主要做“监督 + 方向”而非繁琐重复劳动</li>
<li>质量：多模型视角减少疏漏</li>
</ul>
<p>当前局限：</p>
<ul>
<li>复杂业务建模仍需人工抽象</li>
<li>深层性能、安全、并发等问题仍需专业评估</li>
<li>UI/UX 创新度有限（偏功能正确性）</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="5-可继续迭代方向">5. 可继续迭代方向</h2><a class="sl-anchor-link" href="#5-可继续迭代方向"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5. 可继续迭代方向”</span></a></div>
<p>建议优先扩展：</p>
<ol>
<li>功能层：状态过滤 / 搜索 / 批量操作 / 截止日期 / 优先级</li>
<li>数据层：持久化（SQLite/Prisma）+ 简易身份体系</li>
<li>测试层：E2E 测试 + 性能指标（首屏渲染、交互延迟）</li>
<li>架构层：拆分服务 / 引入依赖注入 / 日志与错误追踪</li>
<li>体验层：无障碍（ARIA 标签）、响应式布局、深浅色模式</li>
<li>运维层：容器化部署 + CI（构建 / 测试 / Lint / 预览环境）</li>
</ol>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="6-小项目快速复用提示模板">6. 小项目快速复用提示模板</h2><a class="sl-anchor-link" href="#6-小项目快速复用提示模板"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6. 小项目快速复用提示模板”</span></a></div>
<p>需求生成：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">你是项目经理。请输出：功能概述、功能清单、每项功能验收标准、异常场景、非功能需求（性能/安全/可维护性）。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="你是项目经理。请输出：功能概述、功能清单、每项功能验收标准、异常场景、非功能需求（性能/安全/可维护性）。"><div></div></button></div></figure></div>
<p>代码实现：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">依据以下需求（粘贴），使用 React + Node/Express 完成实现。请分模块输出：目录结构、核心代码、测试代码、运行说明。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="依据以下需求（粘贴），使用 React + Node/Express 完成实现。请分模块输出：目录结构、核心代码、测试代码、运行说明。"><div></div></button></div></figure></div>
<p>代码审查与文档：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请审查以下代码与需求匹配度。输出：通过项、不足项、优先级排序的改进建议，并生成技术文档（含运行、测试、扩展说明）。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请审查以下代码与需求匹配度。输出：通过项、不足项、优先级排序的改进建议，并生成技术文档（含运行、测试、扩展说明）。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p>这次实验展示了一个紧凑、高效、可复制的 AI 协作开发闭环：<br>
Codex 让目标清晰；Claude Code 快速产出并自测；Gemini CLI 审查提升与补全文档。<br>
AI 已能显著减少样板与重复劳动，人类可将精力投入更高阶的产品与架构思考。<br>
你是否也想尝试让 AI 成为你的虚拟“小团队”？从一个最小功能集（MVP）开始，就是最佳起点。</p>
<p>欢迎思考：未来 AI 是否能独立完成更复杂的多层系统？你的观点是什么？<br>
动手实践，也许下一个加速的工作流就诞生在你的侧边终端里。</p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/openai/" class="astro-sg3lsd66">OpenAI</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/chatgpt/" class="astro-sg3lsd66">ChatGPT</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/trends/2025-09-18-ai-real-life-uses-fortune-stocks-health-homework/" class="astro-dr56dw7m">AI 大模型的真实用途指南：从星座配对到炒股医疗</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-18T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月18日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # AI 大模型的真实用途指南：从星座配对到炒股医疗 -->
<blockquote>
<p>AI 大模型其实早已渗透进我们的日常生活<br>
本文带你按人群与场景了解：情感娱乐 / 投资理财 / 健康咨询 / 学习助手 / 创意玩法 / 进阶自学。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="引言">引言</h2><a class="sl-anchor-link" href="#引言"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言”</span></a></div>
<p>“普通人怎么用 AI 大模型？”<br>
不同的人有不同的需求：有人迷星座与感情，有人关心股票，有人问养生，有学生想写作业，还有人纯粹想玩创意。AI 像生活里的外挂——用得好能省时、省心、增效，但它不是万能预言机。下面分场景详解。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="女性用户星座配对与情感陪伴">女性用户：星座配对与情感陪伴</h2><a class="sl-anchor-link" href="#女性用户星座配对与情感陪伴"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “女性用户：星座配对与情感陪伴”</span></a></div>
<p>很多人喜欢星座、占卜、情绪安慰，AI 可以模拟“星座大师”“情感顾问”，提供陪伴与基础建议。它不通灵，但擅长生成语气友好、带共情的回应。</p>
<p><strong>推荐工具：</strong> ChatGPT、必应聊天（Bing）。<br>
<strong>适用用途：</strong> 星座配对、塔罗玩法、倾诉与安慰、写走心文案。</p>
<p><strong>示例提示词：</strong></p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">我和男友一个天蝎一个双鱼，帮我分析下星座匹配点与潜在矛盾，并给沟通建议。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请用塔罗占卜口吻，模拟抽牌，描述我未来两个月的感情运势（娱乐向）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">我闺蜜失恋很伤心，请用温柔真诚的语气安慰她，少鸡汤多共情。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="我和男友一个天蝎一个双鱼，帮我分析下星座匹配点与潜在矛盾，并给沟通建议。请用塔罗占卜口吻，模拟抽牌，描述我未来两个月的感情运势（娱乐向）。我闺蜜失恋很伤心，请用温柔真诚的语气安慰她，少鸡汤多共情。"><div></div></button></div></figure></div>
<p><strong>小技巧：</strong></p>
<ul>
<li>追问要具体：如“再具体点，他可能什么时候出现？列 3 种场景。”</li>
<li>可要求结构：如“用‘性格互补’、‘潜在分歧’、‘沟通建议’三段输出。”</li>
<li>记住：娱乐而已，勿当真。</li>
</ul>
<blockquote>
<p>提醒：AI 无法预测真实未来。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="男性用户理财--投资分析辅助">男性用户：理财 / 投资分析辅助</h2><a class="sl-anchor-link" href="#男性用户理财--投资分析辅助"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “男性用户：理财 / 投资分析辅助”</span></a></div>
<p>AI 可辅助整理公司信息、解释宏观概念、帮写分析框架。它不是股神——更像“逻辑还行但需你监督的实习生”。</p>
<p><strong>推荐工具：</strong> ChatGPT（逻辑分析）、必应 / Bard（联网补充最新资讯）、行业专业终端（Bloomberg 等——普通用户少接触）。<br>
<strong>适用用途：</strong> 行业梳理、财务结构对比、风险列举、研报框架草稿。</p>
<p><strong>示例提示词：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">假设你是资深投资顾问，分析苹果(AAPL)未来 12 个月的增长驱动、主要风险，并给出中性、乐观、保守三种场景。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">比较工商银行与招商银行 近三年的盈利结构、资产质量（若数据缺失请标注假设）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">在美联储加息周期下，AI 相关科技股的典型风险有哪些？请用通俗语言列点。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="假设你是资深投资顾问，分析苹果(AAPL)未来 12 个月的增长驱动、主要风险，并给出中性、乐观、保守三种场景。比较工商银行与招商银行 近三年的盈利结构、资产质量（若数据缺失请标注假设）。在美联储加息周期下，AI 相关科技股的典型风险有哪些？请用通俗语言列点。"><div></div></button></div></figure></div>
<p><strong>使用案例：</strong><br>
有人用 AI 得到结构化分析 → 自己再去核对数据 → 避免情绪化“梭哈”。</p>
<p><strong>避坑：</strong></p>
<ul>
<li>让它列“数据来源”与“需二次验证点”。</li>
<li>不要问“买什么一定涨”。</li>
<li>避免只看一句结论：要求“给出逻辑链条”。</li>
</ul>
<blockquote>
<p>免责声明：以上内容不构成投资建议；请结合实时数据与专业渠道独立判断。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="老年用户健康咨询科普">老年用户：健康咨询科普</h2><a class="sl-anchor-link" href="#老年用户健康咨询科普"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “老年用户：健康咨询科普”</span></a></div>
<p>AI 能快速提供饮食、运动、常见疾病科普。适合作为“健康百科+提问界面”。不替代医生诊断。</p>
<p><strong>推荐工具：</strong> 必应聊天、ChatGPT、丁香医生智能问答等。<br>
<strong>适用用途：</strong> 常见症状科普、生活方式提醒、指标基本意义解释。</p>
<p><strong>示例提示词：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">秋季血压偏高，有哪些饮食与作息建议？请用简洁条目。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">我晚上常有胃酸返流（reflux），列 5 条生活方式调整建议，并说明原理。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">以下体检指标（粘贴数据）请按：异常项 -> 可能意义 -> 建议，格式输出。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="秋季血压偏高，有哪些饮食与作息建议？请用简洁条目。我晚上常有胃酸返流（reflux），列 5 条生活方式调整建议，并说明原理。以下体检指标（粘贴数据）请按：异常项 -> 可能意义 -> 建议，格式输出。"><div></div></button></div></figure></div>
<p><strong>子女协助建议：</strong></p>
<ul>
<li>帮长辈添加“仅供科普，需医生确认”提示。</li>
<li>要求 AI 标注“不确定/需就医”情况。</li>
</ul>
<blockquote>
<p>免责声明：AI 输出不替代专业医疗诊断与处方；急症或用药务必咨询医生。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="学生党作业辅导与写作辅助">学生党：作业辅导与写作辅助</h2><a class="sl-anchor-link" href="#学生党作业辅导与写作辅助"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “学生党：作业辅导与写作辅助”</span></a></div>
<p>AI 可解题、列提纲、讲概念、批改作文。但不要纯粹复制——老师易识别文风。</p>
<p><strong>推荐工具：</strong> 必应（拍题/联网）、ChatGPT（分步讲解写作）、Photomath / 作业帮（针对性解题）。<br>
<strong>适用用途：</strong> 分步推导、知识点重述、作文结构、口语/翻译练习。</p>
<p><strong>示例提示词：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请分步骤求解方程 2x^2 - 4x + 1 = 0，展示公式推演与判别式思路。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">把这段中文翻译成自然英文（中级难度，注意时态与衔接）：……</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">高中作文题《成长的烦恼》，请先给 5 个新颖立意角度，并各列简要论据。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请分步骤求解方程 2x^2 - 4x + 1 = 0，展示公式推演与判别式思路。把这段中文翻译成自然英文（中级难度，注意时态与衔接）：……高中作文题《成长的烦恼》，请先给 5 个新颖立意角度，并各列简要论据。"><div></div></button></div></figure></div>
<p><strong>正确使用姿势：</strong></p>
<ul>
<li>让它“先给提示，不直接给最终答案”。</li>
<li>让 AI 批改你写的草稿而非替你写全稿。</li>
<li>要求指出“语法错误 + 改进理由”。</li>
</ul>
<blockquote>
<p>建议：用它学习“解题思路”，不用它“替你学习”。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="泛娱乐用户图像--视频--音频创意">泛娱乐用户：图像 / 视频 / 音频创意</h2><a class="sl-anchor-link" href="#泛娱乐用户图像--视频--音频创意"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “泛娱乐用户：图像 / 视频 / 音频创意”</span></a></div>
<p>AI 是“低门槛创作加速器”。通过精确提示词迭代可得到接近期望的作品。</p>
<p><strong>推荐工具：</strong><br>
图像：Midjourney / Stable Diffusion / DALL·E 3<br>
视频：Runway / Gen-2<br>
音频：ElevenLabs / Azure TTS<br>
（脚本创意与组合：ChatGPT）</p>
<p><strong>示例提示词：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">图像：赛博朋克风，一只戴墨镜的柴犬，霓虹城市背景，紫蓝对比光，电影质感。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">视频：生成 10 秒动画：一本书合上再打开，文字粒子飞出汇聚成“知识就是力量”。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">音频：用播音员风格朗读：欢迎收听本期科技播客……</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="图像：赛博朋克风，一只戴墨镜的柴犬，霓虹城市背景，紫蓝对比光，电影质感。视频：生成 10 秒动画：一本书合上再打开，文字粒子飞出汇聚成“知识就是力量”。音频：用播音员风格朗读：欢迎收听本期科技播客……"><div></div></button></div></figure></div>
<p><strong>技巧：</strong></p>
<ul>
<li>结构化提示：主体 / 风格 / 光影 / 构图 / 细节 / 质量。</li>
<li>反复迭代：告诉模型“第3版背景太杂，请简化”。</li>
<li>注意版权与人物肖像合规。</li>
</ul>
<blockquote>
<p>提醒：AI 生成内容用于商用前需核实版权与许可风险。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="教育进阶结构化复习--自测--自学伙伴">教育进阶：结构化复习 / 自测 / 自学伙伴</h2><a class="sl-anchor-link" href="#教育进阶结构化复习--自测--自学伙伴"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “教育进阶：结构化复习 / 自测 / 自学伙伴”</span></a></div>
<p>把 AI 当“主动式学习驱动器”：让它总结、抽取重点、出题、批改、角色扮演辅导。</p>
<p><strong>推荐工具：</strong> ChatGPT（通用+插件）、必应（补充实时信息）、WolframAlpha（数学严谨性）、GitHub Copilot（编程）、语言类应用（DuoLingo AI 模式）。</p>
<p><strong>示例提示词：</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请用类比解释：量子力学中的叠加态，要求：1 个生活类比 + 1 句形式化描述。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">以下笔记（粘贴）请提炼：核心概念/关键结论/易混淆点（表格或条目）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">你是历史老师，出 10 道近代史单选题；最后集中列答案与解析，并标注考点。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请扮演英语写作教练：这是我写的段落（粘贴），先标出问题，再给改进建议与改写版本。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请用类比解释：量子力学中的叠加态，要求：1 个生活类比 + 1 句形式化描述。以下笔记（粘贴）请提炼：核心概念/关键结论/易混淆点（表格或条目）。你是历史老师，出 10 道近代史单选题；最后集中列答案与解析，并标注考点。请扮演英语写作教练：这是我写的段落（粘贴），先标出问题，再给改进建议与改写版本。"><div></div></button></div></figure></div>
<p><strong>高效策略：</strong></p>
<ul>
<li>限制输出结构（如：“只给三层要点，每层不超过 12 字”）。</li>
<li>要求“列出你不确定或可能错误的点”。</li>
<li>用“假设我答错，请追问直到我理解”为循环学习模式。</li>
</ul>
<p><strong>避坑：</strong></p>
<ul>
<li>出现与教材不一致时：让它给出处/可能冲突原因。</li>
<li>针对公式/数据：要求“逐步推导”防止幻觉。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="总结">总结</h2><a class="sl-anchor-link" href="#总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “总结”</span></a></div>
<p>AI 是“多场景通用增强工具”：陪聊、分析、科普、创作、学习都能赋能。<br>
核心原则：</p>
<ul>
<li>明确角色与任务</li>
<li>结构化提示</li>
<li>追问与验证</li>
<li>工具而非权威</li>
<li>责任与决策仍在你自己</li>
</ul>
<blockquote>
<p>你在哪些场景用过 AI？欢迎分享你的有趣经验。若觉得有帮助，转发让更多人少踩坑、多增效。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="通用-prompt-模板参考可复用">通用 Prompt 模板参考（可复用）</h2><a class="sl-anchor-link" href="#通用-prompt-模板参考可复用"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “通用 Prompt 模板参考（可复用）”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">你现在的角色：{角色定位}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">目标：{想解决的问题/产出形式}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">背景材料：{粘贴或留空}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出结构：{条目 / 表格 / 分步骤}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">约束：{字数 / 语气 / 语言}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请先给提纲，等待我输入“继续”再展开。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="你现在的角色：{角色定位}目标：{想解决的问题/产出形式}背景材料：{粘贴或留空}输出结构：{条目 / 表格 / 分步骤}约束：{字数 / 语气 / 语言}请先给提纲，等待我输入“继续”再展开。"><div></div></button></div></figure></div>
<hr>
<blockquote>
<p>免责声明：文中涉及投资与健康的内容仅为信息参考，不构成投资、医疗、法律或专业建议；请结合权威渠道与专业人士意见。</p>
</blockquote> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/ai/" class="astro-sg3lsd66">AI</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/chatlog/2025-09-18-claude-code-chatlog-wechat-daily-report/" class="astro-dr56dw7m">用 Claude Code 做「微信聊天日报」：用 chatlog + MCP，3 步跑通</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-18T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月18日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 用 Claude Code 做「微信聊天日报」：用 chatlog + MCP，3 步跑通 -->
<blockquote>
<p>把昨天所有群聊和私聊，<strong>一键变日报</strong>：top 关键词、重点人、待办、风险提醒，全自动。
本文手把手教你用 <strong>Claude Code + chatlog</strong> 把聊天数据榨干成洞察，还送上开箱即用的提示词。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="你会得到什么">你会得到什么</h2><a class="sl-anchor-link" href="#你会得到什么"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “你会得到什么”</span></a></div>
<ul>
<li><strong>跑通流程</strong>：导出/解密 → 开 HTTP → 连接 Claude Code（MCP） → 一键出日报</li>
<li><strong>提示词模板</strong>：复制即用，覆盖拉取数据、分析聚合、生成日报（Markdown/HTML/图片）</li>
<li><strong>最佳实践</strong>：关键词雷达、敏感词预警、待办抓取、情绪曲线</li>
<li><strong>避坑清单</strong>：密钥、SIP、远程/本地连接、CSV/语音</li>
</ul>
<blockquote>
<p>chatlog 是一个开源工具，支持从本地微信数据库取数、自动解密、HTTP API、Webhook、以及 <strong>MCP Streamable HTTP</strong>，能直接被 Claude Code 当成「数据工具」来用。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="一准备工作10-分钟">一、准备工作（10 分钟）</h1><a class="sl-anchor-link" href="#一准备工作10-分钟"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一、准备工作（10 分钟）”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1安装并启动-chatlog本地">1）安装并启动 chatlog（本地）</h3><a class="sl-anchor-link" href="#1安装并启动-chatlog本地"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1）安装并启动 chatlog（本地）”</span></a></div>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 安装（任选其一）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">go</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">github.com/sjzar/chatlog@latest</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 或去 Releases 下载预编译版本</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="go install github.com/sjzar/chatlog@latest"><div></div></button></div></figure></div>
<p>启动后在 TUI 里选择 <strong>解密数据</strong> → <strong>开启 HTTP 服务</strong>（默认 <code dir="auto">http://127.0.0.1:5030</code>）。
API 示例：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">GET /api/v1/chatlog?time=2025-09-17&#x26;talker=wxid_xxx&#x26;format=json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">GET /api/v1/contact</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">GET /api/v1/session</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="GET /api/v1/chatlog?time=2025-09-17&#x26;talker=wxid_xxx&#x26;format=jsonGET /api/v1/contactGET /api/v1/session"><div></div></button></div></figure></div>
<p>支持 <code dir="auto">YYYY-MM-DD</code> 或 <code dir="auto">YYYY-MM-DD~YYYY-MM-DD</code> 时间窗，<code dir="auto">format</code> 支持 <code dir="auto">json/csv/text</code>。</p>
<blockquote>
<p>小贴士：需要先获取数据密钥/图片密钥；macOS 用户获取前需临时关闭 SIP（完事可再开启）。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="2把-chatlog-作为-mcp-服务器暴露给-claude-code">2）把 chatlog 作为 MCP 服务器暴露给 Claude Code</h3><a class="sl-anchor-link" href="#2把-chatlog-作为-mcp-服务器暴露给-claude-code"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2）把 chatlog 作为 MCP 服务器暴露给 Claude Code”</span></a></div>
<p>chatlog 原生支持 <strong>MCP Streamable HTTP</strong>，启动 HTTP 后路径为：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">GET http://127.0.0.1:5030/mcp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="GET http://127.0.0.1:5030/mcp"><div></div></button></div></figure></div>
<p>在 Claude Code 里添加远程 MCP：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 语法来自官方示例：claude mcp add --transport http &#x3C;name> &#x3C;url></span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">claude</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">mcp</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--transport</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">http</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">chatlog</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">http://127.0.0.1:5030/mcp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="claude mcp add --transport http chatlog http://127.0.0.1:5030/mcp"><div></div></button></div></figure></div>
<p>然后在 Claude Code 输入 <code dir="auto">/mcp</code> 管理与使用工具。</p>
<blockquote>
<p>MCP 是 Anthropic 推出的开放标准，支持 <strong>Streamable HTTP 传输</strong>、OAuth/Token 等认证，便于把外部数据接入 AI 助手。</p>
</blockquote>
<blockquote>
<p>备注：Claude 的远程 MCP 支持已逐步放开，也可以走本地 STDIO；具体以你账户与版本为准。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="二最省心的日报结构可直接让-claude-生成">二、最省心的日报结构（可直接让 Claude 生成）</h1><a class="sl-anchor-link" href="#二最省心的日报结构可直接让-claude-生成"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “二、最省心的日报结构（可直接让 Claude 生成）”</span></a></div>
<ul>
<li><strong>今日概览</strong>：消息总量、活跃会话数、Top 群/私聊、峰值时段</li>
<li><strong>关键词雷达</strong>：TF-IDF/关键短语/话题聚类（合并同义词）</li>
<li><strong>任务抽取</strong>：含「明天/今晚/帮我/待办/安排」等表述的 To-Do 清单</li>
<li><strong>风险提醒</strong>：自定义敏感词/合规词库命中计数与上下文</li>
<li><strong>情绪曲线</strong>：按小时的情感分布（积极/中性/消极），标注异常峰值</li>
<li><strong>高价值片段</strong>：Top5 信息密度最高的对话摘录（附会话名/时间戳/消息 ID）</li>
<li><strong>附录</strong>：原始数据链接（API 可回跳到图片/文件/语音解密流）</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="三claude-code-提示词复制即用">三、Claude Code 提示词（复制即用）</h1><a class="sl-anchor-link" href="#三claude-code-提示词复制即用"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “三、Claude Code 提示词（复制即用）”</span></a></div>
<blockquote>
<p><strong>用法</strong>：把 <code dir="auto">{}</code> 内的变量替换；在 Claude Code 里直接粘贴即可。
下面既支持 <strong>MCP 方式</strong>（推荐），也给出 <strong>HTTP 直连</strong> 的方案（curl/脚本），方便你选择。</p>
</blockquote>
<div class="sl-heading-wrapper level-h3"><h3 id="a-连接校验--列工具">A. 连接校验 &#x26; 列工具</h3><a class="sl-anchor-link" href="#a-连接校验--列工具"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “A. 连接校验 &#x26; 列工具”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">你现在连接了一个 MCP 服务器：name=chatlog，endpoint=http://127.0.0.1:5030/mcp。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1）列出 chatlog 提供的全部工具/资源，并简要说明用途。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2）检查是否有查询聊天记录、联系人、会话列表、媒体访问的能力。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3）如果有分页/limit 参数，告诉我默认值与最大值。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="你现在连接了一个 MCP 服务器：name=chatlog，endpoint=http://127.0.0.1:5030/mcp。1）列出 chatlog 提供的全部工具/资源，并简要说明用途。2）检查是否有查询聊天记录、联系人、会话列表、媒体访问的能力。3）如果有分页/limit 参数，告诉我默认值与最大值。"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="b-拉取昨天所有消息按会话聚合">B. 拉取昨天所有消息（按会话聚合）</h3><a class="sl-anchor-link" href="#b-拉取昨天所有消息按会话聚合"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “B. 拉取昨天所有消息（按会话聚合）”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">目标：生成“微信聊天日报（{date}）”。</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">数据拉取要求：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 日期范围：{date} 00:00:00 ~ {date} 23:59:59（本机时区）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 每个会话最多拉取 {per_chat_limit} 条，整体最多 {global_limit} 条</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 字段包含：time, talker, isChatRoom, sender, content, type, subType</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 若 message 有多媒体（图片/文件/语音），记录可访问 URL</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">动作：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 调用 chatlog 的查询工具/HTTP API：/api/v1/chatlog?time={date}~{date}&#x26;format=json&#x26;limit={global_limit}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 失败时自动重试 2 次，并记录失败会话</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 把结果按会话 ID 聚合，总结每个会话的消息数与活跃时段直方图</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：生成一个 data.json（内含原始与聚合）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="目标：生成“微信聊天日报（{date}）”。数据拉取要求：- 日期范围：{date} 00:00:00 ~ {date} 23:59:59（本机时区）- 每个会话最多拉取 {per_chat_limit} 条，整体最多 {global_limit} 条- 字段包含：time, talker, isChatRoom, sender, content, type, subType- 若 message 有多媒体（图片/文件/语音），记录可访问 URL动作：- 调用 chatlog 的查询工具/HTTP API：/api/v1/chatlog?time={date}~{date}&#x26;format=json&#x26;limit={global_limit}- 失败时自动重试 2 次，并记录失败会话- 把结果按会话 ID 聚合，总结每个会话的消息数与活跃时段直方图输出：生成一个 data.json（内含原始与聚合）"><div></div></button></div></figure></div>
<p>（API 形态参考 README；chatlog 会把媒体通过服务实时解密/转发为可访问路径）</p>
<div class="sl-heading-wrapper level-h3"><h3 id="c-关键词雷达--待办抽取">C. 关键词雷达 &#x26; 待办抽取</h3><a class="sl-anchor-link" href="#c-关键词雷达--待办抽取"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “C. 关键词雷达 &#x26; 待办抽取”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">对 data.json：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1）做中文分词+去停用词+同义词合并（如“OK/好的/行/可以”归并）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2）输出 Top20 关键词（权重、示例句、在哪些会话频繁出现）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3）基于规则+大模型，抽取待办（责任人、动词、截止时间、上下文链接）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4）维护一个敏感词表（我会补充），做命中统计与上下文 3 句窗口。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：keywords.json、todos.json、alerts.json</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="对 data.json：1）做中文分词+去停用词+同义词合并（如“OK/好的/行/可以”归并）。2）输出 Top20 关键词（权重、示例句、在哪些会话频繁出现）。3）基于规则+大模型，抽取待办（责任人、动词、截止时间、上下文链接）。4）维护一个敏感词表（我会补充），做命中统计与上下文 3 句窗口。输出：keywords.json、todos.json、alerts.json"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="d-情绪与峰值时段">D. 情绪与峰值时段</h3><a class="sl-anchor-link" href="#d-情绪与峰值时段"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “D. 情绪与峰值时段”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请对每条消息做粗粒度情感标签（积极/中性/消极），并按小时聚合为曲线。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">找出异常峰值（如 3σ 以上），列出对应会话与关键片段。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：sentiment_by_hour.csv、peaks.md（含解释）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请对每条消息做粗粒度情感标签（积极/中性/消极），并按小时聚合为曲线。找出异常峰值（如 3σ 以上），列出对应会话与关键片段。输出：sentiment_by_hour.csv、peaks.md（含解释）"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="e-生成日报markdown--html--图片">E. 生成日报（Markdown + HTML + 图片）</h3><a class="sl-anchor-link" href="#e-生成日报markdown--html--图片"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “E. 生成日报（Markdown + HTML + 图片）”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">把 {keywords.json, todos.json, alerts.json, sentiment_by_hour.csv} 组装为“聊天日报（{date}）”。</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">版式：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 今日概览（要有数据表）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 关键词雷达（词云图 + 每词 1 句总结）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 待办清单（责任人/截止时间/链接）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 风险提醒（命中词/次数/上下文跳转）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 情绪曲线（折线图）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 高价值片段 Top5（含会话名/时间戳）</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">要求：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 先产出 Markdown（report.md），再渲染简洁 HTML（report.html，内联样式）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 图片：生成词云、情绪曲线两张图，保存在 ./assets，写入 HTML 引用</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 最后给出“一键复制”区块（Markdown 版）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="把 {keywords.json, todos.json, alerts.json, sentiment_by_hour.csv} 组装为“聊天日报（{date}）”。版式：- 今日概览（要有数据表）- 关键词雷达（词云图 + 每词 1 句总结）- 待办清单（责任人/截止时间/链接）- 风险提醒（命中词/次数/上下文跳转）- 情绪曲线（折线图）- 高价值片段 Top5（含会话名/时间戳）要求：- 先产出 Markdown（report.md），再渲染简洁 HTML（report.html，内联样式）- 图片：生成词云、情绪曲线两张图，保存在 ./assets，写入 HTML 引用- 最后给出“一键复制”区块（Markdown 版）"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="f-快速-http-直连不用-mcp-也能跑">F. 快速 HTTP 直连（不用 MCP 也能跑）</h3><a class="sl-anchor-link" href="#f-快速-http-直连不用-mcp-也能跑"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “F. 快速 HTTP 直连（不用 MCP 也能跑）”</span></a></div>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 拉取昨天数据（JSON）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">curl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-G</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">http://127.0.0.1:5030/api/v1/chatlog</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--data-urlencode</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">time=2025-09-17~2025-09-17</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--data-urlencode</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">limit=5000</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--data-urlencode</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">format=json</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">data.json</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="curl -G &#x22;http://127.0.0.1:5030/api/v1/chatlog&#x22; \  --data-urlencode &#x22;time=2025-09-17~2025-09-17&#x22; \  --data-urlencode &#x22;limit=5000&#x22; \  --data-urlencode &#x22;format=json&#x22; > data.json"><div></div></button></div></figure></div>
<blockquote>
<p>API 参数与媒体解密/转发由 chatlog 提供。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="四最佳实践让日报更聪明">四、最佳实践：让日报更聪明</h1><a class="sl-anchor-link" href="#四最佳实践让日报更聪明"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “四、最佳实践：让日报更聪明”</span></a></div>
<p><strong>1）关键词合并表</strong>：把常见口头禅对齐成同义词，避免词云涂抹。
<strong>2）任务抽取规则</strong>：正则 + few-shot，针对「帮我」「记得」「今晚前」等语气词优化。
<strong>3）角色画像</strong>：按发言密度/影响力为群成员画像，识别“信息源头”。
<strong>4）Webhook 增量</strong>：配合 chatlog 的 Webhook，在有新消息时推送到你的中间件，做增量更新。
<strong>5）CSV/语音</strong>：新版本对 CSV 与语音工具链做过修复/增强，关注 Releases Changelog。</p>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="五避坑清单">五、避坑清单</h1><a class="sl-anchor-link" href="#五避坑清单"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “五、避坑清单”</span></a></div>
<ul>
<li><strong>只处理你自己合法拥有的数据</strong>。遵守隐私与所在平台条款；项目本身也强调这一点。</li>
<li><strong>macOS 获取密钥需临时关闭 SIP</strong>，完成后可再开启。</li>
<li><strong>远程 MCP 仍在逐步放开</strong>，本地 STDIO 更稳；留意你账号与版本的能力。</li>
<li><strong>MCP 连接命令格式</strong> 以官方文档为准，<code dir="auto">claude mcp add --transport http &#x3C;name> &#x3C;url></code>。</li>
<li><strong>MCP 概念/认证</strong>：用 Streamable HTTP + 标准认证方式，团队部署更安全。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="六进阶一键换源--团队共享">六、进阶：一键换源 &#x26; 团队共享</h1><a class="sl-anchor-link" href="#六进阶一键换源--团队共享"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “六、进阶：一键换源 &#x26; 团队共享”</span></a></div>
<ul>
<li>用 <strong>Docker 部署 chatlog</strong> 到 NAS，预先写死 <code dir="auto">CHATLOG_WEBHOOK_*</code> 环境变量，方便全家桶联动。</li>
<li>团队用 <strong>Claude Connectors/MCP 目录</strong> 管理多数据源，非技术同学也能点点就连。</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h1"><h1 id="结语">结语</h1><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p>把聊天当数据，用 Claude Code 把它炼成<strong>团队可执行的日报</strong>。
每天 3 分钟浏览，省下的时间去做真正重要的事。</p>
<!-- 
---

# 附：图片与可视化（配图提示词）

> 图片文字：**不要中文**；风格：插画；比例：2:1

**封面图 Prompt**
“Daily chat intelligence report, dashboard vibe, minimalist, clean UI elements, abstract bubbles and message icons, subtle graphs and word cloud hints, high contrast lighting, vector illustration, 2:1”

**章节配图 Prompt（关键词雷达）**
“Keyword radar for chat analysis, radial diagram with tags and weights, crisp lines, soft gradients, vector illustration, 2:1”

**章节配图 Prompt（情绪曲线）**
“Emotion trend over 24 hours, smooth line chart with peaks and annotations, minimal grid, vector illustration, 2:1”

**章节配图 Prompt（待办清单）**
“Action items checklist derived from chats, sticky notes and checkmarks, productivity theme, vector illustration, 2:1”



**你会马上用在谁的群？打算加哪些敏感词？你有什么经验？**
评论区一起交流。

---

## 多语言标题（3 组 + slug）

1. **中文**：

* 「Claude Code × chatlog」把微信聊天变日报：关键词雷达、待办、风险一站出
  **English**: Turn WeChat Chats into Daily Reports with Claude Code + chatlog
  **繁體**：用 Claude Code × chatlog，把微信聊天變成日報
  **日本語**：Claude Code と chatlog で微信チャットを日報化
  **Français**：Transformer vos chats WeChat en rapports quotidiens avec Claude Code et chatlog
  **Español**: Convierte tus chats de WeChat en reportes diarios con Claude Code y chatlog
  **Português**: Transforme seus chats do WeChat em relatórios diários com Claude Code e chatlog
  **slug**: claude-code-chatlog-wechat-daily-report

2. **中文**：

* 用 MCP 打通 Claude Code：10 分钟做出你的微信聊天日报
  **English**: Wire Claude Code with MCP: Build a WeChat Chat Daily in 10 Minutes
  **繁體**：用 MCP 打通 Claude Code：10 分鐘做出微信聊天日報
  **日本語**：MCP で Claude Code 接続：10 分で微信チャット日報
  **Français**：Connecter Claude Code via MCP : un rapport WeChat en 10 minutes
  **Español**: Conecta Claude Code con MCP: informe diario de WeChat en 10 minutos
  **Português**: Conecte Claude Code via MCP: relatório diário do WeChat em 10 minutos
  **slug**: mcp-claude-code-wechat-daily-in-10-min

3. **中文**：

* 聊天就是数据：Claude Code 自动生成「昨日战报」的正确姿势
  **English**: Chats Are Data: The Right Way to Auto-Generate Yesterday’s Report with Claude Code
  **繁體**：聊天就是數據：Claude Code 自動生成「昨日戰報」
  **日本語**：チャットはデータだ：Claude Code で“昨日レポート”を自動生成
  **Français**：Les chats sont des données : générez le rapport d’hier avec Claude Code
  **Español**: Los chats son datos: genera el reporte de ayer con Claude Code
  **Português**: Chats são dados: gere o relatório de ontem com Claude Code
  **slug**: chats-are-data-claude-code-yesterday-report

---

## 朋友圈/评论区文案（3 条）

1. “把微信群聊做成日报，关键词雷达+待办+风险一屏看完。Claude Code 真有点东西。”
2. “每天 3 分钟复盘昨天聊天，高能片段不再错过。顺便把老板安排都揪出来。”
3. “chatlog + MCP 接上 Claude，聊天数据直接变洞察。懂的都懂～”

---

需要我**把提示词做成可下载模板**（Markdown/JSON）、或**生成一份示例日报**吗？我可以直接补上。

[1]: https://github.com/sjzar/chatlog?utm_source=chatgpt.com "chat log tool, easily use your own chat data. 聊天记录工具， ..."
[2]: https://docs.anthropic.com/en/docs/claude-code/mcp?utm_source=chatgpt.com "Connect Claude Code to tools via MCP - Anthropic"
[3]: https://www.anthropic.com/news/model-context-protocol?utm_source=chatgpt.com "Introducing the Model Context Protocol"
[4]: https://gofastmcp.com/integrations/claude-desktop?utm_source=chatgpt.com "Claude Desktop 🤝 FastMCP"
[5]: https://github.com/sjzar/chatlog/releases?utm_source=chatgpt.com "Releases · sjzar/chatlog"
[6]: https://modelcontextprotocol.io/docs/concepts/architecture?utm_source=chatgpt.com "Architecture overview"
[7]: https://www.tomsguide.com/ai/claude-can-now-connect-to-google-drive-canva-slack-and-more-heres-how-to-try-it?utm_source=chatgpt.com "Claude can now connect to Google Drive, Canva, Slack and more - here's how to try it" --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/chatlog/" class="astro-sg3lsd66">chatlog</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/mcp/" class="astro-sg3lsd66">MCP</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/微信/" class="astro-sg3lsd66">微信</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/openai/research/2025-09-18-/ai-chatgpt-usage-analysis-beyond-work/" class="astro-dr56dw7m">解读和分析 OpenAI 最新论文《人们如何使用ChatGPT》</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-18T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月18日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 解读和分析 OpenAI 最新论文《人们如何使用ChatGPT》 -->
<div class="sl-heading-wrapper level-h2"><h2 id="引言一场席卷全球的ai革命与我们的认知盲区">引言：一场席卷全球的AI革命与我们的认知盲区</h2><a class="sl-anchor-link" href="#引言一场席卷全球的ai革命与我们的认知盲区"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “引言：一场席卷全球的AI革命与我们的认知盲区”</span></a></div>
<p>2022年11月，OpenAI向公众发布了其划时代的产品——ChatGPT。该工具自面世以来，其普及速度令人瞠目结舌。国家经济研究局（NBER）的一份工作论文《人们如何使用ChatGPT》（NBER Working Paper 34255）指出，截至2025年7月，ChatGPT每周活跃用户已达到7亿，每日消息量超过25亿次，这相当于每秒钟就有约29,000条消息发出。这种前所未有的全球扩散速度，使其在短短几年内便被约10%的全球成年人口所采纳。然而，公众和媒体对这一现象的理解，往往停留在表面。多数人将ChatGPT视为一个用于内容创作、编程或简单聊天的工具，而其更深层次的社会、经济和人性影响仍隐藏在日常使用的表象之下。</p>
<p>本报告将以这份由OpenAI研究团队与NBER合作的开创性报告为核心，旨在进行一次全面的、多维度的深度解读与批判性分析。报告将超越论文本身的数据呈现，通过多方事实核查，理清不同研究和媒体报道间的矛盾之处，并从经济学、社会学和人类动机的视角，探讨这些数据背后所蕴含的深层趋势、因果关系以及对未来社会的潜在影响。最终，本报告将以通俗易懂的风格，为普通读者提供一个严谨且富有洞察的AI使用全景图。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="第一部分chatgpt的现象级增长事实与数据的多方验证">第一部分：ChatGPT的现象级增长：事实与数据的多方验证</h2><a class="sl-anchor-link" href="#第一部分chatgpt的现象级增长事实与数据的多方验证"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “第一部分：ChatGPT的现象级增长：事实与数据的多方验证”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="11-核心数据与规模ai扩散的史无前例">1.1 核心数据与规模：AI扩散的史无前例</h3><a class="sl-anchor-link" href="#11-核心数据与规模ai扩散的史无前例"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1.1 核心数据与规模：AI扩散的史无前例”</span></a></div>
<p>NBER工作论文为我们提供了关于ChatGPT增长的核心数据。该报告显示，从2022年11月发布到2025年7月，其每周活跃用户数从最初的百万级增长至7亿。同时，日均消息量也从无到有，飙升至超过25亿次。这一增长速度不仅远超传统技术，如Facebook花费四年半才达到1亿用户，而且在AI技术领域也无出其右。其他第三方统计平台，如DemandSage、Nerdynav和Seoprofy，在2025年年中或9月发布的报告中，也进一步证实了这一现象。这些平台的数据指出，ChatGPT的每周活跃用户已达到或超过8亿，日查询量超过10亿次。</p>
<p>值得注意的是，NBER报告中的用户数（7亿）与第三方报告（8亿）存在细微差异。这种差异并非数据矛盾，而恰恰是AI技术前所未有的指数级增长速度的直接体现。该技术的发展如此之快，以至于任何一个静态的时间点快照都难以完全捕捉其动态全貌。报告在2025年7月的数据，在短短几周或几个月后就会被更高的数字所超越。这表明，在分析AI的影响时，必须采用动态而非静态的视角。这种速度本身，就是对经济和社会结构产生颠覆性影响的最有力信号。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="12-非工作用途的崛起ai价值的新视角">1.2 非工作用途的崛起：AI价值的新视角</h3><a class="sl-anchor-link" href="#12-非工作用途的崛起ai价值的新视角"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1.2 非工作用途的崛起：AI价值的新视角”</span></a></div>
<p>长期以来，对AI的经济学分析主要集中在其对“带薪工作”生产力的影响上。然而，NBER报告通过其核心数据挑战了这一传统叙事。报告的 Table 1 清晰地展示了，从2024年6月到2025年6月，ChatGPT的非工作相关消息占比从53%激增至73%。这表明，尽管工作相关消息的绝对数量也在持续增长（从2024年6月的每日2.13亿条增至2025年6月的7.16亿条），但其增长速度被非工作用途远远超越。</p>
<p>这种价值的转移揭示了AI对人类社会更广阔的影响。AI的价值不仅体现在提高企业效率上，还通过“家庭生产”（home production）和“消费者剩余”（consumer surplus）为普通人创造了巨大价值。例如，Collis 和 Brynjolfsson（2025）的研究估算，仅在2024年，美国消费者通过生成式AI获得的剩余价值就高达970亿美元。这一发现表明，AI在提升个人生活质量、时间管理和非经济活动效率方面的规模，可能与它对职场生产力的影响相当，甚至更大。这种转变促使我们重新思考AI的真正价值所在：它正在从一个单纯的生产力工具，演变为一个深刻影响我们日常生活的“生活工具”。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="第二部分洞察用户行为核心用途的解构与深层动因分析">第二部分：洞察用户行为：核心用途的解构与深层动因分析</h2><a class="sl-anchor-link" href="#第二部分洞察用户行为核心用途的解构与深层动因分析"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “第二部分：洞察用户行为：核心用途的解构与深层动因分析”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="21-三驾马车实用指导信息获取与写作的流行逻辑">2.1 “三驾马车”：实用指导、信息获取与写作的流行逻辑</h3><a class="sl-anchor-link" href="#21-三驾马车实用指导信息获取与写作的流行逻辑"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2.1 “三驾马车”：实用指导、信息获取与写作的流行逻辑”</span></a></div>
<p>NBER报告通过其创新的自动化分类方法，为我们提供了关于用户行为的细致洞察。报告指出，近80%的ChatGPT用户对话集中在三个核心类别中：实用指导（Practical Guidance）、信息获取（Seeking Information）和写作（Writing）。</p>
<p>其中，实用指导是目前最常见的用例，它包含了广泛的活动，如辅导和教学、操作指南、以及创意构思。特别值得关注的是，教育用途（如辅导/教学）在所有消息中占比高达10%，显示了AI在教育领域的巨大潜力。信息获取的用例正在迅速增长，并被视为传统搜索引擎的有力替代品。这反映了用户对即时、整合性答案的需求日益增长，而非仅仅是传统的链接列表。</p>
<p>为了更深入地理解用户的行为，报告提出了一个独特的分类框架：“Asking”（提问/寻求建议）与“Doing”（执行任务/创作）。数据显示，“Asking”类消息的增长速度超过“Doing”，且其用户满意度更高。这种趋势并非偶然。无论是寻求实用指导（“如何做饭？”），还是获取信息（“什么是量子力学？”），其核心驱动力都是为了更好地做出决策和更有效地获取和处理信息。这与NBER报告中“Asking”消息更受高学历和高收入用户青睐的发现相吻合，因为在知识密集型工作中，高质量的决策是提高生产力的关键。这一发现表明，ChatGPT的真正价值，可能更多在于其作为人类**“认知副驾驶”**来增强决策和认知能力，而非作为一个“替代劳动力”来自动化任务。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="22-写作一个被误读的工作核心价值">2.2 写作：一个被误读的工作核心价值</h3><a class="sl-anchor-link" href="#22-写作一个被误读的工作核心价值"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2.2 写作：一个被误读的工作核心价值”</span></a></div>
<p>在所有工作相关的消息中，写作是占比最高的用例，平均占到40%。这一数据似乎印证了许多人关于AI将完全取代人类写作者的担忧。然而，该报告深入揭示了一个关键细节：在所有的“写作”类消息中，约有三分之二的任务并非“从零开始”的创作，而是对用户提供的文本进行修改、编辑、总结和翻译。</p>
<p>这一发现与普遍观点形成了微妙的对比。它表明，在实际工作中，AI的作用更像是“优化”而非“取代”。它帮助人类精炼已有的思想和内容，而非完全取而代之。这一发现与 IBM、Moveworks 等公司报告中的企业级AI用例相呼应。这些用例强调AI在内容创作中的辅助性作用，如生成广告文案草稿、邮件初稿，或从冗长文档中提取关键信息。这表明，未来的工作流将是“人机协同”的，AI解放了人类在重复性、低价值的“写作”任务上的精力，使其能更专注于高层次的思考、策略和创意。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="第三部分纠偏与反思争议性用途的真相与认知偏差">第三部分：纠偏与反思：争议性用途的真相与认知偏差</h2><a class="sl-anchor-link" href="#第三部分纠偏与反思争议性用途的真相与认知偏差"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “第三部分：纠偏与反思：争议性用途的真相与认知偏差”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="31-编程与陪伴被媒体放大的用例与数据真相">3.1 编程与陪伴：被媒体放大的用例与数据真相</h3><a class="sl-anchor-link" href="#31-编程与陪伴被媒体放大的用例与数据真相"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3.1 编程与陪伴：被媒体放大的用例与数据真相”</span></a></div>
<p>在某些特定用例的普及程度上，NBER报告的发现与一些主流媒体叙事存在显著差异，这揭示了平台定位与认知偏差的复杂现实。</p>
<p>首先是编程用例。NBER报告指出，在ChatGPT上，编程相关消息仅占所有消息的4.2%。这与 Handa 等人对另一款AI助手 Claude 的研究形成了鲜明对比，后者显示编程相关用例在工作场景中高达33%。</p>
<p>其次是情感陪伴。NBER报告发现，情感陪伴（关系与个人反思）仅占1.9%，游戏与角色扮演占0.4%，总计非常小。这与 Zao-Sanders 和许多媒体报道中将情感陪伴列为AI主要用例的说法大相径庭。</p>
<p>为什么会出现如此巨大的数据鸿沟？一个主要原因是平台定位和用户群体的差异。Anthropic 的 Claude 平台在设计上更偏向技术和企业级用户，而微软的 Copilot 则深度集成于 Microsoft 365 等办公软件中。相比之下，ChatGPT 作为一个通用的消费级平台，其用户画像更为广泛，导致编程等垂直领域的用例占比相对较低。此外，关于AI情感陪伴、虚拟女友或“危险”交互的媒体报道，常常因为其耸人听闻的性质而获得不成比例的关注度。这种“幸存者偏差”导致了公众对这些用例普遍性的严重高估。NBER报告通过大规模、匿名的第一手数据，为我们提供了更接近事实的全景图，即这些用例在消费者端仍属小众。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="32-性别与年龄差距动态变化的社会图景">3.2 性别与年龄差距：动态变化的社会图景</h3><a class="sl-anchor-link" href="#32-性别与年龄差距动态变化的社会图景"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3.2 性别与年龄差距：动态变化的社会图景”</span></a></div>
<p>关于AI用户群体的人口构成，尤其是性别差距，也存在着不同研究间的微妙差异。NBER报告指出，在ChatGPT发布初期（2022年末），用户群体确实以男性为主，其中80%的活跃用户拥有典型的男性名字。然而，报告显示这是一个正在迅速变化的动态趋势。到2025年6月，该比例已降至48%，女性用户甚至略多。这一趋势与AI在低收入国家用户增长加速的发现相吻合。</p>
<p>然而，其他第三方报告，如 Deloitte、Pew Research 和 eWeek 在2025年的研究中，仍指出AI存在显著的性别差距，男性用户占比约为65%。两种看似矛盾的结论背后，是不同的研究方法和数据源。NBER报告基于第一方平台数据，能够精准追踪用户群体的动态变化（新用户的性别构成）。而其他研究则多基于第三方流量分析或问卷调查，这些方法可能存在偏差，其结果更多反映了历史上男性用户积累的存量。NBER 的数据描绘了一个动态趋势，即AI的普及正在通过新用户的加入，逐步纠正早期的性别失衡。这一过程正在克服诸如女性对AI工具认知度较低、缺乏信心、以及对“作弊”的道德顾虑等社会文化障碍。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="第四部分方法论的审视超越数据本身">第四部分：方法论的审视：超越数据本身</h2><a class="sl-anchor-link" href="#第四部分方法论的审视超越数据本身"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “第四部分：方法论的审视：超越数据本身”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="41-nber报告方法论的创新与优势">4.1 NBER报告方法论的创新与优势</h3><a class="sl-anchor-link" href="#41-nber报告方法论的创新与优势"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4.1 NBER报告方法论的创新与优势”</span></a></div>
<p>NBER报告的突出之处不仅在于其数据结论，更在于其独特且创新的研究方法论。报告独创性地采用了“隐私保护自动化分类”（Automated Classification）和“数据清洗室”（Data Clean Room, DCR）协议。</p>
<p>这种方法解决了以往研究中“隐私保护”与“大规模、细粒度数据分析”之间的核心矛盾。报告利用大型语言模型（LLM）而非人工，对匿名且去隐私化的对话内容进行分类，确保人类研究人员从始至终都无法看到用户消息内容。在分析职业、教育等敏感数据时，研究团队则采用严格的 DCR 协议，通过限制查询结果（如分组需超过100个用户）来进一步保障用户隐私。这一方法论的创新为未来AI行为研究树立了新的行业标准，实现了在不牺牲用户隐私的前提下获取大规模行为数据的目标。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="42-局限性与潜在挑战">4.2 局限性与潜在挑战</h3><a class="sl-anchor-link" href="#42-局限性与潜在挑战"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4.2 局限性与潜在挑战”</span></a></div>
<p>尽管NBER报告具有开创性，但其分析也存在固有局限性。报告明确指出，其分析样本仅限于ChatGPT的消费者计划（Free, Plus, Pro），并未包含企业级应用（Business, Enterprise）或 API 用量。</p>
<p>这一局限性至关重要，因为它意味着报告所描绘的图景仅代表了AI影响的“冰山一角”。企业用户和消费者在动机、需求和用例上存在根本差异。企业更关注“自动化”“数据安全”和“可定制化”的高价值用例。相比于消费者版本中以“实用指导”和“信息获取”为主的“认知副驾驶”模式，企业版AI（如 ChatGPT Enterprise 或 Claude API）则更多用于代码生成、文档摘要、客户服务自动化等直接的“自动化”任务。因此，NBER报告所描绘的消费者行为图谱，无法完全反映AI在整个经济体系中的多重角色。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="总结与展望趋势挑战与未来洞察">总结与展望：趋势、挑战与未来洞察</h2><a class="sl-anchor-link" href="#总结与展望趋势挑战与未来洞察"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “总结与展望：趋势、挑战与未来洞察”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="51-报告核心论点总结">5.1 报告核心论点总结</h3><a class="sl-anchor-link" href="#51-报告核心论点总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5.1 报告核心论点总结”</span></a></div>
<ul>
<li>AI的普及速度史无前例，其价值正在从职场生产力向更广泛的个人生活效率和消费者剩余转移。</li>
<li>AI在用户端的核心价值并非“替代人类”，而是通过“实用指导”和“信息获取”等方式，充当帮助人类决策和解决问题的“认知副驾驶”。</li>
<li>关于AI用例（如编程、情感陪伴）和用户群体（如性别差距）的媒体叙事，与大规模数据所揭示的事实存在显著偏差，这反映了平台定位分化与公众认知滞后的复杂现实。</li>
<li>AI研究方法论正在进步，但现有研究仍有其固有局限性，特别是无法完全反映消费者版与企业版AI用例的根本差异。</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="52-对未来的思考">5.2 对未来的思考</h3><a class="sl-anchor-link" href="#52-对未来的思考"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5.2 对未来的思考”</span></a></div>
<ul>
<li>对经济的影响：AI的“认知副驾驶”模式将重塑知识密集型工作。其核心价值将是增强人类的判断力，而非取代劳动力。这将催生对“批判性思维”“提问能力”等人类软技能的新需求。</li>
<li>对社会的影响：随着AI在低收入国家和女性群体中的普及，它有望成为缩小数字鸿沟和性别差距的新工具。然而，潜在的偏见和数据隐私风险仍需警惕。</li>
<li>对未来的展望：趋势表明，我们正在从一个AI是“技术”的时代，步入一个AI是**“生活方式”**的时代。未来，AI将不仅是提升工作效率的工具，更是个人成长、生活管理与决策支持不可或缺的一部分。我们必须以批判性、动态性的视角理解与适应这一变革，而非被静态数字与片面叙事所误导。AI的未来，将由人类如何与其协同工作与生活来共同书写。</li>
</ul> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/openai/" class="astro-sg3lsd66">OpenAI</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/chatgpt/" class="astro-sg3lsd66">ChatGPT</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/practices/2025-09-17-flutter-flavors-dev-staging-prod-configuration/" class="astro-dr56dw7m">Claude Code 生成 Flutter 多环境 Flavors 实战：一套代码，多个环境跑/构建</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-17T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月17日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <p>想要在一个 Flutter 代码仓里同时维护开发版（dev）、预发布（staging/TestFlight）、生产版（prod）？最稳妥的方式就是用 flavors。</p>
<p>本文用一套最小可行的实践，带你用 Claude Code：</p>
<ul>
<li>跑起多个 flavor（dev/staging/prod）</li>
<li>Android/iOS 侧完成必要配置</li>
<li>在 Dart 代码里依据 flavor 切换接口、日志、监控、图标等</li>
<li>命令行与 CI 构建范式一把梭</li>
</ul>
<p>——写完即可复制到日常项目里用。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="claude-code-提示词模板">Claude Code 提示词模板</h2><a class="sl-anchor-link" href="#claude-code-提示词模板"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Claude Code 提示词模板”</span></a></div>
<ul>
<li>Android <code dir="auto">productFlavors</code>：在 Gradle 中声明不同环境（applicationId 后缀、资源替换、签名、图标）。</li>
<li>iOS <code dir="auto">Schemes</code> + <code dir="auto">Build Configurations</code>：为 dev/staging/prod 建独立 Scheme，并指向对应的 Build Configuration 与 Bundle ID。</li>
<li>Dart <code dir="auto">--dart-define</code>：把环境变量注入到代码里（如 BASE_URL、SENTRY_DSN）。</li>
<li>多入口文件：<code dir="auto">lib/main_dev.dart</code>、<code dir="auto">lib/main_staging.dart</code>、<code dir="auto">lib/main_prod.dart</code>，各自初始化。</li>
</ul>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜名词与方案对齐】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">目标：在现有 Flutter 应用中，采用“多入口 + Android productFlavors + iOS Schemes + dart-define”组合，建立 dev/staging/prod 三套运行与构建路径。</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请先梳理本仓库现状：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 是否已有 `lib/main_*.dart`、`android/app/build.gradle` 的 `productFlavors`、iOS Schemes？</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 若未配置，输出最小改动计划（列出将新增/修改的文件清单）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：一份实施清单（按 Dart → Android → iOS → CI 顺序），每项可复制执行。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜名词与方案对齐】目标：在现有 Flutter 应用中，采用“多入口 + Android productFlavors + iOS Schemes + dart-define”组合，建立 dev/staging/prod 三套运行与构建路径。请先梳理本仓库现状：- 是否已有 &#x60;lib/main_*.dart&#x60;、&#x60;android/app/build.gradle&#x60; 的 &#x60;productFlavors&#x60;、iOS Schemes？- 若未配置，输出最小改动计划（列出将新增/修改的文件清单）。输出：一份实施清单（按 Dart → Android → iOS → CI 顺序），每项可复制执行。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="最小实践可直接照做">最小实践（可直接照做）</h2><a class="sl-anchor-link" href="#最小实践可直接照做"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “最小实践（可直接照做）”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-dart-侧定义-flavor-与初始化">1) Dart 侧：定义 Flavor 与初始化</h3><a class="sl-anchor-link" href="#1-dart-侧定义-flavor-与初始化"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1) Dart 侧：定义 Flavor 与初始化”</span></a></div>
<p>创建 <code dir="auto">lib/flavor.dart</code>：</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">lib/flavor.dart</span></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">enum</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53"> { dev, staging, prod }</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53"> flavor;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">String</span><span style="--0:#D6DEEB;--1:#403F53"> name;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">String</span><span style="--0:#D6DEEB;--1:#403F53"> baseUrl;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">._(</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#D6DEEB;--1:#403F53">.flavor, </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#D6DEEB;--1:#403F53">.name, </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#D6DEEB;--1:#403F53">.baseUrl);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">static</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">late</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53"> instance;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">static</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">init</span><span style="--0:#D6DEEB;--1:#403F53">({</span><span style="--0:#C792EA;--1:#8844AE">required</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53"> flavor}) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">switch</span><span style="--0:#D6DEEB;--1:#403F53"> (flavor) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.dev</span><span style="--0:#C792EA;--1:#8844AE">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">instance </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">._(</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.dev, </span><span style="--0:#FFCB8B;--1:#3B61B0">'DEV'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#FFCB8B;--1:#3B61B0">'https://dev-api.example.com'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.staging</span><span style="--0:#C792EA;--1:#8844AE">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">instance </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">._(</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.staging, </span><span style="--0:#FFCB8B;--1:#3B61B0">'STG'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#FFCB8B;--1:#3B61B0">'https://staging-api.example.com'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C792EA;--1:#8844AE">case</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.prod</span><span style="--0:#C792EA;--1:#8844AE">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">instance </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">._(</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.prod, </span><span style="--0:#FFCB8B;--1:#3B61B0">'PROD'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#FFCB8B;--1:#3B61B0">'https://api.example.com'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">break</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">static</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">bool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">get</span><span style="--0:#D6DEEB;--1:#403F53"> isProd </span><span style="--0:#7FDBCA;--1:#096E72">=></span><span style="--0:#D6DEEB;--1:#403F53"> instance.flavor </span><span style="--0:#C792EA;--1:#8844AE">==</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.prod;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="enum AppFlavor { dev, staging, prod }class FlavorConfig {  final AppFlavor flavor;  final String name;  final String baseUrl;  const FlavorConfig._(this.flavor, this.name, this.baseUrl);  static late FlavorConfig instance;  static void init({required AppFlavor flavor}) {    switch (flavor) {      case AppFlavor.dev:        instance = const FlavorConfig._(          AppFlavor.dev, &#x27;DEV&#x27;, &#x27;https://dev-api.example.com&#x27;,        );        break;      case AppFlavor.staging:        instance = const FlavorConfig._(          AppFlavor.staging, &#x27;STG&#x27;, &#x27;https://staging-api.example.com&#x27;,        );        break;      case AppFlavor.prod:        instance = const FlavorConfig._(          AppFlavor.prod, &#x27;PROD&#x27;, &#x27;https://api.example.com&#x27;,        );        break;    }  }  static bool get isProd => instance.flavor == AppFlavor.prod;}"><div></div></button></div></figure></div>
<p>入口文件按环境拆分：</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">lib/main_dev.dart</span></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'package:flutter/material.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'flavor.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'src/app.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">main</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">WidgetsFlutterBinding</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">ensureInitialized</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">init</span><span style="--0:#D6DEEB;--1:#403F53">(flavor</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.dev);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">runApp</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">MyApp</span><span style="--0:#D6DEEB;--1:#403F53">());</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import &#x27;package:flutter/material.dart&#x27;;import &#x27;flavor.dart&#x27;;import &#x27;src/app.dart&#x27;;void main() async {  WidgetsFlutterBinding.ensureInitialized();  FlavorConfig.init(flavor: AppFlavor.dev);  runApp(const MyApp());}"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">lib/main_staging.dart</span></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'package:flutter/material.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'flavor.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'src/app.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">main</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">WidgetsFlutterBinding</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">ensureInitialized</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">init</span><span style="--0:#D6DEEB;--1:#403F53">(flavor</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.staging);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">runApp</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">MyApp</span><span style="--0:#D6DEEB;--1:#403F53">());</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import &#x27;package:flutter/material.dart&#x27;;import &#x27;flavor.dart&#x27;;import &#x27;src/app.dart&#x27;;void main() async {  WidgetsFlutterBinding.ensureInitialized();  FlavorConfig.init(flavor: AppFlavor.staging);  runApp(const MyApp());}"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">lib/main_prod.dart</span></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'package:flutter/material.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'flavor.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'src/app.dart'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">main</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">WidgetsFlutterBinding</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">ensureInitialized</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">init</span><span style="--0:#D6DEEB;--1:#403F53">(flavor</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">AppFlavor</span><span style="--0:#D6DEEB;--1:#403F53">.prod);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">runApp</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">MyApp</span><span style="--0:#D6DEEB;--1:#403F53">());</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import &#x27;package:flutter/material.dart&#x27;;import &#x27;flavor.dart&#x27;;import &#x27;src/app.dart&#x27;;void main() async {  WidgetsFlutterBinding.ensureInitialized();  FlavorConfig.init(flavor: AppFlavor.prod);  runApp(const MyApp());}"><div></div></button></div></figure></div>
<p>在代码中按环境分流行为（示例）：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 任意位置使用</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> apiBase </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.instance.baseUrl;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> showDebugBanner </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.isProd;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 例如：只在 prod 打开 Crashlytics/Sentry</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FFCB8B;--1:#3B61B0">Future</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#82AAFF;--1:#3B61B0">setupMonitoring</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.isProd) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// await FirebaseCrashlytics.instance.setCrashlyticsCollectionEnabled(true);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// await SentryFlutter.init(...);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 任意位置使用final apiBase = FlavorConfig.instance.baseUrl;final showDebugBanner = !FlavorConfig.isProd;// 例如：只在 prod 打开 Crashlytics/SentryFuture<void> setupMonitoring() async {  if (FlavorConfig.isProd) {    // await FirebaseCrashlytics.instance.setCrashlyticsCollectionEnabled(true);    // await SentryFlutter.init(...);  }}"><div></div></button></div></figure></div>
<p>也可用 <code dir="auto">dart-define</code> 注入（无需多入口）：</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">lib/env.dart</span></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">Env</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">static</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> flavor </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">String</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">fromEnvironment</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#FFCB8B;--1:#3B61B0">'FLAVOR'</span><span style="--0:#D6DEEB;--1:#403F53">, defaultValue</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'dev'</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">static</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> baseUrl </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">String</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">fromEnvironment</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FFCB8B;--1:#3B61B0">'BASE_URL'</span><span style="--0:#D6DEEB;--1:#403F53">, defaultValue</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">'https://dev-api.example.com'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="class Env {  static const flavor = String.fromEnvironment(&#x27;FLAVOR&#x27;, defaultValue: &#x27;dev&#x27;);  static const baseUrl = String.fromEnvironment(    &#x27;BASE_URL&#x27;, defaultValue: &#x27;https://dev-api.example.com&#x27;,  );}"><div></div></button></div></figure></div>
<p>运行时传入：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main.dart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=FLAVOR=staging</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=BASE_URL=https://staging-api.example.com</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 或使用文件（Flutter 3.10+）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main.dart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define-from-file=flavors/dev.json</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter run -t lib/main.dart \  --dart-define=FLAVOR=staging \  --dart-define=BASE_URL=https://staging-api.example.comflutter run -t lib/main.dart \  --dart-define-from-file=flavors/dev.json"><div></div></button></div></figure></div>
<p><code dir="auto">flavors/dev.json</code> 示例：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">"FLAVOR"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">dev</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">"BASE_URL"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">https://dev-api.example.com</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">"SENTRY_DSN"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">https://examplePublicKey@o0.ingest.sentry.io/0</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;FLAVOR&#x22;: &#x22;dev&#x22;,  &#x22;BASE_URL&#x22;: &#x22;https://dev-api.example.com&#x22;,  &#x22;SENTRY_DSN&#x22;: &#x22;https://examplePublicKey@o0.ingest.sentry.io/0&#x22;}"><div></div></button></div></figure></div>
<blockquote>
<p>两种方式都常用：多入口文件更直观，<code dir="auto">dart-define</code> 更轻量。生产项目可二者结合。</p>
</blockquote>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜Dart 初始化】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">在当前 Flutter 工程中：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. 新建 `lib/flavor.dart`，包含 `AppFlavor` 与 `FlavorConfig`（按文中示例实现）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. 新建 `lib/main_dev.dart`、`lib/main_staging.dart`、`lib/main_prod.dart`，各自调用 `FlavorConfig.init(...)` 后 `runApp(MyApp)`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. 若不存在 `lib/src/app.dart`，创建一个最小 `MyApp`（`MaterialApp(debugShowCheckedModeBanner: !FlavorConfig.isProd, ...)`）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4. 可选新建 `lib/env.dart`，用于 `--dart-define` 方式。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">5. 生成“运行验证脚本”（bash）：分别以 dev/staging/prod 运行一次，并在日志中打印 `FlavorConfig.instance` 与 `BASE_URL`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">结果：给出所有新增/修改文件的补丁与本地验证命令。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜Dart 初始化】在当前 Flutter 工程中：1. 新建 &#x60;lib/flavor.dart&#x60;，包含 &#x60;AppFlavor&#x60; 与 &#x60;FlavorConfig&#x60;（按文中示例实现）。2. 新建 &#x60;lib/main_dev.dart&#x60;、&#x60;lib/main_staging.dart&#x60;、&#x60;lib/main_prod.dart&#x60;，各自调用 &#x60;FlavorConfig.init(...)&#x60; 后 &#x60;runApp(MyApp)&#x60;。3. 若不存在 &#x60;lib/src/app.dart&#x60;，创建一个最小 &#x60;MyApp&#x60;（&#x60;MaterialApp(debugShowCheckedModeBanner: !FlavorConfig.isProd, ...)&#x60;）。4. 可选新建 &#x60;lib/env.dart&#x60;，用于 &#x60;--dart-define&#x60; 方式。5. 生成“运行验证脚本”（bash）：分别以 dev/staging/prod 运行一次，并在日志中打印 &#x60;FlavorConfig.instance&#x60; 与 &#x60;BASE_URL&#x60;。结果：给出所有新增/修改文件的补丁与本地验证命令。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="2-android配置-productflavors">2) Android：配置 productFlavors</h3><a class="sl-anchor-link" href="#2-android配置-productflavors"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2) Android：配置 productFlavors”</span></a></div>
<p>编辑 <code dir="auto">android/app/build.gradle</code>（Groovy 示例）：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="groovy"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">android {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">namespace </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">com.example.myapp</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">defaultConfig {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">applicationId </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">com.example.myapp</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">minSdkVersion </span><span style="--0:#F78C6C;--1:#AA0982">23</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">targetSdkVersion </span><span style="--0:#F78C6C;--1:#AA0982">34</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">versionCode </span><span style="--0:#F78C6C;--1:#AA0982">100</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">versionName </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">1.0.0</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">buildTypes {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">debug { }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">release {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">minifyEnabled </span><span style="--0:#82AAFF;--1:#3B61B0">true</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">shrinkResources </span><span style="--0:#82AAFF;--1:#3B61B0">true</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">proguardFiles getDefaultProguardFile(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">proguard-android-optimize.txt</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">), </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">proguard-rules.pro</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">signingConfig signingConfigs</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">release</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 关键：定义口味维度与口味</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">flavorDimensions </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">env</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">productFlavors {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">dev {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">dimension </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">env</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">applicationIdSuffix </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">.dev</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">versionNameSuffix </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">-dev</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">resValue </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">app_name</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">MyApp Dev</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">manifestPlaceholders </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#82AAFF;--1:#3B61B0">appLabel</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">MyApp Dev</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">staging {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">dimension </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">env</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">applicationIdSuffix </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">.staging</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">versionNameSuffix </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">-stg</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">resValue </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">app_name</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">MyApp Staging</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">manifestPlaceholders </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#82AAFF;--1:#3B61B0">appLabel</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">MyApp Staging</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">prod {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">dimension </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">env</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">resValue </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">string</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">app_name</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">MyApp</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">manifestPlaceholders </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#82AAFF;--1:#3B61B0">appLabel</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">MyApp</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// 可选：按 flavor 使用不同资源目录（图标/字符串）</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">sourceSets {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">dev { res</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">srcDirs </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">src/dev/res</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">] }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">staging { res</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">srcDirs </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">src/staging/res</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">] }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">prod { res</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">srcDirs </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">src/prod/res</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">] }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="android {  namespace &#x22;com.example.myapp&#x22;  defaultConfig {    applicationId &#x22;com.example.myapp&#x22;    minSdkVersion 23    targetSdkVersion 34    versionCode 100    versionName &#x22;1.0.0&#x22;  }  buildTypes {    debug { }    release {      minifyEnabled true      shrinkResources true      proguardFiles getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;), &#x27;proguard-rules.pro&#x27;      signingConfig signingConfigs.release    }  }  // 关键：定义口味维度与口味  flavorDimensions &#x22;env&#x22;  productFlavors {    dev {      dimension &#x22;env&#x22;      applicationIdSuffix &#x22;.dev&#x22;      versionNameSuffix &#x22;-dev&#x22;      resValue &#x22;string&#x22;, &#x22;app_name&#x22;, &#x22;MyApp Dev&#x22;      manifestPlaceholders = [appLabel: &#x22;MyApp Dev&#x22;]    }    staging {      dimension &#x22;env&#x22;      applicationIdSuffix &#x22;.staging&#x22;      versionNameSuffix &#x22;-stg&#x22;      resValue &#x22;string&#x22;, &#x22;app_name&#x22;, &#x22;MyApp Staging&#x22;      manifestPlaceholders = [appLabel: &#x22;MyApp Staging&#x22;]    }    prod {      dimension &#x22;env&#x22;      resValue &#x22;string&#x22;, &#x22;app_name&#x22;, &#x22;MyApp&#x22;      manifestPlaceholders = [appLabel: &#x22;MyApp&#x22;]    }  }  // 可选：按 flavor 使用不同资源目录（图标/字符串）  sourceSets {    dev { res.srcDirs = [&#x22;src/dev/res&#x22;] }    staging { res.srcDirs = [&#x22;src/staging/res&#x22;] }    prod { res.srcDirs = [&#x22;src/prod/res&#x22;] }  }}"><div></div></button></div></figure></div>
<p><code dir="auto">AndroidManifest.xml</code> 使用 <code dir="auto">@string/app_name</code> 作为应用名：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="xml"><code><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">application</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3B61B0">android:label</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">@string/app_name</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#3B61B0">android:icon</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">@mipmap/ic_launcher</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#8844AE">></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">...</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">application</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<application  android:label=&#x22;@string/app_name&#x22;  android:icon=&#x22;@mipmap/ic_launcher&#x22;>  ...</application>"><div></div></button></div></figure></div>
<p>运行/构建命令：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 运行各环境</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_dev.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">staging</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_staging.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 构建 APK / AppBundle</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">apk</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">appbundle</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 对应的 Gradle 任务名（了解即可）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">./gradlew</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">assembleDevDebug</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">./gradlew</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">assembleStagingRelease</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">./gradlew</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">bundleProdRelease</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter run --flavor dev     -t lib/main_dev.dartflutter run --flavor staging -t lib/main_staging.dartflutter run --flavor prod    -t lib/main_prod.dartflutter build apk     --flavor prod -t lib/main_prod.dartflutter build appbundle --flavor prod -t lib/main_prod.dart./gradlew assembleDevDebug./gradlew assembleStagingRelease./gradlew bundleProdRelease"><div></div></button></div></figure></div>
<p>小贴士：AGP 8+ 需要在 <code dir="auto">android { namespace "..." }</code> 指定 <code dir="auto">namespace</code>。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜Android Flavors】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">在 `android/app/build.gradle`：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. 增加 `flavorDimensions "env"` 与 `productFlavors { dev {...} staging {...} prod {...} }`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. dev/staging 设置 `applicationIdSuffix`、`versionNameSuffix`；三者设置 `resValue("string", "app_name", ...)`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. 在 `android {}` 顶层确保 `namespace` 存在（AGP 8+ 必需）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4. 建立 `src/dev/res`、`src/staging/res`、`src/prod/res`，各放 `values/strings.xml` 覆盖 `app_name`（可选不同图标）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">5. 确认 `AndroidManifest.xml` 应用名引用 `@string/app_name`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">6. 输出命令：`flutter run --flavor dev -t lib/main_dev.dart` 等；以及 `./gradlew tasks | rg assemble` 校验任务。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">产出：补丁、资源目录与验证步骤。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜Android Flavors】在 &#x60;android/app/build.gradle&#x60;：1. 增加 &#x60;flavorDimensions &#x22;env&#x22;&#x60; 与 &#x60;productFlavors { dev {...} staging {...} prod {...} }&#x60;。2. dev/staging 设置 &#x60;applicationIdSuffix&#x60;、&#x60;versionNameSuffix&#x60;；三者设置 &#x60;resValue(&#x22;string&#x22;, &#x22;app_name&#x22;, ...)&#x60;。3. 在 &#x60;android {}&#x60; 顶层确保 &#x60;namespace&#x60; 存在（AGP 8+ 必需）。4. 建立 &#x60;src/dev/res&#x60;、&#x60;src/staging/res&#x60;、&#x60;src/prod/res&#x60;，各放 &#x60;values/strings.xml&#x60; 覆盖 &#x60;app_name&#x60;（可选不同图标）。5. 确认 &#x60;AndroidManifest.xml&#x60; 应用名引用 &#x60;@string/app_name&#x60;。6. 输出命令：&#x60;flutter run --flavor dev -t lib/main_dev.dart&#x60; 等；以及 &#x60;./gradlew tasks | rg assemble&#x60; 校验任务。产出：补丁、资源目录与验证步骤。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h3"><h3 id="3-ios配置-schemes-与-build-configurations">3) iOS：配置 Schemes 与 Build Configurations</h3><a class="sl-anchor-link" href="#3-ios配置-schemes-与-build-configurations"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3) iOS：配置 Schemes 与 Build Configurations”</span></a></div>
<p>在 Xcode：</p>
<ol>
<li>复制 <code dir="auto">Runner</code> Scheme，分别命名为 <code dir="auto">dev</code>、<code dir="auto">staging</code>、<code dir="auto">prod</code>。</li>
<li>为每个 Scheme 选择对应的 Build Configuration（建议：<code dir="auto">Debug-dev</code>、<code dir="auto">Release-dev</code>、<code dir="auto">Debug-staging</code>、<code dir="auto">Release-staging</code>、<code dir="auto">Debug-prod</code>、<code dir="auto">Release-prod</code>）。</li>
<li>给每个配置设置不同的 Bundle ID（如 <code dir="auto">com.example.myapp.dev</code>）。</li>
</ol>
<p>使用 <code dir="auto">xcconfig</code> 让配置更直观（可选）：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ios/Config/Dev.xcconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ios/Config/Staging.xcconfig</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">ios/Config/Prod.xcconfig</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="ios/Config/Dev.xcconfigios/Config/Staging.xcconfigios/Config/Prod.xcconfig"><div></div></button></div></figure></div>
<p><code dir="auto">Dev.xcconfig</code> 示例：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="xcconfig"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">PRODUCT_BUNDLE_IDENTIFIER = com.example.myapp.dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">DISPLAY_NAME = MyApp Dev</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">// 其他：API_KEY/SENTRY_DSN 等也可写入，注意不要提交敏感值</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="PRODUCT_BUNDLE_IDENTIFIER = com.example.myapp.devDISPLAY_NAME = MyApp Dev// 其他：API_KEY/SENTRY_DSN 等也可写入，注意不要提交敏感值"><div></div></button></div></figure></div>
<p><code dir="auto">Info.plist</code> 中显示名指向：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="xml"><code><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">key</span><span style="--0:#7FDBCA">></span></span><span style="--0:#D6DEEB;--1:#403F53">CFBundleDisplayName</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">key</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">string</span><span style="--0:#7FDBCA">></span></span><span style="--0:#D6DEEB;--1:#403F53">$(DISPLAY_NAME)</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">string</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<key>CFBundleDisplayName</key><string>$(DISPLAY_NAME)</string>"><div></div></button></div></figure></div>
<p>运行/构建命令：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53">   </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_dev.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ios</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 如果遇到 scheme 未匹配，确保 Xcode 里的 Scheme 名称与 --flavor 值完全一致</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter run   --flavor dev  -t lib/main_dev.dartflutter build ios --flavor prod -t lib/main_prod.dart"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜iOS Schemes】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">目标：创建 `dev/staging/prod` 三个 Scheme，并各对应 Build Configuration 与 Bundle ID。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">步骤：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. 生成/更新 `ios/Config/Dev.xcconfig`、`Staging.xcconfig`、`Prod.xcconfig`（写入 `PRODUCT_BUNDLE_IDENTIFIER`、`DISPLAY_NAME`）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. 修改 `Info.plist`：`CFBundleDisplayName` → `$(DISPLAY_NAME)`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. 在 Xcode 复制 Scheme 并绑定到对应的 Build Configuration（命名建议见正文）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4. 验证：`flutter run --flavor dev -t lib/main_dev.dart`、`flutter build ios --no-codesign --flavor prod -t lib/main_prod.dart`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请输出新增/修改文件内容与图形界面操作要点。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜iOS Schemes】目标：创建 &#x60;dev/staging/prod&#x60; 三个 Scheme，并各对应 Build Configuration 与 Bundle ID。步骤：1. 生成/更新 &#x60;ios/Config/Dev.xcconfig&#x60;、&#x60;Staging.xcconfig&#x60;、&#x60;Prod.xcconfig&#x60;（写入 &#x60;PRODUCT_BUNDLE_IDENTIFIER&#x60;、&#x60;DISPLAY_NAME&#x60;）。2. 修改 &#x60;Info.plist&#x60;：&#x60;CFBundleDisplayName&#x60; → &#x60;$(DISPLAY_NAME)&#x60;。3. 在 Xcode 复制 Scheme 并绑定到对应的 Build Configuration（命名建议见正文）。4. 验证：&#x60;flutter run --flavor dev -t lib/main_dev.dart&#x60;、&#x60;flutter build ios --no-codesign --flavor prod -t lib/main_prod.dart&#x60;。请输出新增/修改文件内容与图形界面操作要点。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="在普通项目里怎么用">在“普通项目”里怎么用？</h2><a class="sl-anchor-link" href="#在普通项目里怎么用"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “在“普通项目”里怎么用？”</span></a></div>
<p>以下是日常软件项目最常见的分环境诉求与落地写法。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜应用到业务代码】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. 网络层：将 `Dio`/`http` 的 `baseUrl` 改为 `FlavorConfig.instance.baseUrl`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. 日志：实现 `setupLogging()`，在 `main_*` 调用；非 prod 使用更详细的日志级别。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. 监控：实现 `setupMonitoring()`，按 `FlavorConfig.isProd` 条件初始化 Sentry/Crashlytics（DSN 用 `--dart-define` 注入）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4. UI：创建 `EnvBanner`，在根部包裹应用，非 prod 显示 `DEV/STG` 角标。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">5. 图标与启动页：为每个 flavor 配置 `flutter_launcher_icons`/`flutter_native_splash` 并生成。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：对应补丁与“冒烟测试”脚本（依次运行 dev/staging/prod，验证 API 地址、角标、日志等级）。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜应用到业务代码】1. 网络层：将 &#x60;Dio&#x60;/&#x60;http&#x60; 的 &#x60;baseUrl&#x60; 改为 &#x60;FlavorConfig.instance.baseUrl&#x60;。2. 日志：实现 &#x60;setupLogging()&#x60;，在 &#x60;main_*&#x60; 调用；非 prod 使用更详细的日志级别。3. 监控：实现 &#x60;setupMonitoring()&#x60;，按 &#x60;FlavorConfig.isProd&#x60; 条件初始化 Sentry/Crashlytics（DSN 用 &#x60;--dart-define&#x60; 注入）。4. UI：创建 &#x60;EnvBanner&#x60;，在根部包裹应用，非 prod 显示 &#x60;DEV/STG&#x60; 角标。5. 图标与启动页：为每个 flavor 配置 &#x60;flutter_launcher_icons&#x60;/&#x60;flutter_native_splash&#x60; 并生成。输出：对应补丁与“冒烟测试”脚本（依次运行 dev/staging/prod，验证 API 地址、角标、日志等级）。"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-接口地址与存储后端">1) 接口地址与存储后端</h3><a class="sl-anchor-link" href="#1-接口地址与存储后端"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1) 接口地址与存储后端”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 依赖注入处：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> dio </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">Dio</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#FFCB8B;--1:#3B61B0">BaseOptions</span><span style="--0:#D6DEEB;--1:#403F53">(baseUrl</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.instance.baseUrl));</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 依赖注入处：final dio = Dio(BaseOptions(baseUrl: FlavorConfig.instance.baseUrl));"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="2-日志等级与调试开关">2) 日志等级与调试开关</h3><a class="sl-anchor-link" href="#2-日志等级与调试开关"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2) 日志等级与调试开关”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">setupLogging</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.isProd) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FFCB8B;--1:#3B61B0">Logger</span><span style="--0:#D6DEEB;--1:#403F53">.level </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">Level</span><span style="--0:#D6DEEB;--1:#403F53">.warning; </span><span style="--0:#919F9F;--1:#5D6376">// 生产少打日志</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#C792EA;--1:#8844AE">else</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FFCB8B;--1:#3B61B0">Logger</span><span style="--0:#D6DEEB;--1:#403F53">.level </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">Level</span><span style="--0:#D6DEEB;--1:#403F53">.debug;   </span><span style="--0:#919F9F;--1:#5D6376">// 开发环境详细</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="void setupLogging() {  if (FlavorConfig.isProd) {    Logger.level = Level.warning; // 生产少打日志  } else {    Logger.level = Level.debug;   // 开发环境详细  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="3-监控与崩溃收集sentry--crashlytics">3) 监控与崩溃收集（Sentry / Crashlytics）</h3><a class="sl-anchor-link" href="#3-监控与崩溃收集sentry--crashlytics"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3) 监控与崩溃收集（Sentry / Crashlytics）”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#FFCB8B;--1:#3B61B0">Future</span><span style="--0:#D6DEEB;--1:#403F53">&#x3C;</span><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53">> </span><span style="--0:#82AAFF;--1:#3B61B0">setupMonitoring</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.isProd) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// SentryFlutter.init((options) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">//   options.dsn = const String.fromEnvironment('SENTRY_DSN');</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// });</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Future<void> setupMonitoring() async {  if (FlavorConfig.isProd) {    // SentryFlutter.init((options) {    //   options.dsn = const String.fromEnvironment(&#x27;SENTRY_DSN&#x27;);    // });  }}"><div></div></button></div></figure></div>
<p>命令传参：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">staging</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_staging.dart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=SENTRY_DSN=...</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=BASE_URL=...</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter run --flavor staging -t lib/main_staging.dart \  --dart-define=SENTRY_DSN=... --dart-define=BASE_URL=..."><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="4-app-图标与启动页">4) App 图标与启动页</h3><a class="sl-anchor-link" href="#4-app-图标与启动页"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4) App 图标与启动页”</span></a></div>
<ul>
<li>用 <code dir="auto">flutter_launcher_icons</code> 按 flavor 生成不同图标：</li>
</ul>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">pubspec.yaml</span></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">flutter_launcher_icons</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">flavors</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">dev</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">image_path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">assets/icons/dev.png</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">staging</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">image_path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">assets/icons/staging.png</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">prod</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">image_path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">assets/icons/prod.png</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter_launcher_icons:  flavors:    dev:      image_path: assets/icons/dev.png    staging:      image_path: assets/icons/staging.png    prod:      image_path: assets/icons/prod.png"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pub</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">flutter_launcher_icons:main</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-f</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pubspec.yaml</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter pub run flutter_launcher_icons:main -f pubspec.yaml"><div></div></button></div></figure></div>
<ul>
<li>启动页 <code dir="auto">flutter_native_splash</code> 也支持多 flavor（同理配置）。</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="5-firebase-多项目">5) Firebase 多项目</h3><a class="sl-anchor-link" href="#5-firebase-多项目"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5) Firebase 多项目”</span></a></div>
<p>为每个环境配置独立的 Firebase 项目与 <code dir="auto">GoogleService-Info.plist</code> / <code dir="auto">google-services.json</code>。</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutterfire</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">configure</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--project=myapp-dev</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--ios-bundle-id=com.example.myapp.dev</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--android-package-name=com.example.myapp.dev</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutterfire configure \  --project=myapp-dev \  --ios-bundle-id=com.example.myapp.dev \  --android-package-name=com.example.myapp.dev"><div></div></button></div></figure></div>
<p>把生成的 <code dir="auto">firebase_options.dart</code> 按环境拆分或在初始化时按 <code dir="auto">FlavorConfig</code> 选择。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="6-ui-内显式环境标识避免误操作">6) UI 内显式环境标识（避免误操作）</h3><a class="sl-anchor-link" href="#6-ui-内显式环境标识避免误操作"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6) UI 内显式环境标识（避免误操作）”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="dart"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">EnvBanner</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">extends</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">StatelessWidget</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">Widget</span><span style="--0:#D6DEEB;--1:#403F53"> child;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">EnvBanner</span><span style="--0:#D6DEEB;--1:#403F53">({</span><span style="--0:#7FDBCA;--1:#096E72">super</span><span style="--0:#D6DEEB;--1:#403F53">.key, </span><span style="--0:#C792EA;--1:#8844AE">required</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#D6DEEB;--1:#403F53">.child});</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">@override</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#FFCB8B;--1:#3B61B0">Widget</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#FFCB8B;--1:#3B61B0">BuildContext</span><span style="--0:#D6DEEB;--1:#403F53"> context) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.isProd) </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> child;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">final</span><span style="--0:#D6DEEB;--1:#403F53"> label </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">FlavorConfig</span><span style="--0:#D6DEEB;--1:#403F53">.instance.name; </span><span style="--0:#919F9F;--1:#5D6376">// DEV / STG</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">Banner</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">message</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> label,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">location</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#3B61B0">BannerLocation</span><span style="--0:#D6DEEB;--1:#403F53">.topStart,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">child</span><span style="--0:#C792EA;--1:#8844AE">:</span><span style="--0:#D6DEEB;--1:#403F53"> child,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="class EnvBanner extends StatelessWidget {  final Widget child;  const EnvBanner({super.key, required this.child});  @override  Widget build(BuildContext context) {    if (FlavorConfig.isProd) return child;    final label = FlavorConfig.instance.name; // DEV / STG    return Banner(      message: label,      location: BannerLocation.topStart,      child: child,    );  }}"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="常用命令清单cheat-sheet">常用命令清单（Cheat Sheet）</h2><a class="sl-anchor-link" href="#常用命令清单cheat-sheet"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常用命令清单（Cheat Sheet）”</span></a></div>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 运行</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dev</span><span style="--0:#D6DEEB;--1:#403F53">     </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_dev.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">staging</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_staging.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 构建 Android</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">apk</span><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">appbundle</span><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 构建 iOS（Xcode 需已创建同名 scheme）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">ios</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--flavor</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main_prod.dart</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># dart-define 方式（单入口）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-t</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">lib/main.dart</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=FLAVOR=staging</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=BASE_URL=https://staging-api.example.com</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter run --flavor dev     -t lib/main_dev.dartflutter run --flavor staging -t lib/main_staging.dartflutter run --flavor prod    -t lib/main_prod.dartflutter build apk        --flavor prod -t lib/main_prod.dartflutter build appbundle  --flavor prod -t lib/main_prod.dartflutter build ios --flavor prod -t lib/main_prod.dartflutter run -t lib/main.dart \  --dart-define=FLAVOR=staging \  --dart-define=BASE_URL=https://staging-api.example.com"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜命令与脚本化】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">在项目根新增 `Makefile` 或 `scripts/`：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- `run-dev` / `run-staging` / `run-prod`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- `build-android-prod`（AAB）与 `build-ios-prod`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">如使用 fvm，将 `flutter` 替换为 `fvm flutter`。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：新增文件内容与在 macOS/Linux 下的执行示例。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜命令与脚本化】在项目根新增 &#x60;Makefile&#x60; 或 &#x60;scripts/&#x60;：- &#x60;run-dev&#x60; / &#x60;run-staging&#x60; / &#x60;run-prod&#x60;- &#x60;build-android-prod&#x60;（AAB）与 &#x60;build-ios-prod&#x60;如使用 fvm，将 &#x60;flutter&#x60; 替换为 &#x60;fvm flutter&#x60;。输出：新增文件内容与在 macOS/Linux 下的执行示例。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="cicd-示例github-actions">CI/CD 示例（GitHub Actions）</h2><a class="sl-anchor-link" href="#cicd-示例github-actions"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “CI/CD 示例（GitHub Actions）”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">build</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF6A83;--1:#A24848">on</span><span style="--0:#D6DEEB;--1:#403F53">: [</span><span style="--0:#ECC48D;--1:#3B61B0">push</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">jobs</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">android</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">runs-on</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">ubuntu-latest</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">strategy</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">matrix</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">flavor</span><span style="--0:#D6DEEB;--1:#403F53">: [</span><span style="--0:#ECC48D;--1:#3B61B0">dev</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#3B61B0">staging</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">steps</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">uses</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">actions/checkout@v4</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">uses</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">subosito/flutter-action@v2</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">with</span><span style="--0:#D6DEEB;--1:#403F53">: { </span><span style="--0:#7FDBCA;--1:#111111">flutter-version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">3.22.0</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">run</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">flutter pub get</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">run</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">flutter build appbundle --flavor ${{ matrix.flavor }} -t lib/main_${{ matrix.flavor }}.dart</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">uses</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">actions/upload-artifact@v4</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">with</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">aab-${{ matrix.flavor }}</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">build/app/outputs/bundle/**/**.aab</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">ios</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">runs-on</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">macos-14</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">strategy</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">matrix</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">flavor</span><span style="--0:#D6DEEB;--1:#403F53">: [</span><span style="--0:#ECC48D;--1:#3B61B0">prod</span><span style="--0:#D6DEEB;--1:#403F53">] </span><span style="--0:#919F9F;--1:#5F636F"># 示例：只发生产包</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">steps</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">uses</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">actions/checkout@v4</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">uses</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">subosito/flutter-action@v2</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">with</span><span style="--0:#D6DEEB;--1:#403F53">: { </span><span style="--0:#7FDBCA;--1:#111111">flutter-version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">3.22.0</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">run</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">flutter pub get</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">run</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">flutter build ios --no-codesign --flavor ${{ matrix.flavor }} -t lib/main_${{ matrix.flavor }}.dart</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">uses</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">actions/upload-artifact@v4</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#7FDBCA;--1:#111111">with</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">ios-${{ matrix.flavor }}</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#7FDBCA;--1:#111111">path</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3B61B0">build/ios/iphoneos/*.ipa</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="name: buildon: [push]jobs:  android:    runs-on: ubuntu-latest    strategy:      matrix:        flavor: [dev, staging, prod]    steps:      - uses: actions/checkout@v4      - uses: subosito/flutter-action@v2        with: { flutter-version: &#x27;3.22.0&#x27; }      - run: flutter pub get      - run: flutter build appbundle --flavor ${{ matrix.flavor }} -t lib/main_${{ matrix.flavor }}.dart      - uses: actions/upload-artifact@v4        with:          name: aab-${{ matrix.flavor }}          path: build/app/outputs/bundle/**/**.aab  ios:    runs-on: macos-14    strategy:      matrix:        flavor: [prod] # 示例：只发生产包    steps:      - uses: actions/checkout@v4      - uses: subosito/flutter-action@v2        with: { flutter-version: &#x27;3.22.0&#x27; }      - run: flutter pub get      - run: flutter build ios --no-codesign --flavor ${{ matrix.flavor }} -t lib/main_${{ matrix.flavor }}.dart      - uses: actions/upload-artifact@v4        with:          name: ios-${{ matrix.flavor }}          path: build/ios/iphoneos/*.ipa"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜CI 配置】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. 在 `.github/workflows/build.yml` 写入上述矩阵构建（Android dev/staging/prod，iOS 仅 prod）。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. 若需签名/发布，预留 `secrets`，并注释说明配置方法。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. 使用 `actions/cache` 缓存 Flutter/pub 依赖。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：Workflow 文件与一次运行的期望产物说明（AAB/IPA 路径）。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜CI 配置】1. 在 &#x60;.github/workflows/build.yml&#x60; 写入上述矩阵构建（Android dev/staging/prod，iOS 仅 prod）。2. 若需签名/发布，预留 &#x60;secrets&#x60;，并注释说明配置方法。3. 使用 &#x60;actions/cache&#x60; 缓存 Flutter/pub 依赖。输出：Workflow 文件与一次运行的期望产物说明（AAB/IPA 路径）。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="常见坑与排查">常见坑与排查</h2><a class="sl-anchor-link" href="#常见坑与排查"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常见坑与排查”</span></a></div>
<ul>
<li>iOS 运行报找不到 Scheme：确认 Xcode 中的 Scheme 名与 <code dir="auto">--flavor</code> 完全一致。</li>
<li>Android 构建找不到任务：<code dir="auto">assemble&#x3C;Flavor>&#x3C;BuildType></code> 大小写要对（如 <code dir="auto">assembleDevDebug</code>）。</li>
<li>图标/名称无变化：检查是否使用了 <code dir="auto">@string/app_name</code>，以及各 flavor 的 <code dir="auto">resValue</code> 或资源目录是否生效。</li>
<li>AGP 8+ 报 namespace：在 <code dir="auto">android { namespace "..." }</code> 指定 <code dir="auto">namespace</code>。</li>
<li>机密管理：<code dir="auto">dart-define</code> 用在 CI 时避免把密钥写进仓库；本地 <code dir="auto">.env</code> 不要入库。</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="prompt"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">【Claude Code 分步提示｜故障排查】</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">请生成一个“自检脚本”（bash），顺序执行：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1. Android：`./gradlew :app:dependencies` 确认 flavors；`./gradlew tasks | rg assemble` 列出 assemble 任务。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2. iOS：`xcodebuild -list -workspace ios/Runner.xcworkspace -scheme dev` 确认 scheme；失败则回显修复步骤。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3. Flutter：分别运行 dev/staging/prod，在控制台输出应用标题与 BASE_URL。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">输出：脚本内容与常见错误的诊断分支（namespace 缺失、资源未覆盖、scheme 拼写错误等）。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="【Claude Code 分步提示｜故障排查】请生成一个“自检脚本”（bash），顺序执行：1. Android：&#x60;./gradlew :app:dependencies&#x60; 确认 flavors；&#x60;./gradlew tasks | rg assemble&#x60; 列出 assemble 任务。2. iOS：&#x60;xcodebuild -list -workspace ios/Runner.xcworkspace -scheme dev&#x60; 确认 scheme；失败则回显修复步骤。3. Flutter：分别运行 dev/staging/prod，在控制台输出应用标题与 BASE_URL。输出：脚本内容与常见错误的诊断分支（namespace 缺失、资源未覆盖、scheme 拼写错误等）。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="使用-claude-code-快速实现-flavors-配置">使用 Claude Code 快速实现 Flavors 配置</h2><a class="sl-anchor-link" href="#使用-claude-code-快速实现-flavors-配置"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “使用 Claude Code 快速实现 Flavors 配置”</span></a></div>
<p>Claude Code 可以帮你在几分钟内完成上述所有配置。以下是高效的提示词模板：</p>
<div class="sl-heading-wrapper level-h3"><h3 id="完整配置提示词">完整配置提示词</h3><a class="sl-anchor-link" href="#完整配置提示词"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “完整配置提示词”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">请帮我为 Flutter 项目配置多环境 Flavors，需要支持 dev、staging、prod 三个环境：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">项目信息：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 包名：com.example.myapp</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 应用名：MyApp</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 环境配置：</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> dev: https://dev-api.example.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> staging: https://staging-api.example.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> prod: https://api.example.com</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">需要实现：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 创建 Dart 侧的 Flavor 配置类和多入口文件</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 配置 Android productFlavors（不同包名后缀、应用名）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 配置 iOS Schemes（需要生成 xcconfig 文件）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 为每个环境设置不同的应用图标（dev 带角标）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">5.</span><span style="--0:#D6DEEB;--1:#403F53"> 添加环境标识 Banner（非生产环境显示）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">6.</span><span style="--0:#D6DEEB;--1:#403F53"> 配置 Firebase 多项目支持</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">7.</span><span style="--0:#D6DEEB;--1:#403F53"> 生成运行和构建的命令脚本</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">8.</span><span style="--0:#D6DEEB;--1:#403F53"> 创建 CI/CD 配置（GitHub Actions）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="请帮我为 Flutter 项目配置多环境 Flavors，需要支持 dev、staging、prod 三个环境：项目信息：- 包名：com.example.myapp- 应用名：MyApp- 环境配置：  - dev: https://dev-api.example.com  - staging: https://staging-api.example.com  - prod: https://api.example.com需要实现：1. 创建 Dart 侧的 Flavor 配置类和多入口文件2. 配置 Android productFlavors（不同包名后缀、应用名）3. 配置 iOS Schemes（需要生成 xcconfig 文件）4. 为每个环境设置不同的应用图标（dev 带角标）5. 添加环境标识 Banner（非生产环境显示）6. 配置 Firebase 多项目支持7. 生成运行和构建的命令脚本8. 创建 CI/CD 配置（GitHub Actions）"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="分步实现提示词">分步实现提示词</h3><a class="sl-anchor-link" href="#分步实现提示词"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “分步实现提示词”</span></a></div>
<div class="sl-heading-wrapper level-h4"><h4 id="1-基础-flavor-结构">1. 基础 Flavor 结构</h4><a class="sl-anchor-link" href="#1-基础-flavor-结构"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. 基础 Flavor 结构”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">创建 Flutter Flavors 基础结构：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> lib/config/flavor_config.dart：定义 AppFlavor 枚举和 FlavorConfig 类</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> lib/main_dev.dart、lib/main_staging.dart、lib/main_prod.dart：三个入口文件</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 支持环境变量注入（BASE_URL、APP_NAME、ENABLE_LOGS）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="创建 Flutter Flavors 基础结构：- lib/config/flavor_config.dart：定义 AppFlavor 枚举和 FlavorConfig 类- lib/main_dev.dart、lib/main_staging.dart、lib/main_prod.dart：三个入口文件- 支持环境变量注入（BASE_URL、APP_NAME、ENABLE_LOGS）"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="2-android-配置">2. Android 配置</h4><a class="sl-anchor-link" href="#2-android-配置"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. Android 配置”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">配置 Android productFlavors：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 在 android/app/build.gradle 中添加 flavorDimensions 和 productFlavors</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> dev 环境：applicationIdSuffix ".dev"，应用名 "MyApp Dev"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> staging 环境：applicationIdSuffix ".staging"，应用名 "MyApp Staging"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> prod 环境：无后缀，应用名 "MyApp"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 为每个 flavor 创建独立的资源目录结构</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="配置 Android productFlavors：- 在 android/app/build.gradle 中添加 flavorDimensions 和 productFlavors- dev 环境：applicationIdSuffix &#x22;.dev&#x22;，应用名 &#x22;MyApp Dev&#x22;- staging 环境：applicationIdSuffix &#x22;.staging&#x22;，应用名 &#x22;MyApp Staging&#x22;- prod 环境：无后缀，应用名 &#x22;MyApp&#x22;- 为每个 flavor 创建独立的资源目录结构"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="3-ios-配置">3. iOS 配置</h4><a class="sl-anchor-link" href="#3-ios-配置"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. iOS 配置”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">配置 iOS Schemes 和 Build Configurations：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 生成 xcconfig 文件（Dev.xcconfig、Staging.xcconfig、Prod.xcconfig）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 创建配置步骤说明：如何在 Xcode 中复制 Scheme</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 设置不同的 Bundle ID 和显示名称</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 处理 Info.plist 中的环境变量引用</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="配置 iOS Schemes 和 Build Configurations：1. 生成 xcconfig 文件（Dev.xcconfig、Staging.xcconfig、Prod.xcconfig）2. 创建配置步骤说明：如何在 Xcode 中复制 Scheme3. 设置不同的 Bundle ID 和显示名称4. 处理 Info.plist 中的环境变量引用"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="4-环境特定功能">4. 环境特定功能</h4><a class="sl-anchor-link" href="#4-环境特定功能"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “4. 环境特定功能”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">实现环境特定功能：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 创建 EnvBanner widget，非生产环境显示环境标识</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 配置日志级别控制（dev: verbose, staging: debug, prod: warning）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 添加 Sentry/Crashlytics 初始化（仅生产环境启用）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 实现 API 拦截器，自动附加环境特定的 headers</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="实现环境特定功能：1. 创建 EnvBanner widget，非生产环境显示环境标识2. 配置日志级别控制（dev: verbose, staging: debug, prod: warning）3. 添加 Sentry/Crashlytics 初始化（仅生产环境启用）4. 实现 API 拦截器，自动附加环境特定的 headers"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="5-图标和启动页">5. 图标和启动页</h4><a class="sl-anchor-link" href="#5-图标和启动页"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “5. 图标和启动页”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">配置多环境图标和启动页：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 设置 flutter_launcher_icons 配置，为每个 flavor 生成不同图标</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> dev 图标右上角添加 "DEV" 标记</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> staging 图标右上角添加 "STG" 标记</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 配置 flutter_native_splash 为每个环境设置不同启动页</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="配置多环境图标和启动页：1. 设置 flutter_launcher_icons 配置，为每个 flavor 生成不同图标2. dev 图标右上角添加 &#x22;DEV&#x22; 标记3. staging 图标右上角添加 &#x22;STG&#x22; 标记4. 配置 flutter_native_splash 为每个环境设置不同启动页"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="6-firebase-多项目">6. Firebase 多项目</h4><a class="sl-anchor-link" href="#6-firebase-多项目"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “6. Firebase 多项目”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">配置 Firebase 多项目支持：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 为每个环境创建独立的 Firebase 项目配置</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 生成 firebase_options_dev.dart、firebase_options_staging.dart、firebase_options_prod.dart</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 在入口文件中根据环境初始化对应的 Firebase 配置</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 设置 Crashlytics 和 Analytics 的环境区分</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="配置 Firebase 多项目支持：1. 为每个环境创建独立的 Firebase 项目配置2. 生成 firebase_options_dev.dart、firebase_options_staging.dart、firebase_options_prod.dart3. 在入口文件中根据环境初始化对应的 Firebase 配置4. 设置 Crashlytics 和 Analytics 的环境区分"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="7-便捷脚本">7. 便捷脚本</h4><a class="sl-anchor-link" href="#7-便捷脚本"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “7. 便捷脚本”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">创建便捷运行脚本 scripts/run_flavors.sh：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> run_dev: 运行开发环境</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> run_staging: 运行预发布环境</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> run_prod: 运行生产环境</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> build_all: 构建所有环境的 APK</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> build_ios_all: 构建所有环境的 iOS</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">包含参数传递和错误处理</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="创建便捷运行脚本 scripts/run_flavors.sh：- run_dev: 运行开发环境- run_staging: 运行预发布环境- run_prod: 运行生产环境- build_all: 构建所有环境的 APK- build_ios_all: 构建所有环境的 iOS包含参数传递和错误处理"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="8-cicd-配置">8. CI/CD 配置</h4><a class="sl-anchor-link" href="#8-cicd-配置"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “8. CI/CD 配置”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">创建 GitHub Actions 工作流 .github/workflows/build.yml：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 矩阵构建策略，并行构建所有 flavors</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> Android: 生成 AAB 文件并上传 artifacts</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> iOS: 在 macOS runner 上构建 IPA</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 自动版本号管理（基于 git tag）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">5.</span><span style="--0:#D6DEEB;--1:#403F53"> 发布到 Google Play 和 App Store Connect（prod flavor）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="创建 GitHub Actions 工作流 .github/workflows/build.yml：1. 矩阵构建策略，并行构建所有 flavors2. Android: 生成 AAB 文件并上传 artifacts3. iOS: 在 macOS runner 上构建 IPA4. 自动版本号管理（基于 git tag）5. 发布到 Google Play 和 App Store Connect（prod flavor）"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="调试和测试提示词">调试和测试提示词</h3><a class="sl-anchor-link" href="#调试和测试提示词"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “调试和测试提示词”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">添加 Flavors 调试和测试支持：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 创建测试配置，确保每个 flavor 的单元测试独立运行</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 添加集成测试，验证不同环境的 API 连接</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 实现环境切换功能（仅 debug 模式）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 创建环境配置检查工具，验证所有配置正确</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="添加 Flavors 调试和测试支持：1. 创建测试配置，确保每个 flavor 的单元测试独立运行2. 添加集成测试，验证不同环境的 API 连接3. 实现环境切换功能（仅 debug 模式）4. 创建环境配置检查工具，验证所有配置正确"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="常见问题修复提示词">常见问题修复提示词</h3><a class="sl-anchor-link" href="#常见问题修复提示词"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常见问题修复提示词”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">检查并修复 Flutter Flavors 常见问题：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> iOS Scheme not found 错误</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> Android Gradle 任务找不到</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 图标没有按环境变化</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> Bundle ID 冲突</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">5.</span><span style="--0:#D6DEEB;--1:#403F53"> Firebase 配置未正确加载</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">提供详细的错误信息和解决方案</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="检查并修复 Flutter Flavors 常见问题：1. iOS Scheme not found 错误2. Android Gradle 任务找不到3. 图标没有按环境变化4. Bundle ID 冲突5. Firebase 配置未正确加载提供详细的错误信息和解决方案"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="claude-code-实战技巧">Claude Code 实战技巧</h3><a class="sl-anchor-link" href="#claude-code-实战技巧"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Claude Code 实战技巧”</span></a></div>
<p>使用 Claude Code 时的最佳实践：</p>
<ol>
<li><strong>分步执行</strong>：不要一次性要求所有配置，分步骤逐个实现</li>
<li><strong>提供上下文</strong>：告诉 Claude Code 你的项目结构和现有配置</li>
<li><strong>验证输出</strong>：每完成一步都运行测试，确保配置正确</li>
<li><strong>保存模板</strong>：将成功的配置保存为模板，方便后续项目复用</li>
</ol>
<p>示例对话：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：我有一个 Flutter 电商项目，需要配置三个环境的 Flavors</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code：我来帮您配置 Flutter Flavors。首先让我了解一下项目情况：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 您的包名是什么？</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 三个环境的 API 地址分别是？</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 需要使用 Firebase 吗？</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">根据回答生成完整配置</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：配置完成后，dev 环境运行报错 "Scheme not found"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code：这是 iOS Scheme 配置问题。让我检查并修复：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">自动诊断并提供解决方案</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="用户：我有一个 Flutter 电商项目，需要配置三个环境的 FlavorsClaude Code：我来帮您配置 Flutter Flavors。首先让我了解一下项目情况：1. 您的包名是什么？2. 三个环境的 API 地址分别是？3. 需要使用 Firebase 吗？[根据回答生成完整配置]用户：配置完成后，dev 环境运行报错 &#x22;Scheme not found&#x22;Claude Code：这是 iOS Scheme 配置问题。让我检查并修复：[自动诊断并提供解决方案]"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p>用好 Flutter Flavors，等于把”多环境治理”变成第一等公民：</p>
<ul>
<li>本地跑 dev，提测走 staging，上线打 prod</li>
<li>代码里按环境切接口、日志、监控与 UI 提示</li>
<li>CI 一键出全矩阵制品</li>
</ul>
<p>配合 Claude Code 的智能提示，你可以在几分钟内完成原本需要几小时的配置工作。拎起本文清单照做，你的项目即可在一套代码下稳定支撑多环境协作与发布。</p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/flutter/" class="astro-sg3lsd66">Flutter</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/flavor/" class="astro-sg3lsd66">Flavor</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/practices/2025-09-17-git-merge-conflict-resolution/" class="astro-dr56dw7m">使用 Claude Code 处理 Git 分支合并与冲突解决</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-17T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月17日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 使用 Claude Code 处理 Git 分支合并与冲突解决 -->
<p>在现代软件开发中，Git 分支合并和冲突解决是日常工作的重要组成部分。Claude Code 作为一个智能化的开发助手，能够显著提升处理这些任务的效率。本文将通过实际案例，详细介绍如何使用 Claude Code 处理各种合并场景。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="核心能力概览">核心能力概览</h2><a class="sl-anchor-link" href="#核心能力概览"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “核心能力概览”</span></a></div>
<p>Claude Code 在 Git 操作方面的主要优势：</p>
<ul>
<li><strong>智能冲突分析</strong>：自动识别冲突原因并提供最优解决方案</li>
<li><strong>批量操作支持</strong>：同时处理多个文件的冲突</li>
<li><strong>代码语义理解</strong>：基于代码逻辑而非仅文本差异来解决冲突</li>
<li><strong>自动化测试验证</strong>：合并后自动运行测试确保代码正确性</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="示例-1功能分支合并与简单冲突解决">示例 1：功能分支合并与简单冲突解决</h2><a class="sl-anchor-link" href="#示例-1功能分支合并与简单冲突解决"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “示例 1：功能分支合并与简单冲突解决”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="场景描述">场景描述</h3><a class="sl-anchor-link" href="#场景描述"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “场景描述”</span></a></div>
<p>你正在开发一个 React 应用，<code dir="auto">feature/user-auth</code> 分支实现了用户认证功能，需要合并到 <code dir="auto">main</code> 分支。两个分支都修改了 <code dir="auto">App.tsx</code> 文件。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="claude-code-操作流程">Claude Code 操作流程</h3><a class="sl-anchor-link" href="#claude-code-操作流程"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Claude Code 操作流程”</span></a></div>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：请帮我将 feature/user-auth 分支合并到 main，并解决可能的冲突</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code 响应：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">我来帮您完成分支合并。首先让我检查当前状态：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git status 和 git branch -a]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git checkout main]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git pull origin main]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git merge feature/user-auth]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">发现冲突在 src/App.tsx 文件中。让我分析冲突内容：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">冲突区域：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> main 分支：添加了新的导航组件</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> feature/user-auth 分支：添加了认证包装器</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">这两个更改是互补的，我将保留双方更改：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[自动编辑 App.tsx，智能整合两部分代码]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git add src/App.tsx]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[运行 npm test 验证]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git commit]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">合并完成！所有测试通过。新的 App.tsx 现在包含了导航组件和认证功能。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="用户：请帮我将 feature/user-auth 分支合并到 main，并解决可能的冲突Claude Code 响应：我来帮您完成分支合并。首先让我检查当前状态：[执行 git status 和 git branch -a][执行 git checkout main][执行 git pull origin main][执行 git merge feature/user-auth]发现冲突在 src/App.tsx 文件中。让我分析冲突内容：冲突区域：- main 分支：添加了新的导航组件- feature/user-auth 分支：添加了认证包装器这两个更改是互补的，我将保留双方更改：[自动编辑 App.tsx，智能整合两部分代码][执行 git add src/App.tsx][运行 npm test 验证][执行 git commit]合并完成！所有测试通过。新的 App.tsx 现在包含了导航组件和认证功能。"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="关键点">关键点</h3><a class="sl-anchor-link" href="#关键点"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “关键点”</span></a></div>
<ul>
<li>Claude Code 自动识别冲突是功能互补而非互斥</li>
<li>智能整合代码而非简单的文本拼接</li>
<li>自动运行测试验证合并正确性</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="示例-2复杂的多文件冲突与依赖关系处理">示例 2：复杂的多文件冲突与依赖关系处理</h2><a class="sl-anchor-link" href="#示例-2复杂的多文件冲突与依赖关系处理"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “示例 2：复杂的多文件冲突与依赖关系处理”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="场景描述-1">场景描述</h3><a class="sl-anchor-link" href="#场景描述-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “场景描述”</span></a></div>
<p>在一个 Node.js 微服务项目中，<code dir="auto">feature/database-migration</code> 分支更新了数据库架构，而 <code dir="auto">main</code> 分支同时添加了新的 API 端点。冲突涉及多个文件和包依赖。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="claude-code-操作流程-1">Claude Code 操作流程</h3><a class="sl-anchor-link" href="#claude-code-操作流程-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Claude Code 操作流程”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：合并 feature/database-migration 到 main，这个分支修改了数据库模型</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code 响应：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">我将系统地处理这个复杂合并。让我先分析影响范围：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git diff main...feature/database-migration --name-only]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">检测到以下文件有潜在冲突：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> package.json (依赖版本冲突)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> src/models/User.js (模型结构变更)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> src/controllers/UserController.js (API 逻辑冲突)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> migrations/20240315_user_table.sql (数据库迁移脚本)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">开始合并处理：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">1.</span><span style="--0:#D6DEEB;--1:#403F53"> 处理 package.json 依赖冲突：</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 保留较新版本的 mongoose: ^7.0.3</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 合并新增的 migration 工具依赖</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">[自动编辑 package.json]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">2.</span><span style="--0:#D6DEEB;--1:#403F53"> 处理 User 模型冲突：</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 整合新字段定义</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 更新验证规则</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 保持向后兼容性</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">[智能重构 User.js]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">3.</span><span style="--0:#D6DEEB;--1:#403F53"> 更新 UserController 以适配新模型：</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 调整查询逻辑</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 更新响应格式</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">自动修改控制器代码</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">4.</span><span style="--0:#D6DEEB;--1:#403F53"> 验证数据库迁移脚本：</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 确保迁移顺序正确</span></div></div><div class="ec-line"><div class="code"><span class="indent">   </span><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 添加回滚脚本</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">创建补充迁移文件</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 npm install]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 npm run migrate]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 npm test]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">所有冲突已解决，测试通过！建议在部署前进行集成测试。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="用户：合并 feature/database-migration 到 main，这个分支修改了数据库模型Claude Code 响应：我将系统地处理这个复杂合并。让我先分析影响范围：[执行 git diff main...feature/database-migration --name-only]检测到以下文件有潜在冲突：- package.json (依赖版本冲突)- src/models/User.js (模型结构变更)- src/controllers/UserController.js (API 逻辑冲突)- migrations/20240315_user_table.sql (数据库迁移脚本)开始合并处理：1. 处理 package.json 依赖冲突：   - 保留较新版本的 mongoose: ^7.0.3   - 合并新增的 migration 工具依赖   [自动编辑 package.json]2. 处理 User 模型冲突：   - 整合新字段定义   - 更新验证规则   - 保持向后兼容性   [智能重构 User.js]3. 更新 UserController 以适配新模型：   - 调整查询逻辑   - 更新响应格式   [自动修改控制器代码]4. 验证数据库迁移脚本：   - 确保迁移顺序正确   - 添加回滚脚本   [创建补充迁移文件][执行 npm install][执行 npm run migrate][执行 npm test]所有冲突已解决，测试通过！建议在部署前进行集成测试。"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="关键点-1">关键点</h3><a class="sl-anchor-link" href="#关键点-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “关键点”</span></a></div>
<ul>
<li>处理跨文件的依赖关系</li>
<li>自动识别需要同步修改的关联文件</li>
<li>生成必要的迁移和回滚脚本</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="示例-3热修复分支的紧急合并与-bug-修复">示例 3：热修复分支的紧急合并与 Bug 修复</h2><a class="sl-anchor-link" href="#示例-3热修复分支的紧急合并与-bug-修复"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “示例 3：热修复分支的紧急合并与 Bug 修复”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="场景描述-2">场景描述</h3><a class="sl-anchor-link" href="#场景描述-2"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “场景描述”</span></a></div>
<p>生产环境发现严重 bug，<code dir="auto">hotfix/payment-calculation</code> 分支包含修复，但与正在开发的 <code dir="auto">develop</code> 分支有冲突，需要同时合并到 <code dir="auto">main</code> 和 <code dir="auto">develop</code>。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="claude-code-操作流程-2">Claude Code 操作流程</h3><a class="sl-anchor-link" href="#claude-code-操作流程-2"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Claude Code 操作流程”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：紧急！需要将 hotfix/payment-calculation 合并到 main 和 develop，</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">这个修复了支付计算的严重 bug</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code 响应：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">理解这是紧急修复，我将优先确保正确性。执行以下操作：</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">阶段 1：合并到 main（生产环境）</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git checkout main]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git merge --no-ff hotfix/payment-calculation]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">检测到 src/services/PaymentService.js 有冲突：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> hotfix 修复了计算公式错误</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> main 分支有格式化更改</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">保留修复并应用格式化：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">智能合并代码，保持修复逻辑的同时应用代码格式</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">验证修复：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[创建针对性测试用例验证 bug 修复]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 npm run test:payment]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">阶段 2：合并到 develop（避免回归）</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git checkout develop]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git merge hotfix/payment-calculation]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">发现更复杂的冲突：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> develop 分支正在重构支付模块</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 需要将修复适配到新架构</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">智能适配修复到新架构：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">分析新架构，将修复逻辑移植到相应位置</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">更新相关的单元测试</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[添加回归测试防止 bug 重现]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">阶段 3：验证和文档</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">执行完整测试套件</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">生成修复报告</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">修复已成功应用到两个分支！</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">关键变更总结：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 修复了浮点数精度导致的计算错误</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 添加了 BigDecimal 处理金额计算</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 增加了边界条件测试覆盖</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">建议立即部署到生产环境。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="用户：紧急！需要将 hotfix/payment-calculation 合并到 main 和 develop，这个修复了支付计算的严重 bugClaude Code 响应：理解这是紧急修复，我将优先确保正确性。执行以下操作：阶段 1：合并到 main（生产环境）[执行 git checkout main][执行 git merge --no-ff hotfix/payment-calculation]检测到 src/services/PaymentService.js 有冲突：- hotfix 修复了计算公式错误- main 分支有格式化更改保留修复并应用格式化：[智能合并代码，保持修复逻辑的同时应用代码格式]验证修复：[创建针对性测试用例验证 bug 修复][执行 npm run test:payment]阶段 2：合并到 develop（避免回归）[执行 git checkout develop][执行 git merge hotfix/payment-calculation]发现更复杂的冲突：- develop 分支正在重构支付模块- 需要将修复适配到新架构智能适配修复到新架构：[分析新架构，将修复逻辑移植到相应位置][更新相关的单元测试][添加回归测试防止 bug 重现]阶段 3：验证和文档[执行完整测试套件][生成修复报告]修复已成功应用到两个分支！关键变更总结：- 修复了浮点数精度导致的计算错误- 添加了 BigDecimal 处理金额计算- 增加了边界条件测试覆盖建议立即部署到生产环境。"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="关键点-2">关键点</h3><a class="sl-anchor-link" href="#关键点-2"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “关键点”</span></a></div>
<ul>
<li>优先级处理和风险评估</li>
<li>在不同代码架构间移植修复</li>
<li>自动生成回归测试防止问题重现</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="高级技巧与最佳实践">高级技巧与最佳实践</h2><a class="sl-anchor-link" href="#高级技巧与最佳实践"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “高级技巧与最佳实践”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="1-预防性冲突检测">1. 预防性冲突检测</h3><a class="sl-anchor-link" href="#1-预防性冲突检测"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “1. 预防性冲突检测”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：在合并前帮我预览可能的冲突</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git merge --no-commit --no-ff feature/branch]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D6DEEB;--0td:underline;--1:#403F53;--1td:underline">分析冲突文件并提供解决建议</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">[执行 git merge --abort 撤销预览]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="用户：在合并前帮我预览可能的冲突Claude Code：[执行 git merge --no-commit --no-ff feature/branch][分析冲突文件并提供解决建议][执行 git merge --abort 撤销预览]"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="2-智能化冲突策略选择">2. 智能化冲突策略选择</h3><a class="sl-anchor-link" href="#2-智能化冲突策略选择"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “2. 智能化冲突策略选择”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">用户：这个文件的冲突应该接受哪边的更改？</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">通过分析代码语义和测试覆盖，建议：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> API 路由文件：接受两边更改（功能累加）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 配置文件：接受 feature 分支（新配置项）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 样式文件：需要手动审查（视觉影响）</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="用户：这个文件的冲突应该接受哪边的更改？Claude Code：通过分析代码语义和测试覆盖，建议：- API 路由文件：接受两边更改（功能累加）- 配置文件：接受 feature 分支（新配置项）- 样式文件：需要手动审查（视觉影响）"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="3-自动化合并后验证">3. 自动化合并后验证</h3><a class="sl-anchor-link" href="#3-自动化合并后验证"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “3. 自动化合并后验证”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code 自动执行：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 静态代码分析</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 单元测试运行</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 集成测试验证</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 代码覆盖率检查</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 性能基准测试</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Claude Code 自动执行：- 静态代码分析- 单元测试运行- 集成测试验证- 代码覆盖率检查- 性能基准测试"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="常见问题处理">常见问题处理</h2><a class="sl-anchor-link" href="#常见问题处理"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常见问题处理”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="q1-如何处理二进制文件冲突">Q1: 如何处理二进制文件冲突？</h3><a class="sl-anchor-link" href="#q1-如何处理二进制文件冲突"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Q1: 如何处理二进制文件冲突？”</span></a></div>
<p>Claude Code 会识别二进制文件并提供选项：</p>
<ul>
<li>保留特定版本</li>
<li>重新生成文件</li>
<li>手动选择文件版本</li>
</ul>
<div class="sl-heading-wrapper level-h3"><h3 id="q2-如何回滚错误的合并">Q2: 如何回滚错误的合并？</h3><a class="sl-anchor-link" href="#q2-如何回滚错误的合并"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Q2: 如何回滚错误的合并？”</span></a></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="markdown"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Claude Code 支持：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> git reset --hard HEAD~1（未推送时）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> git revert -m 1 </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">merge-commit</span><span style="--0:#7FDBCA">></span></span><span style="--0:#D6DEEB;--1:#403F53">（已推送时）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D9F5DD;--1:#111111">-</span><span style="--0:#D6DEEB;--1:#403F53"> 自动创建修复分支</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Claude Code 支持：- git reset --hard HEAD~1（未推送时）- git revert -m 1 <merge-commit>（已推送时）- 自动创建修复分支"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="q3-如何处理-submodule-冲突">Q3: 如何处理 submodule 冲突？</h3><a class="sl-anchor-link" href="#q3-如何处理-submodule-冲突"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Q3: 如何处理 submodule 冲突？”</span></a></div>
<p>Claude Code 能够：</p>
<ul>
<li>识别 submodule 版本冲突</li>
<li>建议合适的 commit 版本</li>
<li>更新 .gitmodules 配置</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="性能优化建议">性能优化建议</h2><a class="sl-anchor-link" href="#性能优化建议"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “性能优化建议”</span></a></div>
<ol>
<li><strong>批量冲突解决</strong>：Claude Code 可以并行处理多个文件的冲突</li>
<li><strong>智能合并策略</strong>：根据文件类型自动选择合并策略</li>
<li><strong>缓存利用</strong>：利用 Git 的 rerere 功能记住冲突解决方案</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="总结">总结</h2><a class="sl-anchor-link" href="#总结"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “总结”</span></a></div>
<p>Claude Code 将 Git 分支合并从繁琐的手工作业转变为智能化、自动化的流程。通过理解代码语义、自动化测试验证和智能冲突解决，显著提升了开发效率和代码质量。</p>
<p>关键优势：</p>
<ul>
<li>减少 80% 的冲突解决时间</li>
<li>自动化测试保证合并质量</li>
<li>智能建议避免常见错误</li>
<li>完整的操作历史追踪</li>
</ul>
<p>在实际项目中，建议将 Claude Code 整合到 CI/CD 流程中，实现更高程度的自动化。记住，虽然 Claude Code 很强大，但关键的架构决策仍需要人工审查和确认。</p> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/git/" class="astro-sg3lsd66">Git</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/git-merge/" class="astro-sg3lsd66">git merge</a></li></ul></div> </footer> </article> <article class="preview astro-dr56dw7m"> <header class="astro-dr56dw7m"> <h2 class="astro-dr56dw7m"> <a href="/zh-cn/blog/ai/claude-code/practices/2025-09-17-smart-apk-naming-with-claude-code/" class="astro-dr56dw7m">用 Claude Code 生成 Flutter Android 编译构建的 APK 命名规则</a> </h2> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2025-09-17T00:00:00.000Z" class="astro-2oxtfctb"> 2025年9月17日 </time>  </div> <div class="authors astro-2oxtfctb"> <a href="https://www.vibesparking.com" class="author astro-kbhsbk7c"><img src="/assets/vibe-sparking-avatar-zh.jpg" alt="Vibe Sparking" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Vibe Sparking</div>  </div> </a>  </div>  </div>  </header> <div class="sl-markdown-content astro-dr56dw7m"> <!-- # 用 Claude Code 生成 Flutter Android 编译构建的 APK 命名规则 -->
<p><strong>想要 APK 一眼就看懂：渠道、环境、版本、分支、时间戳。</strong>
不用手改。</p>
<p>让 Claude Code 自动把这套命名规则写进 <code dir="auto">android/app/build.gradle</code>，打包就出成品。</p>
<blockquote>
<p>我用的命名例子：<code dir="auto">测试A软件App-release-v1.0+1-main-20250918-102530.apk</code>
包含：应用名 + 构建类型 + 版本名/码 + Git 分支 + 时间戳。</p>
</blockquote>
<p>（Flutter 官方打包路径与 Gradle 配置参考见 docs，后面附了出处）</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="用-claude-code一条提示词帮你自动改好-buildgradle">用 Claude Code：一条提示词，帮你自动改好 <code dir="auto">build.gradle</code></h2><a class="sl-anchor-link" href="#用-claude-code一条提示词帮你自动改好-buildgradle"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “用 Claude Code：一条提示词，帮你自动改好 build.gradle”</span></a></div>
<p>把下面这些<strong>可直接复制</strong>的提示词，喂给 Claude Code（任选其一）：</p>
<p><strong>「快速改名」Prompt</strong></p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">你是 Android/Flutter 构建工程师。请在我的 Flutter 项目</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">android/app/build.gradle (Groovy) 中加入：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">1) getGitBranchName()，优先 git rev-parse，兜底读取 env GIT_BRANCH；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">2) 解析 -Pdart-defines (Flutter --dart-define 的 Base64 列表)，解码成 Map；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">3) 生成 APK 名称：{AppName}-{buildType}-v{versionName}+{versionCode}-{gitBranch}-{yyyyMMdd-HHmmss}.apk；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">4) 在对应 variant 的 assemble 任务 doLast 拷贝并重命名产物；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">5) 打印“已生成重命名 APK: 路径/文件名”日志。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">不要替换我已有配置，只追加必要代码，保持 Groovy 语法。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="你是 Android/Flutter 构建工程师。请在我的 Flutter 项目android/app/build.gradle (Groovy) 中加入：1) getGitBranchName()，优先 git rev-parse，兜底读取 env GIT_BRANCH；2) 解析 -Pdart-defines (Flutter --dart-define 的 Base64 列表)，解码成 Map；3) 生成 APK 名称：{AppName}-{buildType}-v{versionName}+{versionCode}-{gitBranch}-{yyyyMMdd-HHmmss}.apk；4) 在对应 variant 的 assemble 任务 doLast 拷贝并重命名产物；5) 打印“已生成重命名 APK: 路径/文件名”日志。不要替换我已有配置，只追加必要代码，保持 Groovy 语法。"><div></div></button></div></figure></div>
<p><strong>「带校验」Prompt</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">检查我当前的 android/app/build.gradle 与 AGP 版本：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 如果直接设置 outputFileName 可能不生效，则使用“assemble 后拷贝改名”的方案；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 兼容多渠道/多构建类型；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 给出最少侵入的补丁，并解释每行代码的作用。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="检查我当前的 android/app/build.gradle 与 AGP 版本：- 如果直接设置 outputFileName 可能不生效，则使用“assemble 后拷贝改名”的方案；- 兼容多渠道/多构建类型；- 给出最少侵入的补丁，并解释每行代码的作用。"><div></div></button></div></figure></div>
<p><strong>「CI 友好」Prompt</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">为 GitHub Actions 增强：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 如果 git rev-parse 不可用，读取 $GITHUB_REF_NAME 作为分支名；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 新 APK 放在 {project}/android/app/build/outputs/apk/{buildType}/ 里；</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">- 输出完整路径到控制台，供后续上传制品步骤使用。</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">只给最终可运行的 Groovy 代码块。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="为 GitHub Actions 增强：- 如果 git rev-parse 不可用，读取 $GITHUB_REF_NAME 作为分支名；- 新 APK 放在 {project}/android/app/build/outputs/apk/{buildType}/ 里；- 输出完整路径到控制台，供后续上传制品步骤使用。只给最终可运行的 Groovy 代码块。"><div></div></button></div></figure></div>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="为什么要改-apk-文件名">为什么要改 APK 文件名？</h2><a class="sl-anchor-link" href="#为什么要改-apk-文件名"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “为什么要改 APK 文件名？”</span></a></div>
<p>默认名字是 <code dir="auto">app-release.apk</code>。
发给测试同学、上 CI 制品库，全都叫一个名。
<strong>找版本靠猜，非常痛苦。</strong></p>
<p>而改名后，<strong>一眼知道</strong>：</p>
<ul>
<li>是哪个分支出的包；</li>
<li>版本号是多少；</li>
<li>什么时候打的。</li>
</ul>
<p><strong>效率直接起飞。</strong></p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="你要准备什么">你要准备什么？</h2><a class="sl-anchor-link" href="#你要准备什么"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “你要准备什么？”</span></a></div>
<ul>
<li>
<p>正常的 Flutter/Android 工程。</p>
</li>
<li>
<p>Android Gradle Plugin（AGP）版本任意，但<strong>改名方式会随 AGP 变</strong>。
<strong>更稳妥的做法是</strong>：<strong>打完包再拷贝并改名</strong>（下文代码就是这样做）。
这是社区在 AGP 新 API 下的通行实践。</p>
</li>
<li>
<p>Flutter 的 <code dir="auto">--dart-define</code> 参数会<strong>以 Base64 传给 Gradle 的 <code dir="auto">-Pdart-defines</code></strong>，我们可以在 <code dir="auto">build.gradle</code> 里解码读取。</p>
</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="一键上手把这段加入-androidappbuildgradle">一键上手：把这段加入 <code dir="auto">android/app/build.gradle</code></h2><a class="sl-anchor-link" href="#一键上手把这段加入-androidappbuildgradle"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一键上手：把这段加入 android/app/build.gradle”</span></a></div>
<blockquote>
<p>放在 <code dir="auto">android { ... }</code> 之后的 <code dir="auto">applicationVariants</code> 逻辑里即可（Groovy 语法）。
思路：拿到分支名 + 解码 <code dir="auto">--dart-define</code> + 生成新文件名 + <code dir="auto">assemble</code> 后拷贝重命名。
这种“拷贝改名”的方式<strong>跨 AGP 版本更稳定</strong>。</p>
</blockquote>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="groovy"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// 读取 Git 分支名（CI 上建议兜底）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">getGitBranchName</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">try</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> branch </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">git rev-parse --abbrev-ref HEAD</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">execute()</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">text</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">trim()</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> (branch </span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">System</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">getenv(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">GIT_BRANCH</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">unknown</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">replace(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">-</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#C792EA;--1:#8844AE">catch</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">Exception</span><span style="--0:#D6DEEB;--1:#403F53"> e) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">System</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">getenv(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">GIT_BRANCH</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#7FDBCA;--1:#096E72">?:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">unknown</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">android {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// ... 你的原有配置 ...</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">applicationVariants</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--1:#403F53"><span style="--0:#D6DEEB">all { </span><span style="--0:#D7DBE0">variant</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#7FDBCA;--1:#096E72">-></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">variant</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">outputs</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--1:#403F53"><span style="--0:#D6DEEB">all { </span><span style="--0:#D7DBE0">output</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#7FDBCA;--1:#096E72">-></span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#919F9F;--1:#5D6376">// 1) 解析 Flutter 的 --dart-define（Gradle 中以 -Pdart-defines Base64 形式传入）</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> dartDefinesMap </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> [:]</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (project</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">hasProperty(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">dart-defines</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> raw </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> project</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">property(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">dart-defines</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> entries </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> []</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (raw </span><span style="--0:#7FDBCA;--1:#096E72">instanceof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">List</span><span style="--0:#D6DEEB;--1:#403F53">) entries</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">addAll(raw)</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C792EA;--1:#8844AE">else</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (raw </span><span style="--0:#7FDBCA;--1:#096E72">instanceof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">String</span><span style="--0:#D6DEEB;--1:#403F53">) entries</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">addAll(raw</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">split(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">,</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">))</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                </span></span><span style="--0:#D6DEEB;--1:#403F53">entries</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--1:#403F53"><span style="--0:#D6DEEB">each { </span><span style="--0:#D7DBE0">item</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#7FDBCA;--1:#096E72">-></span></div></div><div class="ec-line"><div class="code"><span class="indent">                    </span><span style="--0:#C792EA;--1:#8844AE">try</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> decoded </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">String</span><span style="--0:#D6DEEB;--1:#403F53">(item</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">decodeBase64())</span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> kv </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> decoded</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">split(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">=</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">                        </span><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (kv</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">length </span><span style="--0:#C792EA;--1:#8844AE">==</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">) dartDefinesMap[kv[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">]] </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> kv[</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                    </span></span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#C792EA;--1:#8844AE">catch</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">Exception</span><span style="--0:#D6DEEB;--1:#403F53"> ignored) { }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#919F9F;--1:#5D6376">// 2) 你可传入 LOG_SHOW_PREFIX 等环境位</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> appName </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">测试A软件App</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> buildType </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> variant</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">buildType</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">name</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> versionName </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> variant</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">versionName</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> versionCode </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> variant</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">versionCode</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> gitBranch </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> getGitBranchName()</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> timestamp </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">Date</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">format(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">yyyyMMdd-HHmmss</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> newApkName </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#ECC48D;--1:#984E4D">appName</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#984E4D">-</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#ECC48D;--1:#984E4D">buildType</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#984E4D">-v</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#ECC48D;--1:#984E4D">versionName</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#984E4D">+</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#ECC48D;--1:#984E4D">versionCode</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#984E4D">-</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#ECC48D;--1:#984E4D">gitBranch</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#984E4D">-</span><span style="--0:#E2817F;--1:#B23834">${</span><span style="--0:#ECC48D;--1:#984E4D">timestamp</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#ECC48D;--1:#984E4D">.apk</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#919F9F;--1:#5D6376">// 3) 打完当前 variant 的 assemble 后，拷贝并改名</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">variant</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">assembleProvider</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">get()</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">doLast {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C792EA;--1:#8844AE">def</span><span style="--0:#D6DEEB;--1:#403F53"> outDir </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> output</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">outputFile</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">parent</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                </span></span><span style="--0:#D6DEEB;--1:#403F53">copy {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                    </span></span><span style="--0:#D6DEEB;--1:#403F53">from(output</span><span style="--0:#7FDBCA;--1:#096E72">.</span><span style="--0:#D6DEEB;--1:#403F53">outputFile)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                    </span></span><span style="--0:#D6DEEB;--1:#403F53">into(outDir)</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                    </span></span><span style="--0:#D6DEEB;--1:#403F53">rename { newApkName }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#C5E478;--1:#3B61B0">println</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">✅ 已生成重命名 APK: </span><span style="--0:#C5E478;--1:#3B61B0">$outDir</span><span style="--0:#ECC48D;--1:#984E4D">/</span><span style="--0:#C5E478;--1:#3B61B0">$newApkName</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">            </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 读取 Git 分支名（CI 上建议兜底）def getGitBranchName() {    try {        def branch = &#x22;git rev-parse --abbrev-ref HEAD&#x22;.execute().text.trim()        return (branch ?: System.getenv(&#x22;GIT_BRANCH&#x22;) ?: &#x22;unknown&#x22;).replace(&#x27;/&#x27;, &#x27;-&#x27;)    } catch (Exception e) {        return System.getenv(&#x22;GIT_BRANCH&#x22;) ?: &#x22;unknown&#x22;    }}android {    // ... 你的原有配置 ...    applicationVariants.all { variant ->        variant.outputs.all { output ->            // 1) 解析 Flutter 的 --dart-define（Gradle 中以 -Pdart-defines Base64 形式传入）            def dartDefinesMap = [:]            if (project.hasProperty(&#x27;dart-defines&#x27;)) {                def raw = project.property(&#x27;dart-defines&#x27;)                def entries = []                if (raw instanceof List) entries.addAll(raw)                else if (raw instanceof String) entries.addAll(raw.split(&#x27;,&#x27;))                entries.each { item ->                    try {                        def decoded = new String(item.decodeBase64())                        def kv = decoded.split(&#x27;=&#x27;, 2)                        if (kv.length == 2) dartDefinesMap[kv[0]] = kv[1]                    } catch (Exception ignored) { }                }            }            // 2) 你可传入 LOG_SHOW_PREFIX 等环境位            def appName = &#x22;测试A软件App&#x22;            def buildType = variant.buildType.name            def versionName = variant.versionName            def versionCode = variant.versionCode            def gitBranch = getGitBranchName()            def timestamp = new Date().format(&#x22;yyyyMMdd-HHmmss&#x22;)            def newApkName = &#x22;${appName}-${buildType}-v${versionName}+${versionCode}-${gitBranch}-${timestamp}.apk&#x22;            // 3) 打完当前 variant 的 assemble 后，拷贝并改名            variant.assembleProvider.get().doLast {                def outDir = output.outputFile.parent                copy {                    from(output.outputFile)                    into(outDir)                    rename { newApkName }                }                println &#x22;✅ 已生成重命名 APK: $outDir/$newApkName&#x22;            }        }    }}"><div></div></button></div></figure></div>
<blockquote>
<p>说明：</p>
<ul>
<li>Git 分支在本地用 <code dir="auto">rev-parse</code>，在 CI 可通过 <code dir="auto">GIT_BRANCH</code> 环境变量兜底。</li>
<li>新版 AGP 的“直接改产物名”方案经常不稳定；<strong>拷贝改名</strong>是更通用的路线。</li>
<li>Flutter 的打包配置位置与打包方式，详见官方文档。</li>
</ul>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="如何把---dart-define-传进来">如何把 <code dir="auto">--dart-define</code> 传进来？</h2><a class="sl-anchor-link" href="#如何把---dart-define-传进来"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “如何把 --dart-define 传进来？”</span></a></div>
<p>命令行示例：</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># Release 包（示例环境变量）</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">apk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--release</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=LOG_SHOW_PREFIX=false</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=CHANNEL=official</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter build apk --release \  --dart-define=LOG_SHOW_PREFIX=false \  --dart-define=CHANNEL=official"><div></div></button></div></figure></div>
<p>这些 <code dir="auto">--dart-define</code> 会被 Flutter <strong>Base64 编码并注入 <code dir="auto">-Pdart-defines</code></strong>，上面的 Gradle 代码会解码拿到 Map 使用。</p>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="常见坑位我帮你踩过了">常见坑位（我帮你踩过了）</h2><a class="sl-anchor-link" href="#常见坑位我帮你踩过了"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “常见坑位（我帮你踩过了）”</span></a></div>
<ul>
<li>
<p><strong>直接改产物名偶尔失效</strong>
新版 AGP 的 Variant API 有改动。和社区经验一致，<strong>推荐 assemble 后“拷贝+改名”</strong>。</p>
</li>
<li>
<p><strong>Flutter 产物目录差异</strong>
部分情况下会出现 <code dir="auto">flutter-apk/</code> 目录或忽略 <code dir="auto">outputFileName</code> 的现象。遇到就用拷贝改名兜底。</p>
</li>
<li>
<p><strong>CI 是 detached HEAD</strong>
<code dir="auto">git rev-parse</code> 取不到分支，记得用环境变量兜底（如 <code dir="auto">GIT_BRANCH</code> 或 CI 专用变量）。</p>
</li>
</ul>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="一条命令出成品">一条命令，出成品</h2><a class="sl-anchor-link" href="#一条命令出成品"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “一条命令，出成品”</span></a></div>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">flutter</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">build</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">apk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--release</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=LOG_SHOW_PREFIX=false</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">--dart-define=CHANNEL=official</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># 输出类似：</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># android/app/build/outputs/apk/release/测试A软件App-release-v1.0+1-main-20250918-102530.apk</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="flutter build apk --release \  --dart-define=LOG_SHOW_PREFIX=false \  --dart-define=CHANNEL=official"><div></div></button></div></figure></div>
<blockquote>
<p>打包配置入口与目录结构可对照官方文档核实。</p>
</blockquote>
<hr>
<div class="sl-heading-wrapper level-h2"><h2 id="结语">结语</h2><a class="sl-anchor-link" href="#结语"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “结语”</span></a></div>
<p><strong>把命名写进流程</strong>，每个包都有“身份证”。
测试、回溯、追 bug，全都省事。
Claude Code 能把这些“烦人的小事”，变成一次配置，长期复用。</p>
<p><strong>你觉得这套命名还要加什么信息？</strong></p>
<!-- 比如 git 提交短哈希、渠道名、设备 ABI？评论区聊聊，我给你补齐 Groovy 片段。

---

## 3 个多语言标题 & slug

1. **把 APK 名字改成人话：Claude Code 帮你 5 分钟搞定 Flutter Android 命名规则**
   EN: Rename APKs the Smart Way: Claude Code Automates Flutter Android File Names
   繁體: 把 APK 名稱改成人話：Claude Code 5 分鐘自動化 Flutter Android 命名
   日本語: APK 名を人間向けに：Claude CodeでFlutter Androidの命名を自動化
   Français : Renommer vos APK intelligemment : Claude Code automatise le nommage Flutter Android
   Español: Renombra APK de forma inteligente: Claude Code automatiza Flutter Android
   Português: Renomeie APK do jeito certo: Claude Code automatiza nomes no Flutter Android
   **slug:** `smart-apk-naming-with-claude-code`

2. **一键改名！让你的 Flutter 包名自带版本、分支、时间戳**
   EN: One-Click APK Renaming with Version, Branch and Timestamp
   繁體: 一鍵改名！Flutter 套件帶版本、分支與時間戳
   日本語: ワンクリックでAPK改名：バージョン/ブランチ/タイムスタンプ付き
   Français : Un clic pour renommer l’APK avec version/branche/timestamp
   Español: Renombrado de APK con versión/ramaymarca de tiempo
   Português: Renomeie APK com versão/branch/timestamp
   **slug:** `one-click-flutter-apk-rename`

3. **别再叫 app-release.apk 了：这套规则让发布更清晰**
   EN: Stop Shipping app-release.apk: Make Releases Self-Describing
   繁體: 別再叫 app-release.apk：讓釋出一眼看懂
   日本語: もう app-release.apk はやめよう：自己説明的なリリースへ
   Français : Finis les app-release.apk : des livrables auto-descriptifs
   Español: Adiós a app-release.apk: entregables autoexplicativos
   Português: Chega de app-release.apk: releases autoexplicativos
   **slug:** `stop-shipping-app-release-apk`

---

## 封面与配图（插画风·2:1，无中文）

**封面图 Prompt**
“Flat illustration, Dev workspace at night, laptop building Android app, APK file icon morphs into a labeled package showing version, branch, timestamp, gentle neon lights, clean vector shapes, 2:1.”

**配图 1（代码注入点）**
“Diagram-style illustration, build.gradle file with highlighted code blocks, arrows from git branch and dart-define to ‘new APK name’, minimalistic, vector, 2:1.”

**配图 2（流水线场景）**
“CI/CD conveyor belt turning generic app-release.apk into descriptive files with tags (release, v1.0+1, main, 20250918), playful but professional, vector, 2:1.”

---

## 朋友圈/评论区 3 条话术

1. “以前发包全叫 app-release.apk，手一抖就装错。现在一键改名，版本分支全带上，真香😎”
2. “没时间看文档？把文里 Prompt 丢给 Claude Code，5 分钟把 Gradle 配好，省下半天扯皮。”
3. “测试同学再也不追问‘这包谁打的、哪来的’了。看名字就懂，沟通成本=0。”

---

要不要我**给你的工程**做一次**最小侵入补丁**版本？
或者扩写一版带 **AAB**、**多渠道** 的命名规则？

[1]: https://docs.flutter.dev/deployment/android?utm_source=chatgpt.com "Build and release an Android app"
[2]: https://gist.github.com/ychescale9/fffef60e49de36375698997b277fab9d?utm_source=chatgpt.com "Customizing APK file name with new AGP variant APIs"
[3]: https://github.com/flutter/flutter/issues/100292?utm_source=chatgpt.com "[Document] Usage of Dart-Define variables in gradle scripts"
[4]: https://stackoverflow.com/questions/15061277/how-can-i-get-the-current-git-branch-in-gradle?utm_source=chatgpt.com "How can I get the current git branch in gradle?"
[5]: https://stackoverflow.com/questions/75808087/flutter-generate-default-apk-in-flutter-apk-how-to-rename-those-file-like-i-did?utm_source=chatgpt.com "[Flutter generate default apk in flutter-apk how to rename ..." --> </div> <footer class="astro-dr56dw7m"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/claude-code/" class="astro-sg3lsd66">Claude Code</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/flutter/" class="astro-sg3lsd66">Flutter</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/android/" class="astro-sg3lsd66">Android</a></li><li class="astro-sg3lsd66"><a href="/zh-cn/blog/tags/apk/" class="astro-sg3lsd66">APK</a></li></ul></div> </footer> </article>  </div>  <footer class="not-content astro-w2yzoj57"> <div class="pagination astro-q3jscx35" data-pagefind-ignore><div class="card-grid astro-zntqmydn"><div class="sl-link-card astro-mf7fz2mj"> <span class="sl-flex stack astro-mf7fz2mj"> <a href="/zh-cn/blog/" rel="prev" class="astro-q3jscx35 astro-mf7fz2mj"> <span class="title astro-mf7fz2mj">Newer posts</span> </a>  </span> <svg aria-hidden="true" class="icon rtl:flip astro-mf7fz2mj astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> </div> <div class="sl-link-card astro-mf7fz2mj"> <span class="sl-flex stack astro-mf7fz2mj"> <a href="/zh-cn/blog/3/" rel="next" class="astro-q3jscx35 astro-mf7fz2mj"> <span class="title astro-mf7fz2mj">Older posts</span> </a>  </span> <svg aria-hidden="true" class="icon rtl:flip astro-mf7fz2mj astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> </div> </div> </div> </footer>   </div> <footer class="sl-flex astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links print:hidden astro-u2l5gyhi" dir="ltr">   </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>  